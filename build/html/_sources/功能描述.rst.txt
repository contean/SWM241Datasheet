.. vim: syntax=rst

功能描述
=========

功能描述
----------------

存储器映射
----------

SWM241控制器为32位通用控制器，提供了4G字节寻址空间，如下表所示。数据格式仅支持小端格式（Little-Endian），各模块具体寄存器排布及操作说明在后章节有详细描述。

表格 6‑1存储器映射

.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 起始
     - 结束
     - 描述


   * - 存储器
     -
     -

   * - 0x00000000
     - -
     - FLASH

   * - 0x20000000
     - -
     - SRAM

   * - AHB总线外设

   * - 0x40000000
     - 0x400007FF
     - SYSCON

   * - 0x40000800
     - 0x40000FFF
     - DMA

   * - 0x40001000
     - 0x400017FF
     - INTCTRL

   * - 0x40002800
     - 0x40002FFF
     - CRC

   * - 0x40003800
     - 0x40003FFF
     - DIVIDER

   * - APB1总线外设
     -
     -

   * - 0x40040000
     - 0x400407FF
     - GPIOA

   * - 0x40040800
     - 0x40040FFF
     - GPIOB

   * - 0x40041000
     - 0x400417FF
     - GPIOC

   * - 0x40041800
     - 0x40041FFF
     - GPIOD

   * - 0x40042000
     - 0x400427FF
     - UART0

   * - 0x40042800
     - 0x40042FFF
     - UART1

   * - 0x40043000
     - 0x400437FF
     - UART2

   * - 0x40043800
     - 0x40043FFF
     - UART3

   * - 0x40044000
     - 0x400447FF
     - SPI0

   * - 0x40044800
     - 0x40044FFF
     - SPI1

   * - 0x40046000
     - 0x400467FF
     - PWM

   * - 0x40046800
     - 0x40046FFF
     - TIMER

   * - 0x40049000
     - 0x400497FF
     - SARADC0

   * - 0x4004A000
     - 0x4004A7FF
     - FLASHC

   * - 0x4004B800
     - 0x4004BFFF
     - RTC

   * - APB2总线外设
     -
     -

   * - 0x400A0000
     - 0x400A07FF
     - PORTCON

   * - 0x400A0800
     - 0x400A0FFF
     - WDT

   * - 0x400A6000
     - 0x400A67FF
     - I2C0

   * - 0x400A6800
     - 0x400A6FFF
     - I2C1

   * - 0x400A8000
     - 0x400A8FFF
     - CAN0

   * - 0x400A9800
     - 0x400A9FFF
     - SLCD

   * - 0x400AA000
     - 0x400AA7FF
     - ANACON

   * - 0x400AA800
     - 0x400AAFFF
     - SLED

   * - 0x400AB000
     - 0x400AB7FF
     - SAFETY

   * - 核内部控制器
     -
     -

   * - 0xE000E010
     - 0xE000E01F
     - 系统定时控制寄存器

   * - 0xE000E100
     - 0xE000E4EF
     - NVIC中断控制寄存器器

   * - 0xE000ED00
     - 0xE000ED3F
     - 系统控制寄存器


中断控制器（NVIC）
--------------------

概述
~~~~~~~~~~~~~~

Cortex-M0提供了“嵌套向量中断控制器（NVIC）”用以管理中断事件。

中断优先级分为4级，可通过中断优先级配置寄存器（IRQn）进行配置。中断发生时，内核比较中断优先级，并自动获取入口地址，并保护环境，将指定寄存器中数据入栈，无需软件参与。中断服务程序结束后，由硬件完成出栈工作。同时支持“尾链”模式及“迟至”模式，有效的优化了中断发生及背对背中断的执行效率，提高了中断
的实时性。

更多细节请参阅“Cortex®-M0 技术参考手册”及“ARM® CoreSight技术参考手册”。

特性
~~~~~~

-  支持嵌套及向量中断

-  硬件完成现场的保存和恢复

-  动态改变优先级

-  确定的中断时间

.. _功能描述-1:

功能描述
~~~~~~~~~

中断向量表
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

SWM241提供了32个中断供外设与核交互，其排列如表格 6‑2所示。可以通过中断配置模块，将任意模块或具体IO的中断连接至指定中断编号。具体使用参考中断配置模块。

表格 6‑2中断编号及对应外设

.. list-table::
   :widths: 50 50
   :header-rows: 0


   * - 中断（IRQ编号）
     - 外设

   * - 0
     - UART0

   * - 1
     - TIMER0

   * - 2
     - SPI0

   * - 3
     - UART1

   * - 4
     - UART2

   * - 5
     - TIMER1

   * - 6
     - DMA

   * - 7
     - PWM_CH0

   * - 8
     - I2C1

   * - 9
     - TIMER2

   * - 10
     - TIMER3

   * - 11
     - WDT

   * - 12
     - I2C0

   * - 13
     - UART3

   * - 14
     - SARADC0

   * - 15
     - TIMER4

   * - 16
     - CAN/GPIOD1

   * - 17
     - GPIOC2/GPIOB1

   * - 18
     - GPIOC3/TIMER5

   * - 19
     - GPIOD6/ GPIOA0

   * - 20
     - TIMER6/GPIOC1

   * - 21
     - GPIOD8/GPIOA1

   * - 22
     - GPIOD9/GPIOB7

   * - 23
     - GPIOB5/ GPIOD10

   * - 24
     - GPIOD13/GPIOB2/GPIOA2

   * - 25
     - TIMER7/GPIOD12/XTAL_STOP_DET

   * - 26
     - GPIOA /PWM_CH1

   * - 27
     - GPIOB /PWM_CH2

   * - 28
     - PWM_HALT/GPIOD11/ BOD

   * - 29
     - SAFETY/GPIOC/PWM_CH3

   * - 30
     - HALL/CAN/ SPI1

   * - 31
     - RTC /GPIOD

   * - NMI
     - SYSTEM


系统管理（SYSCON）
---------------------

.. _概述-1:

概述
~~~~

系统管理为整个芯片提供时钟源，包括系统时钟切换、外设时钟门控、工作模式选择、数据备份以及版本控制等功能。还可通过单独时钟的开或关，时钟源选择来进行功耗控制。

.. _特性-1:

特性
~~~~

-  时钟控制

-  工作模式选择

-  休眠使能

-  RTC唤醒设置

-  端口唤醒设置

-  BOD掉电检测控制

-  复位控制及状态

-  UID

模块结构框图
~~~~~~~~~~~~~~~

|Featur002|
  .. figure：../media/Feature002.emf

图 6‑1时钟结构框图

| 注：系统时钟： *SYSCLK*\ ； *AHB* 时钟： *HCLK*\ ； *APB1* 时钟：
  *PCLK1*\ ； *APB2* 时钟： *PCLK2*\ 。
| *SYSCLK = HCLK = PCLK1 = 2\* PCLK2*\ 。

例如：系统时钟 *SYSCLK* 选择的是 *48MHz*\ ，那么 *PCLK1=48MHz*\ ， *PCLK2=24MHz*\ 。

.. _功能描述-2:

功能描述
~~~~~~~~

时钟控制
^^^^^^^^^

SWM241有下列时钟源可供使用：

-  内部高频振荡器（HRC）：内部高频振荡器为片内时钟源，无需连接任何外部器件。频率为48MHz，通过HRCCR寄存器进行切换，可提供较精确的固定频率时钟.

-  内部低频振荡器（LRC）：内部低频振荡器为片内时钟源，无需连接任何外部器件。频率为32KHz。

-  外部振荡器（XTAL）：外部振荡器可接2~32MHz频率.

-  外部低频振荡器（XTAL_32K）：外部低频振荡器，支持32.768KHz时钟接入

对于主时钟选择，通过CLKSEL寄存器SYS位，选择内部高频时钟或其他时钟。

CLKSEL寄存器SYS位，选择内部高频时钟（HRC），时钟源为48MHz，此时CLKSEL寄存器CLK位无效。

CLKSEL 寄存器SYS位，选择CLK，通过CLK位可选择时钟源为片内高频RC振荡器（48MHz）、片外高频晶体振荡器（3~32MHz）、片外低频晶体振荡器（32.768KHz）、片内低频RC振荡器（32KHz），此时CLKSEL寄存器CLK_DIVX位有效：

-  CLK_DIVX = 0时，选择内部HRC时钟不分频

-  CLK_DIVX = 1时，选择内部HRC时钟8分频

当CLKSEL 寄存器CLK选择片外时钟。选择片外时钟前，需将相应引脚输入使能通过INEN_x寄存器打开，并通过寄存器PORTx_SEL将相应引脚换至外接晶振功能，且将XTALCR寄存器中外接晶振使能位使能。完成上述操作后，需根据外部晶振起振时间，使用软件产生一定时间，确保晶振稳定震荡，最后将CLK
SEL寄存器中相应位设置为片外震荡器。

注意：执行时钟切换时，需要保证目标时钟使能及通路打开，在内部HRC时钟相互切换时，需要先切换至32KHz时钟

对于ADC时钟，通过CLKSEL寄存器ADC、ADCDIV位配置：

通过CLKSEL.ADC选择SARADC时钟为片内高频RC振荡器（HRC：48MHz）、片外高频晶体振荡器（2~32MHz）。可通过CLKSEL.ADCDIV选择SARADC时钟源分频，可选不分频、4分频、8分频。

内部HRC及LRC可通过HRCCR寄存器ON位与LRCCR寄存器ON位进行关闭操作，关闭前需确认时钟已切换，并未使用即将执行关闭操作的时钟。

外设时钟控制功能可控制外设时钟打开及关闭，如：

-  GPIO

-  SARADC

-  SLED

-  DIV

-  CRC

-  I2C

-  SPI

-  PWM

-  TIMER

-  WDT

-  UART

-  RTC

上电后，以上模块均处于时钟关闭状态，需要通过设置CLKEN0与CLKEN1寄存器进行时钟使能，否则访问对应模块寄存器操作无效。

复位
^^^^^^

复位源包括上电/BOD/WDT/外部复位引脚/低功耗管理复位/system reset及芯片各个模块独立软复位（ADC/RTC/DIV/I2C等模块）。

当以下事件中的一个发生时，产生一个系统复位，可复位芯片全局：

-  上电复位

-  外部复位引脚复位

-  WDT看门狗计数复位

-  BOD掉电复位

可通过查看RSTSR复位状态寄存器中的复位状态标志位识别复位事件来源

各模块独立软复位只复位该模块。

休眠与唤醒设置
^^^^^^^^^^^^^^^^^^

SWM241系列提供浅睡眠（SLEEP），通过SLEEP寄存器进行使能操作。

**浅睡眠模式**

浅睡眠模式下，芯片进入保持状态，所有时钟关闭，在功耗较低的前提下保持数据。可以通过配置任意I/O引脚进行唤醒操作，也可以通过RTC定时器进行唤醒操作，或者两种唤醒操作同时存在。IO唤醒操作同样为下降沿唤醒。唤醒后，程序从睡眠使能语句继续执行。

在sleep之前，需要将时钟切换为内部高频。

注意：浅睡眠模式使能前需保证LRC（32KHz）时钟为使能状态，且将所有不需要唤醒操作的IO输入使能关闭（PORTCON模块中INEN_x寄存器）。

**RTC唤醒**

浅睡眠模式下，通过SYSCON模块中RTCWKSR寄存器及RTCWKCR寄存器进行定时器唤醒操作。流程如下：

-  关闭所有不需要唤醒功能的IO输入使能（PORTCON模块中INEN_x寄存器）

-  配置RTC时钟源及唤醒时间

-  使能唤醒源，设置RTCWKCR寄存器EN位为1 (使能前需通过写1清除TWGFLG寄存器FLG位)

-  使能RTC，RTC开始计数

-  SLEEP寄存器SLEEP位置1后，芯片进入浅睡眠模式，RTC计到设置值后唤醒芯片

-  唤醒后，RTCWKSR寄存器FLAG位为1（可通过对该位写1进行清除）

**端口唤醒**

浅睡眠模式下，可指定任意IO进行唤醒操作。示意图如图 6‑2所示。

具体流程如下：

-  确认LRC（32KHz时钟）为使能状态

-  将需要执行唤醒操作的引脚对应PxWKEN寄存器及INEN_x寄存器指定位配置为1，使能相应端口对应位输入使能及唤醒功能

-  SLEEP寄存器BIT[0] = 1后，芯片进入浅睡眠模式

-  唤醒端口可配置为GPIO端口，以及UART模块RX端口或I2C模块DAT端口，当配置端口对应位产生下降沿时，芯片被唤醒，继续执行程序。使用通讯接口进行唤醒时，需保证通讯采样速率低于32KHz，避免出现数据丢失现象

-  唤醒后，端口对应PxWKSR寄存器对应位被置1，可通过对该位写1进行清除（该位对进入休眠无影响）

注意：所有配置为唤醒功能的引脚，执行唤醒过程时只能有一个产生下降沿，对应引脚必须保证为高电平。为保证功耗最低，需确认所有输入使能引脚无悬空输入状态

   |Featur003|
  .. figure：../media/Feature003.emf

图 6‑2端口唤醒示意图

BOD掉电检测
^^^^^^^^^^^^

芯片提供了低电压中断及复位功能，置PERWP寄存器ANACFGR位，关闭写保护，并通过BODCR寄存器进行配置。

通过配置寄存器BODCR，可选择电压低压1.7V/1.9V/2.1V/2.7V/3.5V产生复位。当电压低于配置电压时，将产生低压复位。该功能为常开功能，系统复位后默认低压阈值为1.7V。

通过配置寄存器BODCR，可选择电压低压1.9V/2.1V/2.3V/2.5V/2.7V/3.5V/4.1V产生中断，当电压低于配置电压时，将产生BOD中断信号，通过查询BODSR寄存器IF位可以获取状态。

IF位为中断状态位，当芯片供电电压从配置电压以上变为低于配置电压时，该位将被置1（沿触发）。此时若IE位为非屏蔽状态（IE = 1），则NVIC控制器将接收到BOD中断。该中断可通过向IF位写1清除。清除后，若电压低于配置电压，IF 位会再次置位，再次产生中断。

用户ID
^^^^^^^

芯片可以提供唯一96BIT ID号用于加密使用。

寄存器映射
~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称
     - 偏移
     - 类型
     - 复位值
     - 描述


   * - SYSCON
     - BASE：0x40000000
     -
     -
     -

   * - CLKSEL
     - 0x00
     - R/W
     - 0x00cc_2801
     - 时钟选择控制寄存器

   * - CLKDIVX_ON
     - 0x04
     - R/W
     - 0x0000_0000
     - 源时钟控制寄存器

   * - CLKEN0
     - 0x08
     - R/W
     - 0x0000_0000
     - 时钟门控控制寄存器0

   * - CLKEN1
     - 0x0C
     - R/W
     - 0x0000_0000
     - 时钟门控控制寄存器1

   * - SLEEP
     - 0x10
     - R/W
     - 0x0000_0000
     - 系统模式控制寄存器

   * - RSTSR
     - 0x024
     - R/W1C
     - 0x0000_0000
     - 芯片复位状态寄存器

   * - RTCWKCR
     - 0x30
     - R/W
     - 0x0000_0000
     - RTC唤醒使能控制寄存器

   * - RTCWKSR
     - 0x34
     - R/W1C
     - 0x0000_0000
     - RTC唤醒标志寄存器

   * - CHIP_ID0
     - 0x80
     - RO
     - —
     - 芯片128位ID寄存器0

   * - CHIP_ID1
     - 0x84
     - RO
     - —
     - 芯片128位ID寄存器1

   * - CHIP_ID2
     - 0x88
     - RO
     - —
     - 芯片128位ID寄存器2

   * - CHIP_ID3
     - 0x8C
     - RO
     - —
     - 芯片128位ID寄存器3

   * - PRNGCR
     - 0x0d0
     - R/W
     - 0x0000_0000
     - 伪随机数控制寄存器

   * - PRNGDL
     - 0x0d4
     - RO
     - 0x0000_0000
     - 伪随机数输出寄存器低32位数据

   * - PRNGDH
     - 0x0d8
     - RO
     - 0x0000_0000
     - 伪随机数输出寄存器高32位数据

   * - PAWKEN
     - 0x100
     - R/W
     - 0x0000_0000
     - PORTA唤醒使能控制寄存器

   * - PBWKEN
     - 0x104
     - R/W
     - 0x0000_0000
     - PORTB唤醒使能控制寄存器

   * - PCWKEN
     - 0x108
     - R/W
     - 0x0000_0000
     - PORTC唤醒使能控制寄存器

   * - PDWKEN
     - 0x10C
     - R/W
     - 0x0000_0000
     - PORTD唤醒使能控制寄存器

   * - PAWKSR
     - 0x130
     - R/W1C
     - 0x0000_0000
     - PORTA唤醒状态寄存器

   * - PBWKSR
     - 0x134
     - R/W1C
     - 0x0000_0000
     - PORTB唤醒状态寄存器

   * - PCWKSR
     - 0x138
     - R/W1C
     - 0x0000_0000
     - PORTC唤醒状态寄存器

   * - PDWKSR
     - 0x13C
     - R/W1C
     - 0x0000_0000
     - PORTD唤醒状态寄存器

   * - PRSTEN
     - 0x720
     - R/W
     - 0x0000_0000
     - 芯片复位屏蔽寄存器

   * - PRSTR1
     - 0x724
     - R/W
     - 0x0000_0000
     - 芯片复位配置寄存器1

   * - PRSTR2
     - 0x728
     - R/W
     - 0x0000_0000
     - 芯片复位配置寄存器2

   * - ANACON
     - BASE：0x400AA000
     -
     -
     -


   * - HRCCR
     - 0x00
     - R/W
     - 0x0000_0001
     - 内部高频RC振荡器配置寄存器

   * - BODCR
     - 0x10
     - R/W
     - 0x0000_0000
     - BOD控制寄存器

   * - BODSR
     - 0x14
     - R/W1C
     - 0x0000_0000
     - BOD中断状态寄存器

   * - XTALCR
     - 0x20
     - R/W
     - 0x0000_0000
     - 晶体振荡器控制寄存器

   * - XTALSR
     - 0x24
     - R/W1C
     - 0x0000_0000
     - 晶体振荡器状态寄存器

   * - LRCCR
     - 0x50
     - R/W
     - 0x0000_0001
     - 芯片内部低频RC配置寄存器


寄存器描述
~~~~~~~~~~

时钟选择控制寄存器CLKSEL
^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CLKSEL
     - 0x00
     - R/W
     - 0x00cc2801
     - 时钟选择控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -


   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     - ADCDIV
     - ADCDIV
     - -
     - ADC

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - RTCTRM
     - RTCTRM
     - WDT
     - WDT
     -
     - -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     - RTC
     - CLK
     - CLK
     - CLK
     - CLK_DIVX
     - SYS


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:25
     - -
     - -

   * - 24
     - WKUP
     - SLEEP唤醒时钟选择

       1：片外低频晶体振荡器（32.768KHz）

       0：内部低频RC振荡器（32KHz）

   * - 23:20
     - -
     - -

   * - 19:18
     - ADCDIV
     - SARADC采样时钟选择，对所有SARADC均有效

       0x：时钟源1分频

       10：时钟源4分频

       11：时钟源8分频

       注：SARADC采样时钟在进行不同源选择时，将SARADC时钟使能关闭，再进行时钟源切换。

   * - 17:16
     - ADC
     - SARADC时钟源选择，对所有SARADC均有效

       01：片外高频晶体振荡器（2~32MHz）

       00：片内高频RC振荡器（48MHz）

       其他：保留

   * - 15:14
     - RTCTRM
     - RTC TRIM参考时钟选择

       11：XTAL/8

       10：XTAL/4

       01：XTAL/2

       00：片外高频晶体振荡器（XTAL）

   * - 13:12
     - WDT
     - WDT计数时钟选择

       10：片内低频RC振荡器（32KHz）

       其他：保留

   * - 11:6
     - -
     - -

   * - 5
     - RTC
     - 32K时钟选择

       1：片外低频晶体振荡器（32.768KHz）

       0：内部低频RC振荡器（32KHz）

   * - 4:2
     - CLK
     - CLK时钟选择

       1xx：片内高频RC振荡器（HRC：48MHz）

       011：片外高频晶体振荡器（XTAL：2~32MHz）


       ：片外低频晶体振荡器（XTAL_32K：32.768KHz）

       001：保留

       000：片内低频RC振荡器（LRC：32KHz）

   * - 1
     - CLK_DIVX
     - CLK分频选择

       1：CLK/8分频

       0：CLK

   * - 0
     - SYS
     - 系统时钟选择

       1：HRC（48MHz）

       0：CLK

       注：更改CLK或CLK_DIVX设置时  将此位先切换为1，再进行时钟源或分频切换  |


源时钟选择控制寄存器CLKDIVX_ON
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CLKDIVX_ON
     - 0x04
     - R/W
     - 0x00
     - 源时钟控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -



   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * -
     -
     -
     -
     - -
     -
     -
     -


   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * -
     -
     -
     -
     - -
     -
     -
     -


   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * -
     -
     -
     -
     -
     -
     -
     - CLKDIVX_ON


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:1
     - -
     - -

   * - 0
     - CLKDIV_ON
     - DIVCLK时钟门控

       1：关闭

       0：打开

       注：更改DIV时，需保证此位为1，在关闭状态下进行更改


       系统时钟选择不同时钟切换时，若需要在SRCDIVCLK或SRCCLK内部时钟源之间进行切换，则系统时钟需要先切换回HRC，然后将该位置为1后再进行切换。 |


       3：若系统时钟已选择了HRC作为时钟源，并需要 | RC频率时，系统时钟需要先切至其他时钟源，  | 改变HRC频率，最后再将系统时钟切换回HRC。 |


时钟门控控制寄存器0 CLKEN0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CLKEN0
     - 0x08
     - R/W
     - 0x00
     - 时钟门控控制寄存器0


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SLED
     - -
     - SLCD
     - CAN
     -
     - SDADC0
     - ANAC
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - DIV
     - -
     - CRC
     - -
     - -
     - I2C1

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - I2C0
     - SPI1
     - SPI0
     - PWM
     - TIMER
     - WDT
     - UART3
     - UART2

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - UART1
     - UART0
     - -
     - -
     - GPIOD
     - GPIOC
     - GPIOB
     - GPIOA


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31
     - SLED
     - SLED时钟使能

   * - 30
     - -
     - -

   * - 29
     - SLCD
     - SLCD模块时钟使能

   * - 28
     - CAN
     - CAN模块时钟使能

   * - 27
     - -
     - -

   * - 26
     - ADC
     - SARADC数字控制时钟使能

   * - 25
     - ANAC
     - ANACON时钟使能

       注：包括HRC/BOD/XTAL/LRC/OPA/CMP时钟使能

   * - 24:22
     - -
     - -

   * - 21
     - DIV
     - DIVIDER时钟使能

   * - 20
     - -
     - -

   * - 19
     - CRC
     - CRC时钟使能

   * - 18:17
     - -
     - -

   * - 16
     - I2C1
     - I2C1时钟使能

   * - 15
     - I2C0
     - I2C0时钟使能

   * - 14
     - SPI1
     - SPI1时钟使能

   * - 13
     - SPI0
     - SPI0时钟使能

   * - 12
     - PWM
     - PWM时钟使能

   * - 11
     - TIMER
     - TIMER时钟使能

   * - 10
     - WDT
     - WDT时钟使能

   * - 9
     - UART3
     - UART3时钟使能

   * - 8
     - UART2
     - UART2时钟使能

   * - 7
     - UART1
     - UART1时钟使能

   * - 6
     - UART0
     - UART0时钟使能

   * - 5:4
     - -
     - -

   * - 3
     - GPIOD
     - GPIOD时钟使能

   * - 2
     - GPIOC
     - GPIOC时钟使能

   * - 1
     - GPIOB
     - GPIOB时钟使能

   * - 0
     - GPIOA
     - GPIOA时钟使能


时钟门控控制寄存器1 CLKEN1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CLKEN1
     - 0x0C
     - R/W
     - 0x00
     - 时钟门控控制寄存器1


.. list-table::
   :widths: 13 13 13 13 13 13 13 13
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - -
     - -
     - RTC
     - -
     - -
     - -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -


.. list-table::
   :widths: 34 34 34
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:20
     - -
     - -

   * - 19
     - RTC
     - RTC时钟使能

   * - 18:0
     - -
     - -


系统模式控制寄存器SLEEP
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SLEEP
     - 0x10
     - R/W
     - 0x00
     - 系统模式控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - SLEEP


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:1
     - -
     - -

   * - 0
     - SLEEP
     - 将该位置1后，系统将进入SLEEP模式


芯片复位状态寄存器RSTSR
^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RSTSR
     - 0x024
     - R/W1C
     - 0x00
     - 芯片复位状态寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - -
     - -
     - IAA
     - -
     - -
     - WDT
     - POR


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:5
     - -
     - -

   * - 4
     - IAA
     - 非法地址访问复位状态标志寄存器

       1：表示出现非法地址访问复位

       写1清零

   * - 3:2
     - -
     - -

   * - 1
     - WDT
     - WDT复位状态标志寄存器，写1清零

       1：出现WDT复位

       0：未出现WDT复位

   * - 0
     - POR
     - POR复位状态标志寄存器，写1清零

       1：出现POR复位

       0：未出现POR复位


RTC唤醒使能控制寄存器RTCWKCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RTCWKCR
     - 0x30
     - R/W
     - 0x00
     - RTC唤醒使能控制寄存器


.. list-table::
   :widths: 13 13 13 13 13 13 13 13
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:1
     - -
     - -

   * - 0
     - EN
     - 基本RTC唤醒使能寄存器

       1：使能基本RTC唤醒功能

       0：禁止基本RTC唤醒功能


RTC唤醒标志寄存器RTCWKSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RTCWKSR
     - 0x34
     - R/W1C
     - 0x00
     - RTC唤醒标志寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16


   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -


   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - FLAG


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:1
     - -
     - -

   * - 0
     - FLAG
     - 基本RTC唤醒标志，写1清除

       0：未产生唤醒标志

       1：已产生唤醒标志


芯片128位ID寄存器0CHIP_ID0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CHIP_ID0
     - 0x80
     - RO
     - —
     - 芯片128位ID寄存器0


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0
     - ID0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:0
     - ID0
     - 芯片128位ID寄存器0


芯片128位ID寄存器1CHIP_ID1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CHIP_ID1
     - 0x84
     - RO
     - —
     - 芯片128位ID寄存器1


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1
     - ID1


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:0
     - ID1
     - 芯片128位ID寄存器1


芯片128位ID寄存器2CHIP_ID2
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0

   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CHIP_ID2
     - 0x88
     - RO
     - —
     - 芯片128位ID寄存器2


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2
     - ID2


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:0
     - ID2
     - 芯片128位ID寄存器2


芯片128位ID寄存器3CHIP_ID3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CHIP_ID3
     - 0x8C
     - RO
     - —
     - 芯片128位ID寄存器3         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3
     - ID3


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:0
     - ID3
     - 芯片128位ID寄存器3


**伪随机数控制寄存器PRNGCR**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRNGCR
     - 0x0d0
     - R/W
     - 0x00
     - 伪随机数控制寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - RDY

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - -
     - -
     - -
     - -
     - CLK
     - CLK
     - SEEDCLR


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:9
     - -
     - -

   * - 8
     - RDY
     - PRNG随机数准备标志，RO

       当检测到该信号为1时，则可以读取PRNG_DATAL和PRNG_DATAH，并且每次需要将PRNG_DATAL和PRNG_DATAH两个寄存器一并读出。

   * - 7:3
     - -
     - -

   * - 2:1
     - CLK
     - PRNG随机数发生器时钟配置

       Bit1：为0时，所有时钟无效；为1时，正常工作

       Bit0：为0时，三个时钟工作模式（HRC、LRC、XTAL）；为1时，两个时钟工作模式（HRC、LRC）

   * - 0
     - SEEDCLR
     - PRNG种子清零寄存器

       1：种子清零。此时随机数发生器不工作

       0：随机数发生器工作

       注：该信号如果有效，则其为高的时间不能短于LRC一个周期。


伪随机数输出寄存器低32位数据PRNGDL
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRNGDL
     - 0x0d4
     - RO
     - 0x00
     - 伪随机数输出寄存器低32位数据


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL
     - DATAL


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:0
     - DATAL
     - 随机数输出寄存器低32位数据


伪随机数输出寄存器高32位数据PRNGDH
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRNGDH
     - 0x0d8
     - R/W
     - 0x00
     - 伪随机数输出寄存器高32位数据


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH
     - DADAH


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31
     - -
     - -

   * - 30:0
     - DATAH
     - 随机数输出寄存器高31位数据


PORTA唤醒使能控制寄存器PAWKEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PAWKEN
     - 0x100
     - R/W
     - 0x00
     - PORTA唤醒使能控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PAWKEN15
     - PAWKEN14
     - PAWKEN13
     - PAWKEN12
     - PAWKEN1
     - PAWKEN10
     - PAWKEN9
     - PAWKEN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PAWKEN7
     - PAWKEN6
     - PAWKEN5
     - PAWKEN4
     - PAWKEN3
     - PAWKEN2
     - PAWKEN1
     - PAWKEN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:16
     - -
     - -

   * - 15
     - PAWKEN15
     - PA15输入唤醒使能

       1：使能 0：禁能

   * - 14
     - PAWKEN14
     - PA14输入唤醒使能

       1：使能 0：禁能

   * - 13
     - PAWKEN13
     - PA13输入唤醒使能

       1：使能 0：禁能

   * - 12
     - PAWKEN12
     - PA12输入唤醒使能

       1：使能 0：禁能

   * - 11
     - PAWKEN11
     - PA11输入唤醒使能

       1：使能 0：禁能

   * - 10
     - PAWKEN10
     - PA10输入唤醒使能

       1：使能 0：禁能

   * - 9
     - PAWKEN9
     - PA9输入唤醒使能

       1：使能 0：禁能

   * - 8
     - PAWKEN8
     - PA8输入唤醒使能

       1：使能 0：禁能

   * - 7
     - PAWKEN7
     - PA7输入唤醒使能

       1：使能 0：禁能

   * - 6
     - PAWKEN6
     - PA6输入唤醒使能

       1：使能 0：禁能

   * - 5
     - PAWKEN5
     - PA5输入唤醒使能

       1：使能 0：禁能

   * - 4
     - PAWKEN4
     - PA4输入唤醒使能

       1：使能 0：禁能

   * - 3
     - PAWKEN3
     - PA3输入唤醒使能

       1：使能 0：禁能

   * - 2
     - PAWKEN2
     - PA2输入唤醒使能

       1：使能 0：禁能

   * - 1
     - PAWKEN1
     - PA1输入唤醒使能

       1：使能 0：禁能

   * - 0
     - PAWKEN0
     - PA0输入唤醒使能

       1：使能 0：禁能


PORTB唤醒使能控制寄存器PBWKEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PBWKEN
     - 0x104
     - R/W
     - 0x00
     - PORTB唤醒使能控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - PB N9
     - P EN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PBWKEN7
     - PBWKEN6
     - PPBWKEN5
     - PBWKEN4
     - PBWKEN3
     - PBWKEN2
     - PBWKEN1
     - PBWKEN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:10
     - -
     - -

   * - 9
     - PBWKEN9
     - PB9输入唤醒使能

       1：使能 0：禁能

   * - 8
     - PBWKEN8
     - PB8输入唤醒使能

       1：使能 0：禁能

   * - 7
     - PBWKEN7
     - PB7输入唤醒使能

       1：使能 0：禁能

   * - 6
     - PBWKEN6
     - PB6输入唤醒使能

       1：使能 0：禁能

   * - 5
     - PBWKEN5
     - PB5输入唤醒使能

       1：使能 0：禁能

   * - 4
     - PBWKEN4
     - PB4输入唤醒使能

       1：使能 0：禁能

   * - 3
     - PBWKEN3
     - PB3输入唤醒使能

       1：使能 0：禁能

   * - 2
     - PBWKEN2
     - PB2输入唤醒使能

       1：使能 0：禁能

   * - 1
     - PBWKEN1
     - PB1输入唤醒使能

       1：使能 0：禁能

   * - 0
     - PBWKEN0
     - PB0输入唤醒使能

       1：使能 0：禁能


PORTC唤醒使能控制寄存器PCWKEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PCWKEN
     - 0x108
     - R/W
     - 0x00
     - PORTC唤醒使能控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - PCWKEN3
     - PCWKEN2
     - PCWKEN1
     - PCWKEN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:4
     - -
     - -

   * - 3
     - PCWKEN3
     - PC3输入唤醒使能

       1：使能 0：禁能

   * - 2
     - PCWKEN2
     - PC2输入唤醒使能

       1：使能 0：禁能

   * - 1
     - PCWKEN1
     - PC1输入唤醒使能

       1：使能 0：禁能

   * - 0
     - PCWKEN0
     - PC0输入唤醒使能

       1：使能 0：禁能


PORTD唤醒使能控制寄存器PDWKEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PDWKEN
     - 0x10C
     - R/W
     - 0x00
     - PORTD唤醒使能控制寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - PDWKEN9
     - PDWKEN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PDWKEN7
     - PDWKEN6
     - PDWKEN5
     - PDWKEN4
     - PDWKEN3
     - PDWKEN2
     - PDWKEN1
     - PDWKEN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:10
     - -
     - -

   * - 9
     - PDWKEN9
     - PD9输入唤醒使能

       1：使能 0：禁能

   * - 8
     - PDWKEN8
     - PD8输入唤醒使能

       1：使能 0：禁能

   * - 7
     - PDWKEN7
     - PD7输入唤醒使能

       1：使能 0：禁能

   * - 6
     - PDWKEN6
     - PD6输入唤醒使能

       1：使能 0：禁能

   * - 5
     - PDWKEN5
     - PD5输入唤醒使能

       1：使能 0：禁能

   * - 4
     - PDWKEN4
     - PD4输入唤醒使能

       1：使能 0：禁能

   * - 3
     - PDWKEN3
     - PD3输入唤醒使能

       1：使能 0：禁能

   * - 2
     - PDWKEN2
     - PD2输入唤醒使能

       1：使能 0：禁能

   * - 1
     - PDWKEN1
     - PD1输入唤醒使能

       1：使能 0：禁能

   * - 0
     - PDWKEN0
     - PD0输入唤醒使能

       1：使能 0：禁能


PORTA唤醒状态寄存器PAWKSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PAWKSR
     - 0x130
     - R/W1C
     - 0x00
     - PORTA唤醒状态寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PAWKSR15
     - PAWKSR14
     - PAWKSR13
     - PAWKSR12
     - PAWKSR11
     - PAWKSR10
     - PAWKSR9
     - PAWKSR8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PAWKSR7
     - PAWKSR6
     - PAWKSR5
     - PAWKSR4
     - PAWKSR3
     - PAWKSR2
     - PAWKSR1
     - PAWKSR0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:16
     - -
     - -

   * - 15
     - PAWKSR15
     - PA15输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 14
     - PAWKSR14
     - PA14输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 13
     - PAWKSR13
     - PA13输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 12
     - PAWKSR12
     - PA12输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 11
     - PAWKSR11
     - PA11输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 10
     - PAWKSR10
     - PA10输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 9
     - PAWKSR9
     - PA9输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 8
     - PAWKSR8
     - PA8输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 7
     - PAWKSR7
     - PA7输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 6
     - PAWKSR6
     - PA6输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 5
     - PAWKSR5
     - PA5输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 4
     - PAWKSR4
     - PA4输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 3
     - PAWKSR3
     - PA3输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 2
     - PAWKSR2
     - PA2输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 1
     - PAWKSR1
     - PA1输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒

   * - 0
     - PAWKSR0
     - PA0输入唤醒状态标志位

       唤醒后硬件置1，软件写1清除

       1：唤醒 0：未唤醒


PORTB唤醒状态寄存器PBWKSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PBWKSR
     - 0x134
     -
     - 0x00
     - PORTB唤醒状态寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - PB R9
     - P SR8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PBWKSR7
     - P BWKSR6
     - P SR5
     - P SR4
     - PB R3
     - P SR2
     - PB R1
     - P SR0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - PBWKSR9
     - PB9输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 8
     - PBWKSR8
     - PB8输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 7
     - PBWKSR7
     - PB7输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 6
     - PBWKSR6
     - PB6输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 5
     - PBWKSR5
     - PB5输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 4
     - PBWKSR4
     - PB4输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 3
     - PBWKSR3
     - PB3输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 2
     - PBWKSR2
     - PB2输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 1
     - PBWKSR1
     - PB1输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 0
     - PBWKSR0
     - PB0输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |


PORTC唤醒状态寄存器PCWKSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PCWKSR
     - 0x138
     -
     - 0x00
     - PORTC唤醒状态寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - P SR3
     - P SR2
     - P SR1
     - P SR0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - PCWKSR3
     - PC3输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 2
     - PCWKSR2
     - PC2输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 1
     - PCWKSR1
     - PC1输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 0
     - PCWKSR0
     - PC0输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |


PORTD唤醒状态寄存器PDWKSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PDWKSR
     - 0x13C
     -
     - 0x00
     - PORTD唤醒状态寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - P SR9
     - P SR8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PDWKSR7
     - PD WKSR6
     - P SR5
     - P SR4
     - P SR3
     - P SR2
     - P SR1
     - P SR0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - PDWKSR9
     - PD9输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 8
     - PDWKSR8
     - PD8输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 7
     - PDWKSR7
     - PD7输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 6
     - PDWKSR6
     - PD6输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 5
     - PDWKSR5
     - PD5输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 4
     - PDWKSR4
     - PD4输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 3
     - PDWKSR3
     - PD3输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 2
     - PDWKSR2
     - PD2输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 1
     - PDWKSR1
     - PD1输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |

   * - 0
     - PDWKSR0
     - PD0输入唤醒状态标志位                       |

       唤醒后硬件置1，软件写1清除                  |

       1：唤醒 0：未唤醒                           |


芯片复位屏蔽寄存器PRSTEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRSTEN
     - 0x720
     -
     - 0x 0_0000
     - 芯片复位屏蔽寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PRSTEN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - PRSTEN
     - 只有当该寄存器                              | 0x55时，才能对PRSTR1和PRSTR2进行写操作。 |


芯片复位配置寄存器1 PRSTR1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRSTR1
     - 0x724
     -
     - 0x 0_0000
     - 芯片复位配置寄存器1        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SLED
     - -
     -
     - CAN
     - -
     - S DC0
     - -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     - DIV
     - -
     - CRC
     - -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - I2C0
     - SPI1
     -
     - PWM
     -
     - WDT
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - UART1
     - UART0
     - -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31
     - SLED
     - SLED模块复位配置位                          |

       将该位置1，则复位该模块。                   |

   * - 30
     - -
     - -

   * - 29
     - SLCD
     -

   * - 28
     - CAN
     - CAN模块复位配置位                           |

   * - 27
     - -
     - -

   * - 26
     - SARADC0
     - SARADC0模块数字部分复位配置位               |

       将该位置1，则复位该模块。                   |

   * - 25
     - -
     - \*保留\*                                    |

       该位必须置0                                 |

   * - 14:24
     - -
     - -

   * - 21
     - DIV
     - DIV模块复位配置位                           |

       将该位置1，则复位该模块。                   |

   * - 20
     - -
     - -

   * - 19
     - CRC
     - CRC模块复位配置位                           |

       将该位置1，则复位该模块。                   |

   * - 18:17
     - -
     - -

   * - 16
     - I2C1
     - I2C1模块复位配置位                          |

       将该位置1，则复位该模块。                   |

   * - 15
     - I2C0
     - I2C0模块复位配置位                          |

       将该位置1，则复位该模块。                   |

   * - 14
     - SPI1
     - SPI1模块复位配置位                          |

       将该位置1，则复位该模块。                   |

   * - 13
     - SPI0
     - SPI0模块复位配置位                          |

       将该位置1，则复位该模块。                   |

   * - 12
     - PWM
     - PWM模块复位配置位                           |

       将该位置1，则复位该模块。                   |

   * - 11
     - TIMER
     - TIMER模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 10
     - WDT
     - WDT模块复位配置位                           |

       将该位置1，则复位该模块。                   |

   * - 9
     - UART3
     - UART3模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 8
     - UART2
     - UART2模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 7
     - UART1
     - UART1模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 6
     - UART0
     - UART0模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 5:4
     - -
     - -

   * - 3
     - GPIOD
     - GPIOD模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 2
     - GPIOC
     - GPIOC模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 1
     - GPIOB
     - GPIOB模块复位配置位                         |

       将该位置1，则复位该模块。                   |

   * - 0
     - GPIOA
     - GPIOA模块复位配置位                         |

       将该位置1，则复位该模块。                   |


芯片复位配置寄存器2 PRSTR2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRSTR2
     - 0x728
     -
     - 0x 0_0000
     - 芯片复位配置寄存器2        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     - RTC
     - -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:20
     - -
     - -

   * - 19
     - RTC
     - RTC_BASE模块复位配置位                      |

       将该位置1，则复位该模块。                   |

   * - 18:0
     - -
     - -


内部高频RC振荡器配置寄存器HRCCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HRCCR
     - 0x00
     -
     - 0x1
     - 内部高频RC振荡器配置寄存器 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - ON


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 0
     - ON
     - 内部高频RC振荡器使能                        |

       0：关闭                                     |

       1：开启                                     |


BOD控制寄存器BODCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BODCR
     - 0x10
     -
     - 0
     - BOD控制寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - RSTLVL
     - INTLVL
     -
     -
     - -
     -
     - IE
     - -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:7
     - -
     - -

   * - 9:7
     - RSTLVL
     - BOD复位电位配置寄存器                       |

       000: BOD 1.7V产生复位                       |

       001: BOD 1.9V产生复位                       |

       010: BOD 2.1V产生复位                       |

       011: BOD 2.7V产生复位                       |

       100: BOD 3.5V产生复位                       |

   * - 6:4
     - INTLVL
     - BOD中断电位配置寄存器                       |

       000: BOD 1.9V产生中断                       |

       001: BOD 2.1V产生中断                       |

       010: BOD 2.3V产生中断                       |

       011: BOD 2.5V产生中断                       |

       100: BOD 2.7V产生中断                       |

       101: BOD 3.5V产生中断                       |

       110: BOD 4.1V产生中断                       |

   * - 3:2
     - -
     - -

   * - 1
     - IE
     - BOD中断功能使能寄存器                       |

       1：使能                                     |

       0：关闭                                     |

   * - 0
     - -
     - -


BOD中断状态寄存器BODSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BODSR
     - 0x14
     -
     - 0
     - BOD中断状态寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - IF


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - IF
     - BOD中断状态标志位，写1清除                  |

       1：已触发中断电压                           |

       0：未触发中断电压                           |

       注：只有当BODCR.IE=1时，BODSR.IF才会置位    |


晶体振荡器控制寄存器XTALCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - XTALCR
     - 0x20
     -
     - 0
     - 晶体振荡器控制寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     - DRV
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     - DET
     -
     - -
     -
     - ON
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:21
     - -
     - -

   * - 20:16
     - DRV
     - 高频晶体振荡器驱动能力控制信号              |

       每bit位控制的驱动能力一样，将该寄存器配置   | it为1，则表示有几倍的驱动能力，可微调频率 |

   * - 15:12
     - -
     - -

   * - 11:8
     - 32KDRV
     - 32K低频晶振偏置电流控制信号，32K            | 驱动能力，可微调频率                        |

   * - 7:6
     - -
     - -

   * - 5
     - DET
     - 外接高频晶振停振检测                        |

       0：关闭                                     |

       1：开启                                     |

   * - 4
     - 32KDET
     - 外接低频晶振停振检测                        |

       0：关闭                                     |

       1：开启                                     |

   * - 3:2
     - -
     - -

   * - 1
     - ON
     - 外接高频晶振使能                            |

       0：关闭                                     |

       1：开启                                     |

   * - 0
     - 32KON
     - 外接低频晶振使能                            |

       0：关闭                                     |

       1：开启                                     |


晶体振荡器状态寄存器XTALSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - XTALSR
     - 0x24
     -
     - 0
     - 晶体振荡器状态寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - 3 TOP


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - STOP
     - 外接高频晶振状态，写1清0                    |

       0：正常                                     |

       1：停振，发生停震后将自动切换至HRC          |

   * - 0
     - 32KSTOP
     - 外接低频晶振状态，写1清0                    |

       0：正常                                     |

       1：停振                                     |


内部低频RC配置寄存器LRCCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - LRCCR
     - 0x50
     -
     - 0x 0_0001
     - 内部低频RC配置寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - ON


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - ON
     - 内置低频RC使能                              |

       0：关闭                                     |

       1：开启                                     |


PORTCON
----------

.. _概述-2:

概述
~~~~~~~~~~~~

端口控制模块主要包括管脚输入使能，管脚功能配置，I/O上拉、下拉、开漏配置。SWM241系列所有型号PORTCON模块操作均相同，部分型号无对应管脚时，对应寄存器位无效。

.. _特性-2:

特性
~~~~~~~~~~~~

-  配置I/O引脚为特定功能

-  支持上拉/下拉/推挽/开漏功能

-  配置管脚输入使能

.. _模块结构框图-1:

模块结构框图
~~~~~~~~~~~~~

|Featur004|

图 6‑3 PORTCON模块结构框图

.. _功能描述-3:

功能描述
~~~~~~~~~

端口控制模块主要包括管脚输入使能，管脚功能配置，I/O上拉、下拉、开漏配置。SWM241系列所有型号PORTCON模块操作均相同，部分型号无对应管脚时，对应寄存器位无效。

引脚输入使能
^^^^^^^^^^^^^^

本芯片引脚作为输入或需要输入的外设时，需要打开引脚对应输入使能寄存器（INEN_x），当引脚所在寄存器对应位设置为1时，输入使能打开，引脚可获取外部状态。

功能选择配置
^^^^^^^^^^^^

端口复用通过端口复用寄存器PORTx_SEL寄存器实现。当指定位配置为对应值时，引脚功能实现切换。

每个端口可能具备以下功能：

-  通用输入输出接口：引脚作为通用输入输出功能，输入或输出指定数字电平

-  外设接口：将对应引脚切换至指定数字功能，如TIMER/UART/PWM等

-  模拟接口：将对应引脚切换至模拟功能，如模数转换器、时钟输入等

-  下载接口：使用仿真器连接下载程序及单步执行

配置示意图如图 6‑4所示。

|Featur005|

图 6‑4 引脚配置示意图

上拉/下拉/推挽/开漏配置
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

本芯片每个引脚均可配置为以下模式：

-  上拉输入

-  下拉输入

-  推挽输出

-  开漏输出

当对应引脚作为除GPIO之外的功能引脚时，此配置同样生效。

作为输入功能使用时，GPIO DIR寄存器对应位为0，该状态为上电默认状态。此时可以开启内部上拉和下拉功能，通过配置PULLU及PULLD寄存器实现，将引脚所对应寄存器指定位配置为1，即可实现该功能。如图 6‑5所示：

|Featur006|

图 6‑5 IO输入上拉下拉

作为输出功能使用时，GPIO DIR寄存器对应位为1，此时可配置引脚状态为推挽输出或开漏输出,，通过配置OPEND寄存器实现。

作为推挽输出时，GPIO OPEND寄存器对应位为0，芯片具备拉/灌电流的能力，GPIO DATA寄存器配置值将反映到对应引脚电平。如图 6‑6所示：

|Featur007|

图 6‑6 推挽输出

作为开漏输出时，GPIO OPEND寄存器对应位为1，芯片只具备灌电流的能力，不具备拉电流能力。GPIO输出配置为0时，对应引脚将输出0，配置为1时，输出高阻。若需要输出1时，需要将外部引脚接上拉电阻，通过外部上拉实现高电平输出。示意图如图 6‑7所示：

|Featur008|

图 6‑7 开漏输出

.. _寄存器映射-1:

寄存器映射
~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称
     -  偏移
     -
     -
     - 描述

   * - POTRGBASE：0 |x400A0000
     - |
     -
     -
     -

   * - PORTA_FUNC0
     - 0x00
     -
     - 0x00
     - 端口A功能配置寄存器0       |

   * - PORTA_FUNC1
     - 0x04
     -
     - 0x00
     - 端口A功能配置寄存器1       |

   * - PORTB_FUNC0
     - 0x10
     -
     - 0x00
     - 端口B功能配置寄存器0       |

   * - PORTB_FUNC1
     - 0x14
     -
     - 0x00
     - 端口B功能配置寄存器1       |

   * - PORTC_FUNC0
     - 0x20
     -
     - 0x00
     - 端口C功能配置寄存器0       |

   * - PORTD_FUNC0
     - 0x30
     -
     - 0x00
     - 端口D功能配置寄存器0       |

   * - PORTD_FUNC1
     - 0x34
     -
     - 0x00
     - 端口D功能配置寄存器1       |

   * - PORTnBASE：0 |x400A0100
     - |
     -
     -
     -

   * - PULLU_A
     - 0x00
     -
     - 0x00
     - 端口A上拉使能控制寄存器    |

   * - PULLU_B
     - 0x10
     -
     - 0x00
     - 端口B上拉使能控制寄存器    |

   * - PULLU_C
     - 0x20
     -
     - 0x00
     - 端口C上拉使能控制寄存器    |

   * - PULLU_D
     - 0x30
     -
     - 0x00
     - 端口D上拉使能控制寄存器    |

   * - PULLD_A
     - 0x100
     -
     - 0x00
     - 端口A下拉使能控制寄存器    |

   * - PULLD_B
     - 0x110
     -
     - 0x00
     - 端口B下拉使能控制寄存器    |

   * - PULLD_C
     - 0x120
     -
     - 0x00
     - 端口C下拉使能控制寄存器    |

   * - PULLD_D
     - 0x130
     -
     - 0x00
     - 端口D下拉使能控制寄存器    |

   * - INEN_A
     - 0x200
     -
     - 0x0 \__20
     - 端口A输入使能控制寄存器    |

   * - INEN_B
     - 0x210
     -
     - 0x00
     - 端口B输入使能控制寄存器    |

   * - INEN_C
     - 0x220
     -
     - 0x00
     - 端口C输入使能控制寄存器    |

   * - INEN_D
     - 0x230
     -
     - 0x0 _0001
     - 端口D输入使能控制寄存器    |

   * - OPEND_A
     - 0x300
     -
     - 0x0 _0c20
     - 端口A开漏使能控制寄存器    |

   * - OPEND_B
     - 0x310
     -
     - 0x00
     - 端口B开漏使能控制寄存器    |

   * - OPEND_C
     - 0x320
     -
     - 0x00
     - 端口C开漏使能控制寄存器    |

   * - OPEND_D
     - 0x330
     -
     - 0x00
     - 端口D开漏使能控制寄存器    |


.. _寄存器描述-1:

寄存器描述
~~~~~~~~~~

PORTA_FUNC0
^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTA_FUNC0
     - 0x00
     -
     - 0x00
     - 端口A功能配置寄存器0       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - PIN7
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - PIN5
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN1
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - PIN7
     - Port A7功能选择                             |

       0000：GPIO_A7/ADC0_CH7                      |

       0001：SPI1SSEL                              |

       0010：UART2RTS                              |

       0011：LEDSEG12                              |

       1111：LCD_SEG9                              |

       其它：保留                                  |

       注：使用ADC功能时需要同时使能输入           |

   * - 27:24
     - PIN6
     - Port A6功能选择                             |

       0000：GPIO_A6                               |

       0001：PWM_CLK0                              |

       1111：LCD_SEG20                             |

       其它：保留                                  |

   * - 23:20
     - PIN5
     - Port A5功能选择                             |

       0000：GPIO_A5                               |

       0001：UART0RX                               |

       0010：UART0TX                               |

       0011：PWM0BN                                |

       其它：保留                                  |

   * - 19:16
     - PIN4
     - Port A4功能选择                             |

       0000：GPIO_A4                               |

       0001：UART0TX                               |

       0010：PWM1AN                                |

       0011：T7I                                   |

       0100：T7O                                   |

       1111：LCD_SEG19                             |

       其它：保留                                  |

   * - 15:12
     - PIN3
     - Port A3功能选择                             |

       0000：GPIO_A3                               |

       0001：I2C0SCL                               |

       0010：SPI1SSEL                              |

       0011：PWM1A                                 |

       0100：T2I                                   |

       0101：T2O                                   |

       0110：LEDSEG11                              |

       1111：LCD_SEG18/ADC0_CH11                   |

       其它：保留                                  |

   * - 11:8
     - PIN2
     - Port A2功能选择                             |

       0000：GPIO_A2                               |

       0001：I2C1SDA                               |

       0010：SPI0MISO                              |

       0011：UART2TX                               |

       0100：LEDCOM6                               |

       其它：保留                                  |

   * - 7:4
     - PIN1
     - Port A1功能选择                             |

       0000：GPIO_A1                               |

       0001：I2C1SCL                               |

       0010：SPI0CLK                               |

       0011：PWMBRK1                               |

       0100：LEDCOM5                               |

       其它：保留                                  |

   * - 3:0
     - PIN0
     - Port A0功能选择                             |

       0000：GPIO_A0                               |

       0001：SPI0SSN                               |

       0010：UART1RX                               |

       0011：HALL2                                 |

       0100：LEDCOM4                               |

       其它：保留                                  |


PORTA_FUNC1
^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTA_FUNC1
     - 0x04
     -
     - 0x00
     - 端口A功能配置寄存器1       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - PIN15
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - PIN13
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN11
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN9
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - PIN15
     - Port A15功能选择                            |

       0000：GPIO_A15                              |

       0001：PWM3BN                                |

       其它：保留                                  |

   * - 27:24
     - PIN14
     - Port A14功能选择                            |

       0000：GPIO_A14                              |

       0001：SPI0CLK                               |

       0010：PWM3AN                                |

       1111：ADC0_CH0                              |

       其它：保留                                  |

   * - 23:20
     - PIN13
     - Port A13功能选择                            |

       0000：GPIO_A13                              |

       0001：PWM3B                                 |

       1111：ADC0_CH1                              |

       其它：保留                                  |

   * - 19:16
     - PIN12
     - Port A12功能选择                            |

       0000：GPIO_A12                              |

       0001：T6I                                   |

       0010：T6O                                   |

       1111：LCD_SEG14/ADC0_CH2                    |

       其它：保留                                  |

   * - 15:12
     - PIN11
     - Port A11功能选择                            |

       0000：GPIO_A11                              |

       0001：SWDIO                                 |

       0010：PWM3A                                 |

       0011：LEDSEG16                              |

       1111：LCD_SEG13/ADC0_CH3                    |

       其它：保留                                  |

   * - 11:8
     - PIN10
     - Port A10功能选择                            |

       0000：GPIO_A10                              |

       0001：SWCLK                                 |

       0010：T7I                                   |

       0011：T7O                                   |

       0100：LEDSEG15                              |

       1111：LCD_SEG12/ADC0_CH4                    |

       其它：保留                                  |

   * - 7:4
     - PIN9
     - Port A9功能选择                             |

       0000：GPIO_A9                               |

       0001：PWM0B                                 |

       0010：LEDSEG14                              |

       1111：LCD_SEG11/ADC0_CH5                    |

       其它：保留                                  |

   * - 3:0
     - PIN8
     - Port A8功能选择                             |

       0000：GPIO_A8                               |

       0001：UART2CTS                              |

       0010：LEDSEG13                              |

       1111：LCD_SEG10/ADC0_CH6                    |

       其它：保留                                  |


PORTB_FUNC0
^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTB_FUNC0
     - 0x10
     -
     - 0x00
     - 端口B功能配置寄存器0       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - PIN7
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - PIN5
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN1
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - PIN7
     - Port B7功能选择                             |

       0000：GPIO_B7                               |

       0001：I2C1SCL                               |

       0010：SPI1SCLK                              |

       0011：T7I                                   |

       0100：T7O                                   |

       0101：LEDSEG6                               |

       1111：LCD_SEG6                              |

       其它：保留                                  |

   * - 27:24
     - PIN6
     - Port B6功能选择                             |

       0000：GPIO_B6                               |

       0001：保留                                  |

       0010：I2C1SDA                               |

       0011：SPI1MISO                              |

       0100：UART3RX                               |

       0101：T6I                                   |

       0110：T6O                                   |

       0111：LEDSEG5                               |

       1111：LCD_SEG5                              |

       其它：保留                                  |

   * - 23:20
     - PIN5
     - Port B5功能选择                             |

       0000：GPIO_B5                               |

       0001：保留                                  |

       0010：SPI1MOSI                              |

       0011：UART3TX                               |

       0100：CAN0RX                                |

       0101：PWM2AN                                |

       0110：T5I                                   |

       0111：T5O                                   |

       1000：LEDSEG4                               |

       1111：LCD_SEG4                              |

       其它：保留                                  |

   * - 19:16
     - PIN4
     - Port B4功能选择                             |

       0000：GPIO_B4                               |

       0001：I2C1SDA                               |

       0010：SPI0MOSI                              |

       0011：UART2TX                               |

       0100：CAN0TX                                |

       0101：PWM2BN                                |

       0110：T4I                                   |

       0111：T4O                                   |

       1000：LEDSEG3                               |

       1111：LCD_SEG3                              |

       其它：保留                                  |

   * - 15:12
     - PIN3
     - Port B3功能选择                             |

       0000：GPIO_B3                               |

       0001：I2C0SDA                               |

       0010：I2C1SCL                               |

       0011：SPI0MISO                              |

       0100：UART2RX                               |

       0101：PWM3BN                                |

       0110：T3I                                   |

       0111：T3O                                   |

       1000：LEDSEG2                               |

       1111：LCD_SEG2                              |

       其它：保留                                  |

   * - 11:8
     - PIN2
     - Port B2功能选择                             |

       0000：GPIO_B2                               |

       0001：I2C0SCL                               |

       0010：SPI0CLK                               |

       0011：PWM3B                                 |

       0100：T2I                                   |

       0101：T2O                                   |

       0110：LEDSEG1                               |

       1111：LCD_SEG1                              |

       其它：保留                                  |

   * - 7:4
     - PIN1
     - Port B1功能选择                             |

       0000：GPIO_B1                               |

       0001：SPI1MISO                              |

       0010：UART3RX                               |

       0011：PWM2B                                 |

       0100：T1I                                   |

       0101：T1O                                   |

       0110：LEDSEG0                               |

       1111：LCD_SEG0                              |

       其它：保留                                  |

   * - 3:0
     - PIN0
     - Port B0功能选择                             |

       0000：GPIO_B0                               |

       0001：SPI1MOSI                              |

       0010：UART3TX                               |

       0011：PWM2A                                 |

       0100：T2I                                   |

       0101：T2O                                   |

       1111：LCD_SEG31                             |

       其它：保留                                  |


PORTB_FUNC1
^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTB_FUNC1
     - 0x14
     -
     - 0x00
     - 端口B功能配置寄存器1       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN9
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:4
     - PIN9
     - Port B9功能选择                             |

       0000：GPIO_B9                               |

       0001：UART1RX                               |

       0010：LEDSEG7                               |

       1111：LCD_SEG8/ADC0_CH8                     |

       其它：保留                                  |

   * - 3:0
     - PIN8
     - Port B8功能选择                             |

       0000：GPIO_B8                               |

       0001：UART1TX                               |

       1111：LCD_SEG7                              |

       其它：保留                                  |


PORTC_FUNC
^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTC_FUNC
     - 0x20
     - R/W
     - 0x00
     - 端口C功能配置寄存器        


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN1
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:12
     - PIN3
     - Port C3功能选择                             |

       0000：GPIO_C3                               |

       0001：I2C0SCL                               |

       0010：SPI1SCLK                              |

       0011：PWM2AN                                |

       0100：T1I                                   |

       0101：T1O                                   |

       0110：LEDSEG19                              |

       1111：LCD_SEG27                             |

       其它：保留                                  |

   * - 11:8
     - PIN2
     - Port C2功能选择                             |

       0000：GPIO_C2                               |

       0001：I2C0SDA                               |

       0010：SPI1MISO                              |

       0011：T5I                                   |

       0100：LEDSEG18                              |

       1111：LCD_SEG26                             |

       其它：保留                                  |

   * - 7:4
     - PIN1
     - Port C1功能选择                             |

       0000：GPIO_C1                               |

       0001：SPI1MOSI                              |

       0010：PWM2B                                 |

       0011：T5O                                   |

       0100：LEDSEG17                              |

       1111：LCD_SEG25                             |

       其它：保留                                  |

   * - 3:0
     - PIN0
     - Port C0功能选择                             |

       0000：GPIO_C0                               |

       0001：SPI0MOSI                              |

       0010：UART2RX                               |

       0011：PWM2BN                                |

       0100：LEDCOM7                               |

       1111：LCD_SEG24                             |

       其它：保留                                  |


PORTD_FUNC0
^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTD_FUNC0
     - 0x30
     -
     - 0x00
     - 端口D功能配置寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - PIN7
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - PIN5
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN1
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - PIN7
     - Port D7功能选择                             |

       0000：GPIO_D7                               |

       0001：I2C0SDA                               |

       0010：UART1CTS                              |

       0011：CAN0RX                                |

       0100：PWM2AN                                |

       0101：LEDCOM1                               |

       1111：LCD_COM2                              |

       其它：保留                                  |

   * - 27:24
     - PIN6
     - Port D6功能选择                             |

       0000：GPIO_D6                               |

       0001：I2C0SCL                               |

       0010：UART1RTS                              |

       0011：CAN0TX                                |

       0100：PWMBRK0                               |

       0101：HALL0                                 |

       0110：LEDCOM0                               |

       1111：LCD_COM1                              |

       其它：保留                                  |

   * - 23:20
     - PIN5
     - Port D5功能选择                             |

       0000：GPIO_D5                               |

       0001：I2C0SDA                               |

       0010：HALL2                                 |

       1111：LCD_COM0                              |

       其它：保留                                  |

   * - 19:16
     - PIN4
     - Port D4功能选择                             |

       0000：GPIO_D4                               |

       0001：I2C0SCL                               |

       0010：HALL1                                 |

       1111：LCD_SEG23                             |

       其它：保留                                  |

   * - 15:12
     - PIN3
     - Port D3功能选择                             |

       0000：GPIO_D3                               |

       0001：PWM_CLK1：XHO0                        |

       1111：XTALH0_OUT                            |

       其它：保留                                  |

   * - 11:8
     - PIN2
     - Port D2功能选择                             |

       0000：GPIO_D2                               |

       1111：XTALH0_IN                             |

       其它：保留                                  |

   * - 7:4
     - PIN1
     - Port D1功能选择                             |

       0000：GPIO_D1                               |

       0001：UART0CTS                              |

       0010：PWM0A                                 |

       1111：LCD_SEG22                             |

       其它：保留                                  |

   * - 3:0
     - PIN0
     - Port D0功能选择                             |

       0000：GPIO_D0                               |

       0001：UART0RTS                              |

       0010：PWM0AN                                |

       1111：LCD_SEG21                             |

       其它：保留                                  |


PORTD_FUNC1
^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PORTD_FUNC1
     - 0x34
     -
     - 0x00
     - 端口D功能配置寄存器1       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - PIN15
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - PIN13
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN11
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN9
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - PIN15
     - Port D15功能选择                            |

       0000：GPIO_D15                              |

       0001：SPI0SSEL                              |

       0010：PWM1B                                 |

       0011：T0I                                   |

       0100：T0O                                   |

       0101：LEDSEG10                              |

       1111：LCD_SEG17                             |

       其它：保留                                  |

   * - 27:24
     - PIN14
     - Port D14功能选择                            |

       0000：GPIO_D14                              |

       0001：SPI0MOSI                              |

       0010：UART0TX                               |

       0011：PWM1BN                                |

       0100：T0I                                   |

       0101：LEDSEG9                               |

       1111：LCD_SEG16/ADC0_CH10                   |

       其它：保留                                  |

   * - 23:20
     - PIN13
     - Port D13功能选择                            |

       0000：GPIO_D9                               |

       0001：I2C0SDA                               |

       0010：SPI0MISO                              |

       0011：UART0RX                               |

       0100：T0O                                   |

       0101：LEDSEG8                               |

       1111：LCD_SEG15/ADC0_CH9                    |

       其它：保留                                  |

   * - 19:16
     - PIN12
     - Port D12功能选择                            |

       0000：GPIO_D8                               |

       0001：SPI0MOSI                              |

       0010：UART3TX                               |

       0011：PWM2B                                 |

       0100：T4I                                   |

       0101：T4O                                   |

       1111：LCD_SEG30                             |

       其它：保留                                  |

   * - 15:12
     - PIN11
     - Port D11功能选择                            |

       0000：GPIO_D9                               |

       0001：I2C1SDA                               |

       0010：SPI0MISO                              |

       0011：UART3RX                               |

       0100：PWM2A                                 |

       1111：LCD_SEG29                             |

       其它：保留                                  |

   * - 11:8
     - PIN10
     - Port D10功能选择                            |

       0000：GPIO_D8                               |

       0001：I2C1SCL                               |

       0010：SPI0CLK                               |

       0011：PWM2B                                 |

       0100：RTC\_ 1HZ                             |

       1111：LCD_SEG28                             |

       其它：保留                                  |

   * - 7:4
     - PIN9
     - Port D9功能选择                             |

       0000：GPIO_D9                               |

       0001：UART1TX                               |

       0010：HALL1                                 |

       0011：T3I                                   |

       0100：T3O                                   |

       0101：LEDCOM3                               |

       其它：保留                                  |

   * - 3:0
     - PIN8
     - Port D8功能选择                             |

       0000：GPIO_D8                               |

       0001：PWM2A                                 |

       0010：HALL0                                 |

       0011：T3I                                   |

       0100：T3O                                   |

       0101：LEDCOM2                               |

       1111：LCD_COM3                              |

       其它：保留                                  |


PORTA端口上拉功能寄存器PULLU_A
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLU_A
     - 0x00
     -
     - 0x00
     - 端口A上拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 14
     - PIN14
     - PIN14 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 13
     - PIN13
     - PIN13 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 12
     - PIN12
     - PIN12上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 11
     - PIN11
     - PIN11 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 10
     - PIN10
     - PIN10 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 9
     - PIN9
     - PIN9 上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8 上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0上拉电阻使能                            |

       0：禁能 1：使能                             |


PORTB端口上拉功能寄存器PULLU_B
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLU_B
     - 0x10
     -
     - 0x00
     - 端口B上拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - PIN9
     - PIN9 上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8 上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0上拉电阻使能                            |

       0：禁能 1：使能                             |


PORTC端口上拉功能寄存器PULLU_C
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLU_C
     - 0x20
     -
     - 0x00
     - 端口C上拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - PIN3
     - PIN3上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0上拉电阻使能                            |

       0：禁能 1：使能                             |


PORTD端口上拉功能寄存器PULLU_D
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLU_D
     - 0x30
     -
     - 0x00
     - 端口D上拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 14
     - PIN14
     - PIN14 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 13
     - PIN13
     - PIN13 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 12
     - PIN12
     - PIN12上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 11
     - PIN11
     - PIN11 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 10
     - PIN10
     - PIN10 上拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 9
     - PIN9
     - PIN9 上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8 上拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1上拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0上拉电阻使能                            |

       0：禁能 1：使能                             |


PORTA端口下拉功能寄存器PULLD_A
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLD_A
     - 0x100
     -
     - 0x00
     - 端口A下拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 下拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 14
     - PIN14
     - PIN14下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 13
     - PIN13
     - PIN13下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 12
     - PIN12
     - PIN12下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 11
     - PIN11
     - PIN11下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 10
     - PIN10
     - PIN10下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 9
     - PIN9
     - PIN9下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0下拉电阻使能                            |

       0：禁能 1：使能                             |


PORTB端口下拉功能寄存器PULLD_B
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLD_B
     - 0x110
     -
     - 0x00
     - 端口B下拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - PIN9
     - PIN9下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0下拉电阻使能                            |

       0：禁能 1：使能                             |


PORTC端口下拉功能寄存器PULLD_C
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLD_C
     - 0x120
     -
     - 0x00
     - 端口C下拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - PIN3
     - PIN3下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0下拉电阻使能                            |

       0：禁能 1：使能                             |


PORTD端口下拉功能寄存器PULLD_D
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0

   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PULLD_D
     - 0x130
     -
     - 0x00
     - 端口D下拉使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 下拉电阻使能                          |

       0：禁能 1：使能                             |

   * - 14
     - PIN14
     - PIN14下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 13
     - PIN13
     - PIN13下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 12
     - PIN12
     - PIN12下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 11
     - PIN11
     - PIN11下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 10
     - PIN10
     - PIN10下拉电阻使能                           |

       0：禁能 1：使能                             |

   * - 9
     - PIN9
     - PIN9下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1下拉电阻使能                            |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0下拉电阻使能                            |

       0：禁能 1：使能                             |


PORTA端口输入使能功能寄存器INEN_A
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INEN_A
     - 0x200
     -
     - 0x 0\__20
     - 端口A输入使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 输入使能                              |

       0：禁能 1：使能                             |

   * - 14
     - PIN14
     - PIN14 输入使能                              |

       0：禁能 1：使能                             |

   * - 13
     - PIN13
     - PIN13 输入使能                              |

       0：禁能 1：使能                             |

   * - 12
     - PIN12
     - PIN12 输入使能                              |

       0：禁能 1：使能                             |

   * - 11
     - PIN11
     - PIN11 输入使能                              |

       0：禁能 1：使能                             |

   * - 10
     - PIN10
     - PIN10 输入使能                              |

       0：禁能 1：使能                             |

   * - 9
     - PIN9
     - PIN9 输入使能                               |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8 输入使能                               |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7输入使能                                |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6输入使能                                |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5输入使能                                |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4输入使能                                |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3输入使能                                |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2输入使能                                |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1输入使能                                |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0输入使能                                |

       0：禁能 1：使能                             |


PORTB端口输入使能功能寄存器INEN_B
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INEN_B
     - 0x210
     -
     - 0x00
     - 端口B输入使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - PIN9
     - PIN9 输入使能                               |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8 输入使能                               |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7输入使能                                |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6输入使能                                |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5输入使能                                |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4输入使能                                |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3输入使能                                |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2输入使能                                |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1输入使能                                |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0输入使能                                |

       0：禁能 1：使能                             |


PORTC端口输入使能功能寄存器INEN_C
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INEN_C
     - 0x220
     -
     - 0x00
     - 端口C输入使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - PIN3
     - PIN3输入使能                                |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2输入使能                                |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1输入使能                                |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0输入使能                                |

       0：禁能 1：使能                             |


PORTD端口输入使能功能寄存器INEN_D
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INEN_D
     - 0x230
     -
     - 0x 0_0001
     - 端口D输入使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 输入使能                              |

       0：禁能 1：使能                             |

   * - 14
     - PIN14
     - PIN14 输入使能                              |

       0：禁能 1：使能                             |

   * - 13
     - PIN13
     - PIN13 输入使能                              |

       0：禁能 1：使能                             |

   * - 12
     - PIN12
     - PIN12 输入使能                              |

       0：禁能 1：使能                             |

   * - 11
     - PIN11
     - PIN11 输入使能                              |

       0：禁能 1：使能                             |

   * - 10
     - PIN10
     - PIN10 输入使能                              |

       0：禁能 1：使能                             |

   * - 9
     - PIN9
     - PIN9 输入使能                               |

       0：禁能 1：使能                             |

   * - 8
     - PIN8
     - PIN8 输入使能                               |

       0：禁能 1：使能                             |

   * - 7
     - PIN7
     - PIN7输入使能                                |

       0：禁能 1：使能                             |

   * - 6
     - PIN6
     - PIN6输入使能                                |

       0：禁能 1：使能                             |

   * - 5
     - PIN5
     - PIN5输入使能                                |

       0：禁能 1：使能                             |

   * - 4
     - PIN4
     - PIN4输入使能                                |

       0：禁能 1：使能                             |

   * - 3
     - PIN3
     - PIN3输入使能                                |

       0：禁能 1：使能                             |

   * - 2
     - PIN2
     - PIN2输入使能                                |

       0：禁能 1：使能                             |

   * - 1
     - PIN1
     - PIN1输入使能                                |

       0：禁能 1：使能                             |

   * - 0
     - PIN0
     - PIN0输入使能                                |

       0：禁能 1：使能                             |


PORTA端口开漏功能寄存器OPEND_A
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OPEND_A
     - 0x300
     -
     - 0x 0_0c20
     - 端口A开漏使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 14
     - PIN14
     - PIN14 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 13
     - PIN13
     - PIN13 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 12
     - PIN12
     - PIN12 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 11
     - PIN11
     - PIN11 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 10
     - PIN10
     - PIN10 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 9
     - PIN9
     - PIN9 开漏使能                               |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 8
     - PIN8
     - PIN8 开漏使能                               |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 7
     - PIN7
     - PIN7开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 6
     - PIN6
     - PIN6开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 5
     - PIN5
     - PIN5开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 4
     - PIN4
     - PIN4开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 3
     - PIN3
     - PIN3开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 2
     - PIN2
     - PIN2开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 1
     - PIN1
     - PIN1开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 0
     - PIN0
     - PIN0开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |


PORTB端口开漏功能寄存器OPEND_B
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OPEND_B
     - 0x310
     -
     - 0x00
     - 端口B开漏使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - PIN9
     - PIN9 开漏使能                               |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 8
     - PIN8
     - PIN8 开漏使能                               |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 7
     - PIN7
     - PIN7开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 6
     - PIN6
     - PIN6开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 5
     - PIN5
     - PIN5开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 4
     - PIN4
     - PIN4开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 3
     - PIN3
     - PIN3开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 2
     - PIN2
     - PIN2开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 1
     - PIN1
     - PIN1开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 0
     - PIN0
     - PIN0开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |


PORTC端口开漏功能寄存器OPEND_C
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OPEND_C
     - 0x320
     -
     - 0x00
     - 端口C开漏使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - PIN3
     - PIN3开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 2
     - PIN2
     - PIN2开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 1
     - PIN1
     - PIN1开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 0
     - PIN0
     - PIN0开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |


PORTD端口开漏功能寄存器OPEND_D
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OPEND_D
     - 0x330
     -
     - 0x00
     - 端口D开漏使能控制寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - PIN15 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 14
     - PIN14
     - PIN14 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 13
     - PIN13
     - PIN13 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 12
     - PIN12
     - PIN12 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 11
     - PIN11
     - PIN11 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 10
     - PIN10
     - PIN10 开漏使能                              |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 9
     - PIN9
     - PIN9 开漏使能                               |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 8
     - PIN8
     - PIN8 开漏使能                               |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 7
     - PIN7
     - PIN7开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 6
     - PIN6
     - PIN6开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 5
     - PIN5
     - PIN5开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 4
     - PIN4
     - PIN4开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 3
     - PIN3
     - PIN3开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 2
     - PIN2
     - PIN2开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 1
     - PIN1
     - PIN1开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |

   * - 0
     - PIN0
     - PIN0开漏使能                                |

       0：推挽模式                                 |

       1：开漏模式                                 |


通用I/O （GPIO）
----------------

.. _概述-3:

概述
~~~~~

通用输入输出模块主要功能包括数据控制、中断控制功能。SWM241系列所有型号GPIO操作均相同。使用前需使能对应GPIO模块时钟。

.. _特性-3:

特性
~~~~

-  最高58个独立IO。

-  每个IO均支持位带功能

-  每个IO均可触发中断。

-  中断触发条件可配置，支持电平触发/边沿触发。

   -  电平触发支持高电平/低电平

   -  边沿触发中断可配置为上升沿/下降沿/双边沿触发。

-  每个IO均支持上拉/下拉/推挽/开漏功能。

.. _功能描述-4:

功能描述
~~~~~~~~~

数据控制
^^^^^^^^^

除SWD引脚与ISP引脚外，所有引脚上电后默认状态均为GPIO浮空输入（DIR = 0）。SWD引脚可在加密章节进行修改，ISP引脚默认下拉使能，保证浮空状态不会进入ISP模式。PA15专用于SLCD电源域控制，使用SLCD时需要设置输出高电平，不使用SLCD时需要设置为输出低电平。

GPIO方向寄存器（DIRx）用来将每个独立的管脚配置为输入模式或者输出模式：

-  当数据方向设为0时，GPIO对应引脚配置为输入

..

   通过读取相应数据寄存器（IDRx）对应位或对应DATAPINx寄存器获取指定GPIO端口当前状态值

-  当数据方向设为1时，GPIO对应引脚配置为输出

..

   通过向对应端口数据寄存器（ODRx）对应位或对应DATAPINx寄存器写入值改变指定引脚输出，0输出低电平，1输出高电平。

中断控制与清除
^^^^^^^^^^^^^^^

可根据需求将GPIO端口对应引脚配置为中断模式，并通过相关寄存器配置中断极性及触发方式。触发方式分为边沿触发和电平触发两种模式。

-  对于边沿触发中断，可以设置为上升沿触发，下降沿触发或双边沿触发。中断发生后，标志位具备保持特性，必须通过软件对中断标志位进行清除

-  对于电平触发中断，当外部引脚输入为指定电平时，中断发生。当电平翻转后，中断信号消失，无需软件进行清除。使用电平触发中断，需保证外部信号源保持电平稳定，以便有效中断电平能被端口识别

使用以下寄存器来对产生中断触发方式和极性进行定义：

-  GPIO中断触发条件寄存器（INTLVLTRG），用于配置电平触发或边沿触发

-  GPIO中断触发极性寄存器（INTRISEEN），用于配置电平或边沿触发极性

-  GPIO中断边沿触发配置寄存器（INTBE），选择为边沿触发后，用于配置单边沿触发或双边沿触发

通过GPIO中断使能寄存器（INTEN）可以使能或者禁止相应端口对应位中断，GPIO原始中断状态（INTRAWSTAUS）不受使能位影响。当产生中断时，可以在GPIO原始中断状态（RAWINTSTAUS）获取中断信号的状态。当中断使能寄存器（INTEN）对应位为1时，中断状态（INTSTAUS）寄存
器可读取到对应中断信号，且中断信号会进入中断配置模块及NVIC模块，执行中断程序。

通过写1到GPIO中断清除寄存器（INTCLR）指定位可以清除相应位中断。

.. _寄存器映射-2:

寄存器映射
~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
     - |
     - 描述

   * - GPIOABASE：0 |x40040000GPIOBBASE：0 |x40040800GPIOCBASE：0 |x40041000GPIODBASE：0 |x40041800
     - |     |     |     |
     -
     -
     -

   * - ODR
     - 0x00
     -
     - 0x00
     - GPIO写数据寄存器           |

   * - DIR
     - 0x04
     -
     - 0x00
     - GPIO方向寄存器             |

   * - INTLVLTRG
     - 0x08
     -
     - 0x00
     - GPIO中断触发条件           |

   * - INTBE
     - 0x0c
     -
     - 0x00
     - GPIO中断沿触发配置寄存器   |

   * - INTRISEEN
     - 0x10
     -
     - 0x00
     - GPIO 中断触发极性          |

   * - INTEN
     - 0x14
     -
     - 0x00
     - GPIO中断使能               |

   * - INTRAWSTAT
     - 0x18
     -
     - 0x00
     - GPIO中断原始状态           |

   * - INTSTAT
     - 0x1c
     -
     - 0x00
     - GPIO中断状态               |

   * - INTCLR
     - 0x20
     -
     - 0x00
     - GPIO中断清除               |

   * - DMAEN
     - 0x24
     -
     - 0x00
     - GPIO DMA 使能              |

   * - IDR
     - 0x30
     -
     - 0x00
     - GPIO读数据寄存器           |

   * - DATAPIN0
     - 0x40
     -
     - 0x00
     - GPIO PIN0数据寄存器        |

   * - DATAPIN1
     - 0x44
     -
     - 0x00
     - GPIO PIN1数据寄存器        |

   * - DATAPIN2
     - 0x48
     -
     - 0x00
     - GPIO PIN2数据寄存器        |

   * - DATAPIN3
     - 0x4c
     -
     - 0x00
     - GPIO PIN3数据寄存器        |

   * - DATAPIN4
     - 0x50
     -
     - 0x00
     - GPIO PIN4数据寄存器        |

   * - DATAPIN5
     - 0x54
     -
     - 0x00
     - GPIO PIN5数据寄存器        |

   * - DATAPIN6
     - 0x58
     -
     - 0x00
     - GPIO PIN6数据寄存器        |

   * - DATAPIN7
     - 0x5c
     -
     - 0x00
     - GPIO PIN7数据寄存器        |

   * - DATAPIN8
     - 0x60
     -
     - 0x00
     - GPIO PIN8数据寄存器        |

   * - DATAPIN9
     - 0x64
     -
     - 0x00
     - GPIO PIN9数据寄存器        |

   * - DATAPIN10
     - 0x68
     -
     - 0x00
     - GPIO PIN10数据寄存器       |

   * - DATAPIN11
     - 0x6c
     -
     - 0x00
     - GPIO PIN11数据寄存器       |

   * - DATAPIN12
     - 0x70
     -
     - 0x00
     - GPIO PIN12数据寄存器       |

   * - DATAPIN13
     - 0x74
     -
     - 0x00
     - GPIO PIN13数据寄存器       |

   * - DATAPIN14
     - 0x78
     -
     - 0x00
     - GPIO PIN14数据寄存器       |

   * - DATAPIN15
     - 0x7c
     -
     - 0x00
     - GPIO PIN15数据寄存器       |


.. _寄存器描述-2:

寄存器描述
~~~~~~~~~~~~~

GPIOx写数据寄存器ODR
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ODR
     - 0x00
     -
     - 0x00
     - GPIO写数据寄存器           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚数据写寄存器位                      |

   * - 14
     - PIN14
     - Px14引脚数据写寄存器位                      |

   * - 13
     - PIN13
     - Px13引脚数据写寄存器位                      |

   * - 12
     - PIN12
     - Px12引脚数据写寄存器位                      |

   * - 11
     - PIN11
     - Px11引脚数据写寄存器位                      |

   * - 10
     - PIN10
     - Px10引脚数据写寄存器位                      |

   * - 9
     - PIN9
     - Px9引脚数据写寄存器位                       |

   * - 8
     - PIN8
     - Px8引脚数据写寄存器位                       |

   * - 7
     - PIN7
     - Px7引脚数据写寄存器位                       |

   * - 6
     - PIN6
     - Px6引脚数据写寄存器位                       |

   * - 5
     - PIN5
     - Px5引脚数据写寄存器位                       |

   * - 4
     - PIN4
     - Px4引脚数据写寄存器位                       |

   * - 3
     - PIN3
     - Px3引脚数据写寄存器位                       |

   * - 2
     - PIN2
     - Px2引脚数据写寄存器位                       |

   * - 1
     - PIN1
     - Px1引脚数据写寄存器位                       |

   * - 0
     - PIN0
     - Px0引脚数据写寄存器位                       |


GPIOx方向寄存器DIR
^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DIR
     - 0x04
     -
     - 0x00
     - GPIO方向寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚方向寄存器位                        |

       1：输出                                     |

       0：输入                                     |

   * - 14
     - PIN14
     - Px14引脚方向寄存器位                        |

       1：输出                                     |

       0：输入                                     |

   * - 13
     - PIN13
     - Px13引脚方向寄存器位                        |

       1：输出                                     |

       0：输入                                     |

   * - 12
     - PIN12
     - Px12引脚方向寄存器位                        |

       1：输出                                     |

       0：输入                                     |

   * - 11
     - PIN11
     - Px11引脚方向寄存器位                        |

       1：输出                                     |

       0：输入                                     |

   * - 10
     - PIN10
     - Px10引脚方向寄存器位                        |

       1：输出                                     |

       0：输入                                     |

   * - 9
     - PIN9
     - Px9引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 8
     - PIN8
     - Px8引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 7
     - PIN7
     - Px7引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 6
     - PIN6
     - Px6引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 5
     - PIN5
     - Px5引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 4
     - PIN4
     - Px4引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 3
     - PIN3
     - Px3引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 2
     - PIN2
     - Px2引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 1
     - PIN1
     - Px1引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |

   * - 0
     - PIN0
     - Px0引脚方向寄存器位                         |

       1：输出                                     |

       0：输入                                     |


GPIOx中断触发条件寄存器INTLVLTRG
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTLVLTRG
     - 0x08
     -
     - 0x00
     - GPIO中断触发方式           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚中断敏感条件寄存器位                |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 14
     - PIN14
     - Px14引脚中断敏感条件寄存器位                |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 13
     - PIN13
     - Px13引脚中断敏感条件寄存器位                |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 12
     - PIN12
     - Px12引脚中断敏感条件寄存器位                |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 11
     - PIN11
     - Px11引脚中断敏感条件寄存器位                |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 10
     - PIN10
     - Px10引脚中断敏感条件寄存器位                |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 9
     - PIN9
     - Px9引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 8
     - PIN8
     - Px8引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 7
     - PIN7
     - Px7引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 6
     - PIN6
     - Px6引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 5
     - PIN5
     - Px5引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 4
     - PIN4
     - Px4引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 3
     - PIN3
     - Px3引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 2
     - PIN2
     - Px2引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 1
     - PIN1
     - Px1引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |

   * - 0
     - PIN0
     - Px0引脚中断敏感条件寄存器位                 |

       1：电平检测                                 |

       0：边沿检测                                 |


GPIOx中断沿触发配置寄存器INTBE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTBE
     - 0x0c
     -
     - 0x00
     - GPIOx中断沿触发配置寄存器  |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚中断沿触发配置寄存器位              |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 14
     - PIN14
     - Px14引脚中断沿触发配置寄存器位              |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 13
     - PIN13
     - Px13引脚中断沿触发配置寄存器位              |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 12
     - PIN12
     - Px12引脚中断沿触发配置寄存器位              |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 11
     - PIN11
     - Px11引脚中断沿触发配置寄存器位              |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 10
     - PIN10
     - Px10引脚中断沿触发配置寄存器位              |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 9
     - PIN9
     - Px9引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 8
     - PIN8
     - Px8引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 7
     - PIN7
     - Px7引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 6
     - PIN6
     - Px6引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 5
     - PIN5
     - Px5引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 4
     - PIN4
     - Px4引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 3
     - PIN3
     - Px3引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 2
     - PIN2
     - Px2引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 1
     - PIN1
     - Px1引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |

   * - 0
     - PIN0
     - Px0引脚中断沿触发配置寄存器位               |

       1：相应位                                   | 沿触发中断，即上升沿和下降沿都会触发中断 |

       0：相应位为单边沿触发中断，                 | TRISEEN寄存器相应位确定是上升沿/下降沿触发 |


GPIOx中断触发极性寄存器INTRISEEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTRISEEN
     - 0x10
     -
     - 0x00
     - GPIO 中断触发极性          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚中断事件寄存器位                    |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 14
     - PIN14
     - Px14引脚中断事件寄存器位                    |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 13
     - PIN13
     - Px13引脚中断事件寄存器位                    |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 12
     - PIN12
     - Px12引脚中断事件寄存器位                    |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 11
     - PIN11
     - Px11引脚中断事件寄存器位                    |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 10
     - PIN10
     - Px10引脚中断事件寄存器位                    |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 9
     - PIN9
     - Px9引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 8
     - PIN8
     - Px8引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 7
     - PIN7
     - Px7引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 6
     - PIN6
     - Px6引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 5
     - PIN5
     - Px5引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 4
     - PIN4
     - Px4引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 3
     - PIN3
     - Px3引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 2
     - PIN2
     - Px2引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 1
     - PIN1
     - Px1引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |

   * - 0
     - PIN0
     - Px0引脚中断事件寄存器位                     |

       1：上升沿/高电平触发中断                    |

       0：下降沿/低电平触发中断                    |


GPIOx中断使能寄存器INTEN
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTEN
     - 0x14
     -
     - 0x00
     - GPIO中断使能               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚中断使能寄存器位                    |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 14
     - PIN14
     - Px14引脚中断使能寄存器位                    |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 13
     - PIN13
     - Px13引脚中断使能寄存器位                    |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 12
     - PIN12
     - Px12引脚中断使能寄存器位                    |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 11
     - PIN11
     - Px11引脚中断使能寄存器位                    |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 10
     - PIN10
     - Px10引脚中断使能寄存器位                    |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 9
     - PIN9
     - Px9引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 8
     - PIN8
     - Px8引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 7
     - PIN7
     - Px7引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 6
     - PIN6
     - Px6引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 5
     - PIN5
     - Px5引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 4
     - PIN4
     - Px4引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 3
     - PIN3
     - Px3引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 2
     - PIN2
     - Px2引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 1
     - PIN1
     - Px1引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |

   * - 0
     - PIN0
     - Px0引脚中断使能寄存器位                     |

       1：相应位为中断使能                         |

       0：相应位为中断禁止                         |


GPIOx原始中断状态寄存器INTRAWSTAT
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0

   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTRAWSTAT
     - 0x18
     -
     - 0x00
     - GPIO中断原始状态           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -


   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     - PIN13
     - PIN12
     - PIN11
     - PIN10
     - PIN9
     - PIN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     - PIN5
     - PIN4
     - PIN3
     - PIN2
     - PIN1
     - PIN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 
     - 名称     
     - 描述                                        

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚原始中断状态寄存器位                

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 14
     - PIN14
     - Px14引脚原始中断状态寄存器位                

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 13
     - PIN13
     - Px13引脚原始中断状态寄存器位                

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 12
     - PIN12
     - Px12引脚原始中断状态寄存器位                

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 11
     - PIN11
     - Px11引脚原始中断状态寄存器位                

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 10
     - PIN10
     - Px10引脚原始中断状态寄存器位                

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 9
     - PIN9
     - Px9引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 8
     - PIN8
     - Px8引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 7
     - PIN7
     - Px7引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 6
     - PIN6
     - Px6引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 5
     - PIN5
     - Px5引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 4
     - PIN4
     - Px4引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 3
     - PIN3
     - Px3引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 2
     - PIN2
     - Px2引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 1
     - PIN1
     - Px1引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     

   * - 0
     - PIN0
     - Px0引脚原始中断状态寄存器位                 

       1：检测到中断触发条件(不受使能影响)         

       0：没有检测到中断触发条件(不受使能影响)     


GPIOx中断状态寄存器INTSTAT
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTSTAT
     - 0x1c
     - R/W
     - 0x00
     - GPIO中断状态               


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -


   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -
    

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     - PIN13
     - PIN12
     - PIN11
     - PIN10
     - PIN9
     - PIN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     - PIN5
     - PIN4
     - PIN3
     - PIN2
     - PIN1
     - PIN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 
     - 名称    
     - 描述                                        

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚中断状态寄存器位                    

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 14
     - PIN14
     - Px14引脚中断状态寄存器位                    

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 13
     - PIN13
     - Px13引脚中断状态寄存器位                    

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 12
     - PIN12
     - Px12引脚中断状态寄存器位                    

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 11
     - PIN11
     - Px11引脚中断状态寄存器位                    

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 10
     - PIN10
     - Px10引脚中断状态寄存器位                    

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 9
     - PIN9
     - Px9引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 8
     - PIN8
     - Px8引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 7
     - PIN7
     - Px7引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 6
     - PIN6
     - Px6引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 5
     - PIN5
     - Px5引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 4
     - PIN4
     - Px4引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 3
     - PIN3
     - Px3引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 2
     - PIN2
     - Px2引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 1
     - PIN1
     - Px1引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx

   * - 0
     - PIN0
     - Px0引脚中断状态寄存器位                     

       1：检测到了中断                             

       0：没有检测到中断                           

       INTSTAT.PINx = INTRAWSTAT.PINx & INTEN.PINx


GPIOx中断清除寄存器INTCLR
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTCLR
     - 0x20
     - R/W
     - 0x00
     - GPIO中断清除              


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -
     

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -
     

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     - PIN13
     - PIN12
     - PIN11
     - PIN10
     - PIN9
     - PIN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     - PIN5
     - PIN4
     - PIN3
     - PIN2
     - PIN1
     - PIN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 
     - 名称     
     - 描述                                        

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚中断清除寄存器位，写1清除中断       

   * - 14
     - PIN14
     - Px14引脚中断清除寄存器位，写1清除中断       

   * - 13
     - PIN13
     - Px13引脚中断清除寄存器位，写1清除中断       

   * - 12
     - PIN12
     - Px12引脚中断清除寄存器位，写1清除中断       

   * - 11
     - PIN11
     - Px11引脚中断清除寄存器位，写1清除中断       

   * - 10
     - PIN10
     - Px10引脚中断清除寄存器位，写1清除中断       

   * - 9
     - PIN9
     - Px9引脚中断清除寄存器位，写1清除中断        

   * - 8
     - PIN8
     - Px8引脚中断清除寄存器位，写1清除中断        

   * - 7
     - PIN7
     - Px7引脚中断清除寄存器位，写1清除中断        

   * - 6
     - PIN6
     - Px6引脚中断清除寄存器位，写1清除中断        

   * - 5
     - PIN5
     - Px5引脚中断清除寄存器位，写1清除中断        

   * - 4
     - PIN4
     - Px4引脚中断清除寄存器位，写1清除中断        

   * - 3
     - PIN3
     - Px3引脚中断清除寄存器位，写1清除中断        

   * - 2
     - PIN2
     - Px2引脚中断清除寄存器位，写1清除中断        

   * - 1
     - PIN1
     - Px1引脚中断清除寄存器位，写1清除中断        

   * - 0
     - PIN0
     - Px0引脚中断清除寄存器位，写1清除中断        


GPIO DMA触发使能寄存器DMAEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DMAEN
     - 0x24
     - R/W
     - 0x00
     - GPIO DMA使能寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -


   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN


   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN
     - DMAEN



.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:16
     - -
     - -

   * - 15:0
     - DMAEN
     - 1：通过对应位的GPIO沿状态 （上升沿、下降沿、双沿）来触发DMA读取GPIO数据寄存器                                  |

       0：CPU读取GPIODATA寄存器

       注：沿状态通过INTBE和INTRISEEN寄存器来配置


GPIOx读数据寄存器IDR
^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IDR
     - 0x30
     - R/W
     - 0x00
     - GPIO读数据寄存器


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     - -
     - -
     - -
     - -
     - -
     - -
     - -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PIN15
     - PIN14
     - PIN13
     - PIN12
     - PIN11
     - PIN10
     - PIN9
     - PIN8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PIN7
     - PIN6
     - PIN5
     - PIN4
     - PIN3
     - PIN2
     - PIN1
     - PIN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域
     - 名称
     - 描述

   * - 31:16
     - -
     - -

   * - 15
     - PIN15
     - Px15引脚数据读寄存器位

   * - 14
     - PIN14
     - Px14引脚数据读寄存器位

   * - 13
     - PIN13
     - Px13引脚数据读寄存器位

   * - 12
     - PIN12
     - Px12引脚数据读寄存器位

   * - 11
     - PIN11
     - Px11引脚数据读寄存器位

   * - 10
     - PIN10
     - Px10引脚数据读寄存器位

   * - 9
     - PIN9
     - Px9引脚数据读寄存器位

   * - 8
     - PIN8
     - Px8引脚数据读寄存器位

   * - 7
     - PIN7
     - Px7引脚数据读寄存器位

   * - 6
     - PIN6
     - Px6引脚数据读寄存器位

   * - 5
     - PIN5
     - Px5引脚数据读寄存器位

   * - 4
     - PIN4
     - Px4引脚数据读寄存器位

   * - 3
     - PIN3
     - Px3引脚数据读寄存器位

   * - 2
     - PIN2
     - Px2引脚数据读寄存器位

   * - 1
     - PIN1
     - Px1引脚数据读寄存器位

   * - 0
     - PIN0
     - Px0引脚数据读寄存器位


GPIOx PINn数据寄存器DATAPINx(x = 0~15)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述


   * - DATAPIN0
     - 0x40
     - R/W
     - 0x00
     - GPIO PIN0数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述


   * - DATAPIN1
     - 0x44
     -
     - 0x00
     - GPIO PIN1数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN2
     - 0x48
     -
     - 0x00
     - GPIO PIN2数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述


   * - DATAPIN3
     - 0x4C
     -
     - 0x00
     - GPIO PIN3数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN4
     - 0x50
     - R/W
     - 0x00
     - GPIO PIN4数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN5
     - 0x54
     - R/W
     - 0x00
     - GPIO PIN5数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN6
     - 0x58
     - R/W
     - 0x00
     - GPIO PIN6数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN7
     - 0x5C
     - R/W
     - 0x00
     - GPIO PIN7数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN8
     - 0x60
     - R/W
     - 0x00
     - GPIO PIN8数据寄存器        |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN9
     - 0x64
     - R/W
     - 0x00
     - GPIO PIN9数据寄存器


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN10
     - 0x68
     -
     - 0x00
     - GPIO PIN10数据寄存器       |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN11
     - 0x6C
     -
     - 0x00
     - GPIO PIN11数据寄存器       |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN12
     - 0x70
     -
     - 0x00
     - GPIO PIN12数据寄存器       |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN13
     - 0x74
     -
     - 0x00
     - GPIO PIN13数据寄存器       |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN14
     - 0x78
     -
     - 0x00
     - GPIO PIN14数据寄存器       |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAPIN15
     - 0x7C
     -
     - 0x00
     - GPIO PIN15数据寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - DA INi


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - DATAPINi
     - GPIOx PINn数据寄存器。                      |

       读：GPIOx PINn的输入数据                    |

       写：GPIOx PINn的输出数据                    |


加强型定时器（TIMER）
---------------------

.. _概述-4:

概述
~~~~~

SWM241系列所有型号TIMER操作均相同,不同型号具备TIMER数量可能不同。使用前需使能TIMER模块时钟。

每个TIMER模块均具备定时器功能（使用片内时钟作为计数基准）和计数器功能（使用片外时钟作为计数基准）、输出比较及输入捕获功能。

TIMER0支持Hall功能及连续脉宽捕捉功能。

.. _特性-4:

特性
~~~~~~~

-  8路32位通用定时器

   -  24位计数器

   -  8位预分频

-  可单独配置计时触发条件为内部时钟或者外部输入

-  支持脉冲捕获及宽度测量，检测脉冲极性可配

-  支持脉冲发送功能，可作为PWM使用

-  TIMER0支持HALL功能，可采集霍尔传感器信号

-  TIMER0~1输出可作为外部触发事件信号

-  定时器溢出脉冲输出，可用于触发ADC

.. _模块结构框图-2:

模块结构框图
~~~~~~~~~~~~~~~~~~~~

|Featur009|

图 6‑8 TIMER 模块结构框图

.. _功能描述-5:

功能描述
~~~~~~~~~~~~~

定时器
^^^^^^^^

使用TIMERx作为定时器时，为递减计数。流程如下：

-  将控制寄存器（CRx）中MODx位配置为定时器，CLKSRCx位配置计数源选择，配置为使用系统时钟作为计数源。

-  通过预分频寄存器（PSCx）配置定时器时钟分频值，装载值寄存器（LOADx）设置计数起始值。

-  使能寄存器（EN）对应位使能为1。

-  对应TIMERx开始递减计数，计数到0时，产生中断，同时重新装载计数值，进行下一周期计数。

在计数过程中，可通过对当前值寄存器（VALUEx）进行读取，获取当前计数值。

定时器计数过程中改变装载值寄存器（LOADx）值，将在下个计数周期（计数到0重新装载）生效，不会改变本周期计数值。

定时器计数过程中，可以通过BRK寄存器控制位置1暂停指定通道计数，置0后继续计数。

如图 6‑9所示。

|Featur010|

图 6‑9定时器工作示意图

注：如图 6‑9中CLK不是系统时钟，是系统时钟经过PSC分频之后的时钟

计数器
^^^^^^^

使用TIMERx作为计数器时，为递减计数。流程如下：

-  将控制寄存器（CRx）中MODEx位配置为定时器模式，CLKSRCx位配置计数源选择，配置为使用外部的cntsrc的上升沿。此时，对应TIMER将以配置为CNT引脚外部输入的上升沿作为计数目标。

-  针对外部信号输入引脚进行如下操作：

   -  配置PORTCON模块中INEN寄存器使能引脚输入功能。

   -  通过PORT_FUNC寄存器将引脚切换为指定数字功能。

-  通过装载值寄存器（LOADx）设置计数目标值。

-  使能寄存器（EN）对应位使能为1，对应TIMERx开始递减计数，计数到0时，产生中断，同时重新装载计数值，进行下一周期计数。

在计数过程中，可通过对当前值寄存器（CVALx）进行读取，获取当前计数值。

定时器计数过程中改变装载值寄存器（LOADx）值，将在下个计数周期（计数到0重新装载）生效，不会改变本周期计数值。

计数器使用过程中，可以通过HALT寄存器控制位置1暂停指定通道计数，置0后继续计数。

示意图如图 6‑10所示。

|Featur011|

图 6‑10计数器工作示意图

级联
^^^^^^

当TIMER无法满足计数宽度或时间长度时，可以通过级联方式，使计数周期为TIMER位宽相乘的关系。最高支持两级级联。

使用方式如下：

-  TIMERn根据需要设置为定时器或计数器模式

-  TIMERn+1设置为级联模式（CLKSRCx位配置为使用上一路计数器的进位标志）

-  LOADn = 目标计数值A

-  LOADn+1 = 目标计数值B，总计数周期为A*B

-  使能TIMERn+1中断

-  使能TIMERn+1

-  使能TIMERn

-  TIMERn+1中断产生，在中断程序中使能TIMERn中断

-  TIMERn中断产生，计数周期完成

示意图如图 6‑11所示：

|Featur012|

图 6‑11级联模式工作示意图

脉冲发送
^^^^^^^^^

所有TIMER模块均支持脉冲发送功能，可发送指定脉宽的方波。该计数器为向下计数。使用方式如下：

-  针对外部信号输入引脚进行如下操作

   -  配置PORTCON模块中使能引脚输出功能

   -  通过PORT_FUNC寄存器将引脚切换为TIMER对应数字功能

-  TIMER初始化

   -  指定要被设置的定时器

   -  设置TIMER的工作模式为OC(输出比较)模式

   -  设置定时周期

-  输出比较功能初始化

   -  指定要被设置的定时器

   -  设置当计数器的值递减到MATCH时引脚输出电平翻转

   -  设置初始输出电平

-  启动定时器

示意图如图 6‑12所示：

|Featur013|

图 6‑12 脉冲发送示意图

脉冲捕捉
^^^^^^^^^^^^

所有TIMER模块均支持用于捕捉外部脉宽，可记录外部单个脉冲宽度。

使用方式如下：

-  针对外部信号输入引脚进行如下操作

   -  配置PORTCON模块中INEN寄存器使能引脚输入功能

   -  通过PORT_FUNC寄存器将引脚切换为TIMER对应数字功能

-  设置中断使能寄存器（IEx），使能中断

-  使能寄存器（EN）对应位使能，启动捕捉功能

-  当指定引脚出现变化沿时，开始记录宽度，再次出现沿时，将对应种类的脉宽长度记录于ICLOWx或ICHIGHx寄存器，并产生中断。

-  进入中断，读取脉冲长度寄存器，获取指定种类的脉冲宽度

-  如果不操作EN位，则持续记录电平宽度，直至EN位关闭。

捕捉高电平示意图如图 6‑13所示。

|Featur014|

图 6‑13单次高电平捕捉示意图

低电平示意图如图 6‑14所示。

|Featur015|

图 6‑14单次低电平捕捉示意图

霍尔接口
^^^^^^^^^^^

TIMER0模块提供了HALL接口功能，能够自动记录脉冲变化间隔，并产生中断，使用方式如下：

-  HALL功能为指定引脚，且不同封装可能有所差异，具体引脚详见管脚排布：

   -  配置PORTCON模块中INEN寄存器使能引脚输入功能

   -  通过PORT_FUNC寄存器将引脚切换为HALL功能

-  配置HALLCR寄存器，设置对应管脚计数及中断产生条件，支持上升沿/下降沿/双沿产生中断

-  配置TIMER0装载值寄存器（LOADx）为0xFFFFFFFF

-  使能控制寄存器使能位（EN）

-  当外部HALL_X引脚产生指定电平变化时，TIMER0计数值自动装载至HALL_X（本次覆盖上次），并产生TIMER中断。同时HALLIF寄存器IFx将产生对应标示位，标识对应引脚产生电平变化。

-  当TIMER0记载至0时，将重新从0xFFFFFFFF计数

双边沿记录示意图如图 6‑15所示。

|Featur016|

图 6‑15 Hall双边沿记录示意图

ADC采样触发功能
^^^^^^^^^^^^^^^^

TIMER2/3支持SAR ADC触发功能

对于SAR ADC，配置ADC完成后，将寄存器（CTRL）中TRIG设置为TIMER2触发或TIMER3触发，则当对应TIMER计数值减至0时，将触发SAR ADC配置寄存器（CTRL）中选中的通道进行采样。可以通过ADC采样完成中断进行结果获取。

此功能配置为定时器或脉冲发送均有效。

中断配置与清除
^^^^^^^^^^^^^^^^^

每路TIMER均具备独立中断，通过中断使能寄存器IE进行各TIMER中断使能。通过中断状态寄存器IF进行中断查询及清除。

TIMER中断

可通过配置中断使能寄存器IEx相应位使能中断。当检测到中断触发条件时，中断标志寄存器IFx相应位中置1。如需清除此标志，需在相应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

HALL中断

可通过配置HALL模式控制寄存器对应位设置输入HALLx信号触发中断的条件：上升沿、下降沿、上升沿和下降沿。可通过配置HALL中断使能寄存器HALLIE相应位使能中断。当检测到中断触发条件时，HALL中断标志寄存器HALLIF相应位中置1。如需清除此标志，需在相应标志位中写1清零（R/W1C），否则
中断在开启状态下会一直进入。

.. _寄存器映射-3:

寄存器映射
~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
     - |
     - 描述                       | | | |

   * - TIMER0BASE：0 |x40046800TIMER1BASE：0 |x40046840TIMER2BASE：0 |x40046880TIMER3BASE：0 |x400468C0TIMER4BASE：0 |x40046900TIMER5BASE：0 |x40046940TIMER6BASE：0
       |x40046980TIMER7BASE：0 |x400469C0
     - |     |     |     |     |     |     |     |
     -
     -
     -

   * - LOADx
     - 0x0
     -
     - 0x00
     - TIMERx装载值寄存器         |

   * - VALUEx
     - 0x4
     -
     -
     - TIMERx当前计数值寄存器     |

   * - CRx
     - 0x8
     -
     - 0x00
     - TIMERx控制寄存器           |

   * - IEx
     - 0x10
     -
     - 0x00
     - TIMERx中断使能寄存器       |

   * - IFx
     - 0x14
     -
     - 0x00
     - TIMERx中断状态。写1清零。  |

   * - HALTx
     - 0x18
     -
     - 0x00
     - TIMERx暂停控制             |

   * - OCCRx
     - 0x1C
     -
     - 0x00
     - TIMER发送脉冲控制信号      |

   * - OCMATx
     - 0x20
     -
     - 0x00
     - PWM输出脉冲反转值          |

   * - ICLOWx
     - 0x28
     -
     - 0x00
     - 输入脉冲低电平长度         |

   * - ICHIGHx
     - 0x2C
     -
     - 0x00
     - 输入脉冲高电平长度         |

   * - PSCx
     - 0x30
     -
     - 0x00
     - TIMERx预分频器装载值寄存器 |

   * - HALLIE
     - 0x400
     -
     - 0x00
     - HALL中断使能               |

   * - HALLIF
     - 0x408
     -
     - 0x00
     - HALL中断状态               |

   * - HALLEN
     - 0x40C
     -
     - 0x00
     - HALL触发使能寄存器         |

   * - HALLDR
     - 0x410
     -
     - 0x00
     -

   * - HALLSR
     - 0x41C
     -
     - 0x00
     -

   * - EN
     - 0x440
     -
     - 0x00
     - TIMER使能寄存器            |


.. _寄存器描述-3:

寄存器描述
~~~~~~~~~~~~~

装载值寄存器LOADx
^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - LOADx
     - 0x0
     -
     - 0x00
     - TIMERx装载值寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - LOADx
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - LOADx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - LOADx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:0
     - LOADx
     - 定时器通道x的装载值                         |


当前值寄存器VALUEx
^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - VALUEx
     - 0x4
     -
     -
     - TIMERx当前计数值寄存器     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - VALUEx
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - VALUEx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - VALUEx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:0
     - VALUEx
     - 定时器通道x的计数器当前值                   |


控制寄存器CRx
^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CRx
     - 0x8
     -
     - 0x00
     - TIMERx控制寄存器           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     - I GEx
     -
     -
     -
     - C RCx
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:6
     - -
     - -

   * - 5:4
     - ICEDGEx
     - 输入脉冲测量模式下，计数模式：              |

       00：检测到上升沿或者下降沿后开始计数        |

       01：检测到上升沿开始计数                    |

       10：检测到下降沿开始计数                    |

   * - 3:2
     - MODEx
     - 定时器工作模式：                            |

       00：普通定时器模式                          |

       01：输入脉冲测量模式                        |

       10：输出PWM模式                             |

   * - 1:0
     - CLKSRCx
     - 定时器计数源选择：                          |

       00：使用内部系统时钟上升沿                  |

       01：使用上一路计数器的进位标                | =1时，使用第0路；x=2时，使用第1路；依次类 | =0时，使用第TM_NO-1路，最多支持两级级联） |

       10：使用外部的cntsrc的上升沿                |


中断使能寄存器IEx
^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IEx
     - 0x10
     -
     - 0x00
     - TIMERx中断使能寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - ICF
     -
     - OC1
     -
     - TO


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - ICF
     - 输入脉冲下降沿中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - ICR
     - 输入脉冲上升沿中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - OC1
     - 输出PWM翻转点1中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - OC0
     - 输出PWM翻转点0中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - TO
     - 计数器溢出中断                              |

       1：使能                                     |

       0：禁能                                     |


中断状态寄存器IFx
^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IFx
     - 0x14
     -
     - 0x00
     - TIMERx中断状态。写1清零。  |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - ICF
     -
     - OC1
     -
     - TO


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - ICF
     - 输入脉冲下降沿中断状态，R/W1C               |

       1：中断发生                                 |

       0：中断未发生                               |

   * - 3
     - ICR
     - 输入脉冲上升沿中断状态，R/W1C               |

       1：中断发生                                 |

       0：中断未发生                               |

   * - 2
     - OC1
     - 输出PWM翻转点1中断状态，R/W1C               |

       1：中断发生                                 |

       0：中断未发生                               |

   * - 1
     - OC0
     - 输出PWM翻转点0中断状态，R/W1C               |

       1：中断发生                                 |

       0：中断未发生                               |

   * - 0
     - TO
     - 计数器溢出中断状态，R/W1C                   |

       1：中断发生                                 |

       0：中断未发生                               |


       使用级联功能时，高一级的中断不会触发，低一 | 断在全部计数结束后触发。比如通道0和通道  | ，当通道1和通道0的计数都到0时，通道0的溢  | 才会触发，通道1的溢出中断始终不会触发。  |


暂停控制寄存器HALTx
^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKx
     - 0x18
     -
     - 0x00
     - TIMERx暂停控制             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - HALTx
     - 定时器暂停控制                              |

       1：暂停当前定时器的计数                     |

       0：当前定时器正常减计数                     |


发送脉冲控制信号寄存器OCCRx
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OCCRx
     - 0x1C
     -
     - 0x00
     - TIMER发送脉冲控制信号      |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - F EEN
     - IN VL
     - FO LVL


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - FORCEEN
     - Force Level，强制输出使能                   |

   * - 1
     - INITLVL
     - Initial Level，初始输出电平                 |

   * - 0
     - FORCELVL
     - Force Level，强制输出电平                   |


输出脉冲反转值寄存器OCMATx
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OCMATx
     - 0x20
     -
     - 0x00
     - PWM输出脉冲反转值          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - OCMATx
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - OCMATx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - OCMATx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:0
     - OCMATx
     - PWM输出脉冲反转值                           |


输入脉冲低电平长度寄存器ICLOWx
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ICLOWx
     - 0x28
     -
     - 0x00
     - 输入脉冲低电平长度         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ICLOWx
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ICLOWx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ICLOWx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:0
     - ICLOWx
     - 输入脉冲低电平长度                          |


输入脉冲高电平长度寄存器ICHIGHx
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ICHIGHx
     - 0x2C
     -
     - 0x00
     - 输入脉冲高电平长度         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ICHIGHx
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ICHIGHx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ICHIGHx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:0
     - ICHIGHx
     - 输入脉冲高电平长度                          |


预分频器装载值寄存器PSCx
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PSCx
     - 0x30
     -
     - 0x00
     - TIMERx预分频器装载值寄存器 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PSCx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - PSCx
     - 定时器时钟分频                              |

       0：1分频                                    |

       1：2分频                                    |

       ……

       254：255分频                                |

       255：256分频                                |

       注：在级联模                                | 除了第一级，其它级的这个字段必须设置为0  |


HALL中断使能寄存器HALLIE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HALLIE
     - 0x400
     -
     - 0x00
     - HALL中断使能               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - HALL0
     - HALL0中断使能。                             |

       1：HALL中断使能                             |

       0：HALL中断禁能                             |

       注：此功能对应Timer0                        |


HALL中断状态寄存器HALLIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HALLIF
     - 0x408
     -
     - 0x00
     - HALL中断状态               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - IN2
     - IN1
     - IN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:6
     - -
     - -

   * - 2
     - IN2
     - 输入HALL.0信号2触发中断的状态，R/W1C        |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - IN1
     - 输入HALL0信号1触发中断的状态，R/W1C         |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - IN0
     - 输入HALL0信号0触发中断的状态，R/W1C         |

       1：中断已发生                               |

       0：中断未发生                               |


HALL触发使能寄存器HALLEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HALLEN
     - 0x40C
     -
     - 0x00
     - HALL触发使能寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - HALL0
     - 输入HALL0信号触发使能                       |

       0：不触发                                   |

       1：触发                                     |


HALL0信号触发时，Timer0计数值寄存器HALLDR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HALLDR
     - 0x410
     -
     - 0x00
     -


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - HALLDR
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - HALLDR
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - HALLDR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:0
     - HALLDR
     - HALL0信号触发时，计数器0的计数值。          |

       HALL0输                                     | 沿将Timer0（加载值-当前值）存入此寄存器  |


外部HALL输入信号的状态HALLSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HALLSR
     - 0x41C
     -
     - 0x00
     - 外部HALL输入信号的状态     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - IN2
     - IN1
     - IN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - IN2
     - 输入HALL0输入信号2当前状态，R/W             |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - IN1
     - 输入HALL0输入信号1当前状态，R/W             |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - IN0
     - 输入HALL0输入信号0当前状态，R/W             |

       1：中断已发生                               |

       0：中断未发生                               |


使能寄存器EN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - EN
     - 0x440
     -
     - 0x00
     - TIMER使能寄存器            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - EN7
     - EN6
     - EN5
     - EN4
     - EN3
     - EN2
     - EN1
     - EN0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - EN7
     - TIMER7使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 6
     - EN6
     - TIMER6使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - EN5
     - TIMER5使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 4
     - EN4
     - TIMER4使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - EN3
     - TIMER3使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - EN2
     - TIMER2使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - EN1
     - TIMER1使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - EN0
     - TIMER0使能                                  |

       1：使能                                     |

       0：禁能                                     |


看门狗定时器（WDT）
-------------------

.. _概述-5:

概述
~~~~~

SWM241系列所有型号WDT操作均相同。使用前需使能对应WDT模块时钟。

看门狗定时器（WDT）主要用于控制程序流程正确，在程序流长时间未按既定流程执行指定程序的情况下产生中断或复位芯片。

.. _特性-5:

特性
~~~~~

-  产生计数器溢出复位信号，复位信号使能可配

-  具有16位计数位宽，可配置灵活、宽范围的溢出周期

-  具有中断功能

-  时钟源为32K

.. _模块结构框图-3:

模块结构框图
~~~~~~~~~~~~

|Featur017|

图 6‑16 WDT模块结构框图

.. _功能描述-6:

功能描述
~~~~~~~~~~~

配置方式
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

看门狗定时器（WDT）主要用于控制程序流程正确，在程序流程时间未按既定流程执行指定程序的情况下产生中断或复位芯片。

看门狗发生中断及复位与计数值之间的关系示意图如图 6‑17所示：

|Featur018|

图 6‑17 门狗发生中断及复位与计数值之间的关系示意图

配置方式如下：

-  配置复位值寄存器RSTVAL，设置复位值，WDT为递增计数

-  配置控制寄存器CR中RSTEN位，设置以系统时钟为单位递增时产生中断或产生复位

-  将控制寄存器CR中EN位置1，使能WDT模块

-  程序执行过程中通过向FEED寄存器写入0x55喂狗，重启计数

-  若当VALUE寄存器加至RSTVAL，依然未执行喂狗操作，则根据CR寄存器设置，产生中断或复位信号

工作示意图如图 6‑18所示：

|Featur019|

图 6‑18 WDT工作示意图

控制寄存器CR中RSTEN位配置为复位使能时，使能后波形如图 6‑19所示:

|Featur020|

图 6‑19 WDT配置为RESET模式波形图

控制寄存器CR中RSTEN位配置为复位失能时，使能后波形如图 6‑20所示，中断产生后，通过IF寄存器进行清除。

|Featur021|

图 6‑20 WDT配置为中断模式波形图

.. _中断配置与清除-1:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

可通过配置WDT控制寄存器CR设置以系统时钟为单位递增时产生中断，并使能中断，启动WDT，当VALUE寄存器加至RSTVAL，依然未执行喂狗操作时，中断标志寄存器IF位置1。如需清除此标志，需在标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

.. _寄存器映射-4:

寄存器映射
~~~~~~~~~~~~~~

下表列出了WDT模块的相关寄存器，所列偏移量为寄存器相对于WDT模块基址的16进制增量：

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - WDTBASE：0 |x400A0800
     - |
     -
     -
     -

   * - RSTVAL
     - 0x00
     -
     -
     - WDT复位值寄存器            |

   * - INTVAL
     - 0x04
     -
     -
     - WDT中断值寄存器            |

   * - CR
     - 0x08
     -
     - 0x00
     - WDT控制寄存器              |

   * - IF
     - 0x0C
     -
     - 0x00
     - WDT中断状态寄存器          |

   * - FEED
     - 0x10
     -
     - 0x00
     - WDT重启计数器寄存器        |


.. _寄存器描述-4:

寄存器描述
~~~~~~~~~~~~~~

WDT复位值寄存器RSTVAL
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RSTVAL
     - 0x00
     -
     - 0xFFFF
     - WDT 复位值寄存器           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - RSTVAL
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - RSTVAL
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:0
     - RSTVAL
     - WDT计数器的复位计数初始值。                 |


       DT计数值计数到该寄存器设置值时，产生复位。 |

       使能后配置无效                              |


WDT中断值寄存器INTVAL
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INTVAL
     - 0x04
     -
     - 0xFFFF
     - WDT中断值寄存器            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - INTVAL
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - INTVAL
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:0
     - INTVAL
     - WDT计数器中断目标值                         |

       当W                                         | 数值递增计数到该寄存器设置值时，产生中断； |

       产生中断后，若未设置复位值则重              | 计数，若设置复位值，则继续计数直至复位；  |

       当中断与复位同时                            | ，INTVAL需要小于RSTVAL，产生中断后，若未 | 狗操作，则计数器继续计数，直至产生复位； |

       使能后配置无效；                            |

       当CR寄存器WINEN位为1                        | 未发生中断时喂狗，则直接发生看门狗复位。 |

       当CR寄存                                    | NEN位为0时，发生看门狗复位跟喂狗没有关系； |


WDT控制寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x08
     -
     - 0x00
     - WDT控制寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11:8
     - CLKDIV
     - 看门狗计数时钟预分频寄存器                  |

       0000：2                                     |

       0001：4                                     |

       0010：8                                     |

       0011：16                                    |

       0100：32                                    |

       0101：64                                    |

       0110：128                                   |

       0111：256                                   |

       1000：512                                   |

       1001：1024                                  |

       1010：2048                                  |

       1011：4096                                  |

       1100：8192                                  |

       1101：16384                                 |

       1110：32768                                 |

       1111：65536                                 |

   * - 7:4
     - -
     - -

   * - 3
     - WINEN
     - WDT窗口功能使能                             |

       1：使能窗口功能                             |

       0：禁止窗口功能                             |

   * - 2
     - INTEN
     - WDT中断输出使能位                           |

       1：使能中断                                 |

       0：禁止中断                                 |

   * - 1
     - RSTEN
     - WDT复位输出使能位                           |

       1：使能复位                                 |

       0：禁止复位                                 |

   * - 0
     - EN
     - WDT启动位                                   |

       1：启动WDT计数                              |

       0：停止计数                                 |


WDT中断状态寄存器IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x0C
     -
     - 0x00
     - WDT中断状态寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - IF


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - IF
     - WDT中断位，高有效，R/W1C                    |

       硬件置位，写1清零                           |


WDT重启寄存器FEED
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - FEED
     - 0x10
     -
     - 0x00
     - WDT重启计数器寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - FEED
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - FEED
     - 看门狗重启计数器寄存器                      |

       当向该                                      | 写入0x55后会重启看门狗计数器（喂狗操作） |


实时时钟（RTC）
--------------------------

1. **概述**

使用前需使能RTC模块时钟。RTC控制器用于提供给用户实时的时间信息与日期信息。

2. **特性**

-  可自由设置日期（年、月、周、日）和时间（时、分、秒）

-  可自由设置闹钟（周、时、分、秒）

-  自动识别当前设置年份是否为闰年

-  支持RTC时钟校正功能

-  支持RTC中断从SLEEP模式下唤醒芯片

   1. **模块结构框图**

|Featur022|

图 6‑21 RTC模块结构框图

2. **功能描述**

使用RTC前，需进行如下操作：

-  通过寄存器EN禁能RTC；

-  读取配置状态寄存器CFGABLE，当该寄存器 = 1时，分别通过寄存器MINSEC、DATHUR、MONDAY、YEAR配置RTC的初始计数值 ，通过寄存器MINSECAL、DATHURAL设置RTC闹钟时间；

-  通过寄存器LOAD加载各项初始值；

-  用户根据需要，通过寄存器IE使能天/时/分/秒等中断或闹钟中断；

-  通过寄存器EN使能RTC；

-  若使能了天/时/分/秒等中断，计数到规定时间后进入中断；若使能了闹钟中断，计数到闹钟设定时间后将芯片从休眠状态唤醒（进入闹钟中断前芯片需处于休眠状态）。

**备份寄存器**

在SYSCON模块中，提供了3个32位RTC电源域备份寄存器，用于存储数据，RTC电源域备份寄存器处在备份域，由于此芯片RTC没有单独额外供电，当系统在待机模式下被唤醒，或系统复位时，该寄存器不会被复位；只有在断电复位时，该寄存器才会复位。使用流程如下所示：

-  确认RCLF（32KHz时钟）为使能状态

-  配置PxWKEN寄存器指定位，使能相应端口对应位唤醒功能

-  SLEEP寄存器BIT[0] = 1后，芯片进入睡眠模式

-  当配置端口对应位产生下降沿时，芯片被唤醒，继续执行程序

-  唤醒后，端口对应PxWKSR寄存器对应位被至1，可通过对该位写1进行清除（该位对进入休眠无影响）

*注：内部的NVIC_RESET对RTC域没有影响*

**RTC唤醒**

浅睡眠模式下，通过SYSCON模块中RTCWKSR寄存器及RTCWKCR寄存器进行定时器唤醒操作。

在sleep之前，需要将时钟切换为内部高频。

流程如下：

关闭所有不需要唤醒功能的IO输入使能（PORTCON模块中INEN_x寄存器）

配置RTC时钟源及唤醒时间

使能唤醒源，设置RTCWKCR寄存器EN位为1 (使能前需通过写1清除TWGFLG寄存器FLG位)

使能RTC，RTC开始计数

SLEEP寄存器SLEEP位置1后，芯片进入浅睡眠模式，RTC计到设置值后唤醒芯片

唤醒后，RTCWKSR寄存器FLG位为1（可通过对该位写1进行清除）

**时钟源**

RTC时钟源可选择片外低频晶体振荡器（32.768KHz）或内部低频RC振荡器（32KHz）两个时钟源，可通过SYSCON模块中CLKSET寄存器中RTC（32K时钟选择）设置RTC时钟源。

.. _中断配置与清除-2:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^

可通过配置中断使能寄存器IE相应位使能中断。当计数到设定时间时，中断标志寄存器IF对应位置1。如需清除此标志，需在对应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

1. **寄存器映射**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - RTCBASE：0 |x4004B800
     - |
     -
     -
     -

   * - MINSEC
     - 0x00
     -
     - 0x00
     - 分秒计数寄存器             |

   * - DATHUR
     - 0x04
     -
     - 0x00
     - 日时计数寄存器             |

   * - MONDAY
     - 0x08
     -
     - 0x00
     - 月周计数寄存器             |

   * - YEAR
     - 0x0C
     -
     - 0x000
     - 年计数寄存器               |

   * - MINSECAL
     - 0x10
     -
     - 0x00
     - 分秒闹铃设置寄存器         |

   * - DAYHURAL
     - 0x14
     -
     - 0x00
     - 周时闹铃设置寄存器         |

   * - LOAD
     - 0x18
     -
     - 0x00
     - 初始化计数器               |

   * - IE
     - 0x1C
     -
     - 0x00
     - 中断使能寄存器             |

   * - IF
     - 0x20
     -
     - 0x00
     - 中断标志寄存器             |

   * - EN
     - 0x24
     -
     - 0x00
     - RTC使能寄存器              |

   * - CFGABLE
     - 0x28
     -
     - 0x00
     - 配置状态寄存器             |

   * - TRIM
     - 0x2C
     -
     - 0x00
     - 时钟调整寄存器             |

   * - TRIMM
     - 0x30
     -
     - 0x00
     - 时钟微调整寄存器           |

   * - CALIBREFCNT
     - 0X60
     -
     - 0X00
     - Refclk时钟下cnt_ref_target |

   * - CALIBEN
     - 0X64
     -
     - 0X00
     - 使能rtc校正                |

   * - CALIBSR
     - 0x68
     -
     - 0x00
     - 校正状态寄存器             |


2. **寄存器描述**

**分秒计数寄存器MINSEC**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - MINSEC
     - 0x00
     -
     - 0x00
     - 分秒计数寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - MIN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11:6
     - MIN
     - 计时器分钟计数                              |

   * - 5:0
     - SEC
     - 计时器秒计数                                |


**日时计数寄存器DATHUR**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATHUR
     - 0x04
     -
     - 0x20
     - 日时计数寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATE
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9:5
     - DATE
     - 计时器天计数                                |

   * - 4:0
     - HOUR
     - 计时器小时计数                              |


**月周计数寄存器MONDAY**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - MONDAY
     - 0x08
     -
     - 0x08
     - 月周计数寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - MON
     -
     -
     -
     - DAY
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:7
     - -
     - -

   * - 6:3
     - MON
     - 计时器月计数                                |

       0000：保留                                  |

       0001：1月                                   |

       0010：2月                                   |

       0011：3月                                   |

       0100：4月                                   |

       0101：5月                                   |

       0110：6月                                   |

       0111：7月                                   |

       1000：8月                                   |

       1001：9月                                   |

       1010：10月                                  |

       1011：11月                                  |

       1100：12月                                  |

       1101：保留                                  |

       1110：保留                                  |

       1111：保留                                  |

   * - 2:0
     - DAY
     - 计时器周计数                                |

       000：表示周日                               |

       001：表示周一                               |

       010：表示周二                               |

       011：表示周三                               |

       100：表示周四                               |

       101：表示周五                               |

       110：表示周六                               |


**年计数寄存器YEAR**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - YEAR
     - 0x0C
     -
     - 0x7df
     - 年计数寄存器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - YEAR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11:0
     - YEAR
     - 计时器年计数。支持1901-2199                 |


**分秒闹铃设置寄存器MINSECAL**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - MINSECAL
     - 0x10
     -
     - 0x00
     - 分秒闹铃设置寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - MIN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11:6
     - MIN
     - 定时器分钟设置                              |

   * - 5:0
     - SEC
     - 定时器秒设置                                |


**周时闹铃设置寄存器DATHURAL**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DAYHURAL
     - 0x14
     -
     - 0x00
     - 周时闹铃设置寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     - FRI
     -
     - WED

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - TUE
     - MON
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11
     - SAT
     - 定时器周设置,设置为周六                     |

   * - 10
     - FRI
     - 定时器周设置,设置为周五                     |

   * - 9
     - THU
     - 定时器周设置,设置为周四                     |

   * - 8
     - WED
     - 定时器周设置,设置为周三                     |

   * - 7
     - TUE
     - 定时器周设置,设置为周二                     |

   * - 6
     - MON
     - 定时器周设置,设置为周一                     |

   * - 5
     - SUN
     - 定时器周设置,设置为周日                     |

   * - 4:0
     - HOUR
     - 定时器小时设置                              |


**初始化寄存器LOAD**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - LOAD
     - 0x18
     -
     - 0x00
     - 初始化计数器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 1
     - ALARM
     - 将MISEAL和WEHOAL寄存器装载到alarm同步       | ，持续到rtcclk的上升沿来临，自动清零，AC |

   * - 0
     - TIME
     - 将MINSEC、DATHUR、MONDAY、YEAR              | 载到相关cnt计数器，将TRM和TRMM的值装载到 | ecnt中，持续到rtcclk的上升沿来临，自动清零  |


*注*\ ：

需要在MINSEC、DATHUR、MONDAY、YEAR、TRIM和TRIMM配置完成后，再配置TIME信号；

需要在MINSECAL和DATHURAL配置完成后，再配置ALARM信号。

若配置TIME之后，需要关闭pclk，则只需要等待TIME=0之后，再关闭pclk。

**中断使能寄存器IE**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x1C
     -
     - 0x00
     - 中断使能寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - QSEC
     - HSEC
     -
     -
     -
     -
     -
     - SEC


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - QSEC
     - 四分之一秒中断使能                          |

       1：使能                                     |

       0：禁能                                     |

   * - 6
     - HSEC
     - 半秒中断使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - TRIM
     - Rtc_calib中断使能                           |

       1：使能                                     |

       0：禁能                                     |

   * - 4
     - ALARM
     - 闹钟中断使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - DATE
     - 天中断使能                                  |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - HOUR
     - 小时中断使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - MIN
     - 分钟中断使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - SEC
     - 秒中断使能                                  |

       1：使能                                     |

       0：禁能                                     |


**中断标志寄存器IF**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x20
     -
     - 0x00
     - 中断标志寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - QSEC
     - HSEC
     -
     -
     -
     -
     -
     - SEC


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - QSEC
     - 四分之一秒中断状态，R/W1C                   |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - HSEC
     - 半秒中断状态，R/W1C                         |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - TRIM
     - Rtc_calib中断状态，写1清零                  |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - ALARM
     - 闹钟中断状态，写1清零                       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - DATE
     - 天中断状态，写1清零                         |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - HOUR
     - 小时中断状态，写1清零                       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - MIN
     - 分钟中断状态，写1清零                       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - SEC
     - 秒中断状态，写1清零                         |

       1：中断已发生                               |

       0：中断未发生                               |


**RTC使能寄存器EN**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - EN
     - 0x24
     -
     - 0x01
     - RTC使能寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - EN
     - RTC使能寄存器                               |

       1：使能                                     |

       0：禁能                                     |


**配置状态寄存器CFGABLE**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CFGABLE
     - 0x28
     -
     - 0x00
     - 配置状态寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - C BLE


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - CFGABLE
     - 寄存器可配置指示。                          |

       如果需要更改RTC的寄存器时                   | 先查询此寄存器，当CFGABLE为1时，尽快配置 | 的寄存器（IE和IF的配置不需要关注这一位） |


**时钟调整寄存器TRIM**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TRIM
     - 0x2C
     -
     - 0x0
     - 时钟调整寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     - DEC

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ADJ
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:9
     - -
     - -

   * - 8
     - DEC
     - 用于调                                      | SECNT的计数周期，默认为32768，如果DEC为1， | 周期调整为32768-ADJ，否则调整为32768+ADJ |

   * - 7:0
     - ADJ
     -


**时钟微调整寄存器TRIMM**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TRIMM
     - 0x30
     -
     - 0x0
     - 时钟微调整寄存器           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - INRC
     - 用于计数周期                                | （n个周期调整一次<n=2-8>），如果inrc为1  | ，则第n个计数周期                           | (32768±ADJ)-1,否则调整为(32768±ADJ)+1；  |

       (cycles=0时，不进行微调整；                 | les=1，则n为2；cycles=7，则n为8；以此类推)  |

   * - 2:0
     - CYCLES
     -


**目标值寄存器CALIBREFCNT**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CALIBREFCNT
     - 0X60
     -
     - 0X0
     - Refclk时钟下cnt_ref_target |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     - C BR NT
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CALIBREFCNT
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CALIBREFCNT
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:21
     - -
     - -

   * - 20:0
     - CALIBREFCNT
     - 参考时钟下，cnt_ref计时500ms，应计目标值    |


**使能rtc校正寄存器CALIBEN**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CALIBEN
     - 0X64
     -
     - 0X0
     - 使能rtc校正                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - c ble


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - cenable
     - Rtc时钟校正                                 |

       1：使能                                     |

       0：失能                                     |


**校正状态寄存器CALIBST**

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CALIBSR
     - 0x68
     -
     - 0x0
     - 校正状态寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 2
     - flag
     - Rtc正在校正                                 |

   * - 1
     - fail
     - rtc校正失败                                 |

   * - 0
     - done
     - rtc校正完成                                 |


UART接口控制器（UART）
--------------------------------

.. _概述-6:

概述
~~

不同型号具备UART数量可能不同。使用前需使能对应UART模块时钟。

UART模块支持波特率配置，最高速度可达到模块时钟16分频。具备深度为8的FIFO，同时提供了多种中断供选择。

.. _特性-6:

 特性
 ~~~~~~~~~~~~

-  支持标准的UART协议

-  支持全双工模式

-  支持波特率可配置

-  支持8位/9位数据格式选择

-  可配置的奇偶校验位

-  支持1位/2位停止位选择

-  支持波特率自动调整

-  深度为8字节的发送和接收FIFO

-  支持break操作自动检测

-  支持接收超时中断

-  支持LIN模式

-  支持发送/接收数据LSB/MSB选择

-  支持发送/接收数据电平反向

.. _模块结构框图-4:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur023|

图 6‑22 UART模块结构图

.. _功能描述-7:

功能描述
~~~~~~~~~~~~~~

数据格式及波特率配置
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

数据位

可以通过向CTRL寄存器的NINEBIT位写1，选择支持9位数据模式。该位默认为0，即8位数据模式

奇偶校验位

CTRL寄存器PAREN位使能奇偶校验，PARMD 位选择奇偶校验模式，分别有奇校验、偶校验、常1、常0等四种校验格式，根据需求可以灵活选择配置具体看下表：

.. list-table::
   :widths: 25 25 25 25
   :header-rows: 0


   * - 校验类型     |
     - CTRL[21]     |
     - CTRL[20]     |
     - CTRL[19]   |

   * - 无校验       |
     - x            |
     - x            |
     - 0          |

   * - 奇校验       |
     - 0            |
     - 0            |
     - 1          |

   * - 偶校验       |
     - 0            |
     - 1            |
     - 1          |

   * - 校验位常为1  |
     - |
     - |
     - |

   * - 校验位常为0  |
     - |
     - |
     - |


停止位

停止位位数默认为1位，可通过向CTRL寄存器STOP2B位选择停止位位数为2位。

字符格式如图 6‑23所示：

|Featur024|

图 6‑23 UART字符格式

使能波特率配置后，对BAUD寄存器BAUD位写入特定值，配置波特率。

配置方式如下：

目标波特率 = 系统主时钟 / (16 \* (BAUD+ FRAC + 1))

波特率配置完成后，需将CTRL寄存器EN位使能，使能UART模块，使波特率配置生效。

自动波特率功能
^^^^^^^^^^^^^^^^^^^^^^^^^

UART自动波特率功能可以自动测量UART_RX脚输入数据的波特率。当自动波特率测量完成后，测量的结果保存在BAUD寄存器的BAUD位。

自动波特率的检测时间，从UART_RX数据的起始位到第一个上升沿的时间，通过配置BAUD寄存器ABRBIT位设定即2 :sup:`ABRDBITS`\
位时间。配置BAUD寄存器ABREN位，使能自动波特率检测功能。初始阶段，RXD保持为1，一旦检测到下降沿，即为接收到起始位，自动波特率计数器开始计数，当检测到第一个上升沿时，自动波特率计数器停止计数。

自动波特率计数值除以检测时间长度的结果保存在BAUD位，ABREN位清零。

当自动波特率计数器溢出，BAUD寄存器的ABRERR置1，调节失败，写1清零。

配置流程：

-  选择检测时间的长度，配置BAUD寄存器ABRBIT位

-  配置BAUD寄存器ABREN位，使能自动波特率检测功能

-  等待接收调节的数据，查看BAUD寄存器ABREN位，清零表示波特率检测完成

-  查看BAUD寄存器ABRERR位，查看自动调节波特率时计数器是否溢出

-  如果数据未溢出，则表示成功

|Featur025|

图 6‑24 自动波特率示意图

FIFO及中断设置
^^^^^^^^^^^^^^^^^^^^^^^^^^^

UART模块包含深度为8的接收FIFO及发送FIFO，同时提供了与FIFO相配合的状态位中断，供操作使用。使用方式如下：

-  通过FIFO寄存器配置中断触发条件，并获取FIFO内部数据数量

   -  TXTHR位设置发送FIFO阈值，当TXFIFO中数据量不超过设置值时，触发中断。当TXTHR位配置为0且使能CTRL中TXIE发送端FIFO中断时，UART使能后即触发发送中断

   -  RXTHR位设置接收FIFO阈值，当RXFIFO中数据量不小于设置值时，触发中断。当RXTHR位配置为0且使能CTRL中RXIE发送端FIFO中断时，UART使能后接收到1个数据值即触发接收中断

-  通过CTRL寄存器RXIE位及TXIE位，使能FIFO中断

-  通过查询BAUD寄存器RXTHRF或TXTHRF位获取FIFO状态

数据发送及接收
^^^^^^^^^^^^^^^^^^^^^^^^^

将控制及状态寄存器（CTRL）EN位置1后，对应UART模块使能

对于发送操作：

-  向DATA寄存器写入数据，数据发送至UART_TX线

-  通过读取CTRL寄存器TXIDLE位状态，获取当前发送状态

-  可通过读取BAUD寄存器TXD位，获取当前TX线实时状态

对于接收操作：

-  通过判断DATA寄存器中VAILD位，判断是否接收到有效数据

-  读取DATA寄存器，可获得UART_RX线接收的数据

-  可通过读取BAUD寄存器RXD位，获取当前RX线实时状态

-  可设置接收超时中断。使能后，当接收相邻两个数据间隔时长超过设置时长时，将触发中断

电平反向
^^^^^^^^^^^^^^^^^^^^^^

通过设置CFG寄存器的TXINV位及RXINV位，分别对TX和RX线设置取反，设置后电平立刻生效

大小端控制
^^^^^^^^^^^^^^^^^^^^^^^

通过CFG寄存器的MSBF位进行配置，设置数据传输是从高位(MSB)开始传输还是从低位(LSB)开始传输。

LIN Fram
^^^^^^^^^^^^^^^^^^^^^^^^^^

UART支持LIN功能。在主机模式下，支持LIN_BREAK产生，在 从机模式下，支持LIN_BREAK检测。报文是以报文帧的格式传输和发送。报文帧 由主机节点发送的报文头和从机发送的应答组成。报文帧的报头包括break域，同步域和帧识别码（帧ID）。帧
ID仅作为定义帧的用途，从机负责响应相关的帧ID,响应由数据域和校验域组成。

|Featur026|

图 6‑25 LIN Fram示意图

当使用LIN Fram时，可通过LINCR寄存器进行相关设置。

发送操作：

与正常的UART发送相比，选用LIN Fram发送时，除了基本操作步骤外，还需：

-  通过CTRL寄存器将GENBRK位置1，拉低TX线。该位保持为1时，TX将持续保持低电平，直至该位清除

-  通过LINCR寄存器将GENBRKIE位置1，使能Break信号发送完成中断

-  设置LINCR寄存器GENBRK，发送Break信号至总线

-  Break信号发送完成后，中断产生，LINCR寄存器GENBRKIF位置1。可通过读此寄存器判断是否发送完成

注意：发送BREAK信号时，向DATA寄存器写入数据，数据同样会执行发送操作，但数据电平不会体现到TX线上，除非发送数据期间清除CTRL寄存器GENBRK位。

接收操作：

与正常的UART接收相比，选用LIN Fram接收时，除了基本操作步骤外，还需：

-  通过LINCR寄存器将BRKIE位置1，使能检测到Break信号中断

-  设置CTRL寄存器BRKIE位及BRKDET位，当RX线接收到Break信号时，将触发中断

-  检测到Break信号并产生中断后，LINCR寄存器BRKDETIE位置1。可通过读此寄存器判断是否检测到Break信号

当Break信号不够长时，丢弃Break，BRKDETIF不置1，如图 6‑26所示：

|Featur027|

图 6‑26 Break信号不够长示意图

当Break信号恰好够长时，等接收线上收到高电平后，检测到Break，BRKDETIF置1，如图 6‑27所示：

|Featur028|

图 6‑27 Break信号恰好够长示意图

当Break信号足够长时，等接收线上收到高电平后，检测到Break，LINBRKST置1，如图 6‑28所示：

|Featur029|

图 6‑28 Break信号足够长示意图

**硬件流控**

硬件流控（RTS/CTS）制主要功能为防止串口传输时出现丢失数据的现象，使用流控制功能时需将通信两端的RTS和CTS对应相连，通过RTS和CTS可以控制两个串口设备间的串行数据流。

**RTS流控制**

RTS为输出信号，通过自动流控控制寄存器使能该信号并设置有效极性（高电平/低电平）以及触发阈值，当RTS为有效电平时表示可以接收数据，当接收数据达到所设置的阈值时，RTS无效。

**CTS流控制**

CTS为输入信号，通过自动流控控制寄存器使能该信号并设置有效极性（高电平/低电平），当RTS为有效电平时表示可以发送数据。

|Featur030|

图 6‑29硬件流控

接收中断与超时中断
^^^^^^^^^^^^^^^^^^^^^^^^^^^

以如下配置为例：

方式一：FIFO清空后，不产生超时中断

-  配置FIFO寄存器RXLVL位为3，即RXThreshold=3，接收FIFO取值3

-  配置CTRL寄存器RXIE位为1，即RXThresholdIEn=1，配置接收FIFO中的个数> RXThreshold时触发中断

-  配置TOCR寄存器TIME位为10，即TimeoutTime = 10，超时时长 = TimeoutTime/(Baudrate/10) 秒

-  配置UARTx.TOCR寄存器MODE位为0，FIFO清空后，不产生超时中断

-  配置CTRL寄存器TOIE位为1，即TimeoutIEn = 1，超时中断，超过TimeoutTime/(Baudrate/10) 秒没有在RX线上接收到数据且接收FIFO中数据个数不为零时可触发中断

对方发送8个数据

|Featur031|

图 6‑30 对方发送8个数据接收FIFO示意图

每接收到一个数据，RX FIFO中数据个数加一，当RX FIFO中数据个数大于RXThreshold时，触发接收中断。

   **对方发送9个数据**

   |Featur032|

图 6‑31 对方发送9个数据接收FIFO示意图

只有当接收FIFO中有数据，且在指定时间内未接收到新的数据时，才会触发超时中断。

若应用中希望通过数据间时间间隔作为帧间隔依据，即不管对方发送过来多少个数据，最后都能产生超时中断，可以通过在接收ISR中从RX FIFO中读取数据时总是少读一个（即让一个数据留在RX FIFO中）来实现。

**方式二：无论FIFO是否清空，间隔指定时间后均产生超时中断**

-  配置FIFO寄存器RXLVL位为3，即RXThreshold=3，接收FIFO取值3

-  配置CTRL寄存器RXIE位为1，即RXThresholdIEn=1，配置接收FIFO中的个数> RXThreshold时触发中断

-  配置TOCR寄存器TIME位为10，即TimeoutTime = 10，超时时长 = TimeoutTime/(Baudrate/10) 秒

-  配置UARTx.TOCR寄存器MODE位为1，无论FIFO是否清空，间隔指定时间后均产生超时中断

-  配置CTRL寄存器TOIE位为1，即TimeoutIEn = 1，超时中断，超过 TimeoutTime/(Baudrate/10) 秒没有在RX线上接收到数据时可触发中断

无论接收FIFO中是否有数据，只要在指定时间内未接收到新的数据时，就会触发超时中断。

发送中断
^^^^^^^^^^^^^^^^^^^^^^

以如下配置为例：

-  配置FIFO寄存器TXLVL位为3，即TXThreshold = 4，发送FIFO取值4

-  配置CTRL寄存器TXIE位为1，即TXThresholdIEn = 1，配置发送FIFO中的个数> TXThreshold时触发中断

|Featur033|

图 6‑32 发送FIFO示意图

每发送出一个数据，TX FIFO中数据个数减1，当TX FIFO中数据个数小于等于TXThreshold时，触发发送中断。

如果初始化时TX FIFO中数据个数为零，则开启发送中断后会立即触发发送中断。建议在发送FIFO填入数据后再开启发送中断。

中断清除
^^^^^^^^^^^^^^^^^^^^^^

此模块中中断状态位详见寄存器中各个中断标志位属性，当其中断标志位属性为R/W1C时，如需清除此标志，需在对应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入；当其中断标志位属性为AC时，表示此中断状态位会自动清零；当其中断标志位属性为RO时，表示此标志位会随着水位的变化而改变，标志位只
与其当前状态有关，不需要清除。具体详见寄存器描述。

.. _寄存器映射-5:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
     - |
     - 描述                       | | | |

   * - UART0BASE： |0x40042000UART1BASE： |0x40042800UART2BASE： |0x40043000UART3BASE： |0x40043800
     - |     |     |     |
     -
     -
     -

   * - DATA
     - 0x00
     -
     - 0x0
     - UART数据寄存器             |

   * - CTRL
     - 0x04
     -
     - 0x1
     - UART控制及状态寄存器       |

   * - BAUD
     - 0x08
     -
     - 0x 04000
     - UART波特率控制寄存器       |

   * - FIFO
     - 0x0C
     -
     - 0x0
     - UART数据队列寄存器         |

   * - LINCR
     - 0x10
     -
     - 0x0
     - LIN Frame控制寄存器        |

   * - CTSCR/RTSCR
     - 0x14
     -
     - 0x0
     - 自动流控控制寄存器         |

   * - CFG
     - 0x18
     -
     - 0x335
     - CFG 寄存器                 |

   * - TOCR
     - 0x1C
     -
     - 0x0
     - 接收超时控制寄存器         |


.. _寄存器描述-5:

寄存器描述
~~~~~~~~~~~~~~~

数据接口寄存器DATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA
     - 0x00
     -
     - 0
     - UART数据寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:11
     - -
     - -

   * - 10
     - PARERR
     - 当前读回的的数据是否存在校验错误，RO        |

       1：存在                                     |

       0：不存在                                   |

   * - 9
     - VALID
     - 数据有效位，RO                              |

       1：DATA字段有有效的接收数据                 |

       0：DATA字段无有效的接收数据                 |

       当DATA字段有有效                            | 数据时，该位硬件置1，读取数据后自动清零  |

   * - 8:0
     - DATA
     - UART数据位                                  |

       读操作：返回缓存中接收到的数据              |

       写操作：将待发送的数据写入缓存中            |


控制及状态寄存器CTRL
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTRL
     - 0x04
     -
     - 1
     - UART控制及状态寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - STOP2B
     -
     -
     -
     -
     - N BIT
     - G RK
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BRKDET
     - TOIE
     - -
     -
     -
     -
     - EN
     - -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - TXDOIE
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:22
     - STOP2B
     - 停止位模式                                  |

       00：1位                                     |

       01：2位                                     |

       1x：保留                                    |

   * - 21:20
     - PARMD
     - 奇偶校验位模式                              |

       00：奇校验                                  |

       01：偶校验                                  |

       10：常1                                     |

       11：常0                                     |

   * - 19
     - PAREN
     - 奇偶校验使能位                              |

       1：使能                                     |

       0：禁能                                     |

   * - 18
     - NINEBIT
     - 数据位模式                                  |

       1：9位数据位                                |

       0：8位数据位                                |

   * - 17
     - GENBRK
     - Generate LIN Break，发送LIN Break           |

       0：正常发送数据                             |

       1：将UART_TX_OUT管脚拉低                    |

   * - 16
     - BRKIE
     - LIN Break Detect 中断使能                   |


       接收到BREAK时，BREAKDET状态反应到中断输出 |

       0：接收到BREAK时，不产生中断信号            |

   * - 15
     - BRKDET
     - LIN Break Detect，检测到LIN                 | Break，即RX线上检测到连续11位低电平         |

       1：接收到BREAK                              |

       0：没有接收到BREAK                          |

   * - 14
     - TOIE
     - 1：超时产生中断                             |

       0：超时不产生中断                           |

   * - 13:11
     - -
     - -

   * - 10
     - LOOP
     -

   * - 9
     - EN
     - UART模块使能位                              |

       1：使能                                     |

       0：禁能                                     |

   * - 8:7
     - -
     - -

   * - 6
     - TXDOIE
     - 发送完成中断使能位                          |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - RXOV
     - 接收端FIFO溢出标志位，W1C                   |

       1：接收FIFO溢出                             |

       0：接收FIFO没有溢出                         |

   * - 4
     - RXIE
     - 接收端FIFO中断使能位                        |

       1：接收FIFO达到预定的数量时产生中断         |

       0：接收FIFO达到预定的数量时不产生中断       |

       注                                          | FIFO中此位为0表示接收到1个数据，依次类推 |

   * - 3
     - RXNE
     - 接收端FIFO非空标志位，RO                    |

       1：非空                                     |

       0：空                                       |

   * - 2
     - TXIE
     - 发送端FIFO中断使能位                        |


       当发送FIFO内的数据少于预定的数量时产生中断 |

       0 送FIFO内的数据少于预定的数量时不产生中断 |


       送FIFO中此位为0表示发送0个数据，依次类推 |

   * - 1
     - TXFF
     - 发送端FIFO满标志位，RO                      |

       1：发送FIFO内的数据满                       |

       0：发送FIFO内的数据不满                     |

   * - 0
     - TXIDLE
     - 发送线空闲标志位，RO                        |

       1：发送线空闲                               |

       0：发送线忙，正在发送数据                   |


波特率寄存器BAUD
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BAUD
     - 0x08
     -
     -
     - UART波特率控制寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - FRAC
     -
     -
     -
     -
     -
     - A IT
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ABREN
     - RXIF
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - RXD
     - TXD
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - BAUD
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - FRAC
     - 波特率设置                                  | 波特率分频值的小数部分）,参考BAUD的设置  |

   * - 27
     - TXDOIF
     - 发送完成中断状态位                          |

       1：中断已产生                               |

       0：中断未产生                               |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

   * - 26
     - ABRERR
     - 自动调节波特率时，计数器溢出中断标志，R/W1C |

       1：自动调节波特率时，计数器溢出，调节失败。 |

       0：自动调节波特率时，计数器没有溢出。       |

   * - 25:24
     - ABRBIT
     - 自动调节波特率时，检测的时间长度            |

       00：1位长度                                 |

       01：2位长度                                 |

       10：4位长度                                 |

       11：8位长度                                 |

   * - 23
     - ABREN
     - 1：打开波特率自动调节功能。                 |

       0：关闭波特率自动调节功能。                 |

       调节完成自动清零，R/W，AC                   |

   * - 22
     - RXIF
     - 1：接收数据缓存达到预定数量                 |

       0：接收数据缓存未达到预定数量               |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

   * - 21
     - TOIF
     - 1：接收数据超出TIME确定的时间               |

       0：接收数据未超出TIME确定的时间             |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

       超过 TOTIME/BAUDRAUD                        |

       接收到新的数据时若TOIE=1，此位由硬件置位 |

   * - 20
     - TXTHRF
     - TX FIFO Threshold Flag，TX                  | FIFO中数据少于设定个数（TXLVL <=            | TXTHR）时硬件置1                            |

       1：发送数据缓存达到预定数量                 |

       0：发送数据缓存未达到预定数量               |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

   * - 19
     - RXTHRF
     - RX FIFO Threshold Flag，RX                  | FIFO中数据达到设定个数（RXLVL >             | RXTHR）时硬件置1                            |

       1：接收数据缓存达到预定数量                 |

       0：接收数据缓存未达到预定数量               |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

   * - 18
     - BRKIF
     - LIN Break Detect 中断标志，检测到LIN        | Break时若BRKIE=1，此位由硬件置位            |

       当                                          | BREAK字符时，如果BREAKIRQON为1，该位为1  |

   * - 17
     - TXIF
     - 1：发送数据缓存内的数据少于预定的数量       |

       0：发送数据缓存内的数据大于预定的数量       |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

   * - 16
     - RXTOIF
     - 接收或超时中断标志                          |

       11：中断已产生                              |

       0：中断未产生                               |

       RO，表示此标志位会随着水位的变              | 变，标志位只与其当前状态有关，不需要清除 |

   * - 15
     - RXD
     - 直接读取接收线状态，RO                      |

   * - 14
     - TXD
     - 直接读取发送线状态，RO                      |

   * - 13:0
     - BAUD
     - 用于控制UART工作的波特率                    |

       得到的波特率为：系统主时钟 / (BAUD.BAUD     | \*16 +BAUD.FRAC + 1)

       可通过BAUD寄存器                            | C位进行波特率微调，使波特率的误差在5%以内。 |


数据队列寄存器FIFO
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - FIFO
     - 0x0C
     -
     - 0
     - UART数据队列寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - -
     - -

   * - 27:24
     - TXTHR
     - 设置发送FIFO中断（TXIF）阈值                |


       当发送FIFO里的水位小于等于设置值时产生中断 |

       0 送FIFO里的水位小于等于设置值时不产生中断 |

   * - 23:20
     - -
     - -

   * - 19:16
     - RXTHR
     - 设置接收FIFO中断（RXIF）阈值                |

       1：当接收FIFO里的水位大于设置值时产生中断   |

       0：当接收FIFO里的水位大于设置值时不产生中断 |

   * - 15:12
     - -
     - -

   * - 11:8
     - TXLVL
     - 发送缓存的实际水位                          |

   * - 7:4
     - -
     - -

   * - 3:0
     - RXLVL
     - 接收缓存的实际水位                          |


LIN Frame控制寄存器LINCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - LINCR
     - 0x10
     -
     - 0x0
     - LIN Frame控制寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - GE KIF
     - GE KIE
     - BR TIF
     - BR TIE


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - GENBRK
     - 发送LIN Break                               |

       1：发送                                     |

       0：不发送                                   |

       发送完成自动清零，R/W，AC                   |

   * - 3
     - GENBRKIF
     - LIN Break发送完成中断状态，R/W1C            |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 2
     - GENBRKIE
     - 发送LIN Break完成中断的使能                 |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - BRKDETIF
     - 检测到LIN Break中断状态，R/W1C              |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 0
     - BRKDETIE
     - 检测到LIN Break中断的使能                   |

       1：使能                                     |

       0：禁能                                     |


自动流控控制寄存器CTSCR/ RTSCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTSCR/RTSCR
     - 0x14
     -
     - 0x0
     - 自动流控控制寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CTSCR_STAT
     - RTS CR_THR
     -
     -
     - RTS POL
     - CTS POL
     - RT _EN
     - CT _EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:9
     - -
     - -

   * - 8
     - RTSCR_STAT
     - RTS的当前状态，RO                           |

   * - 7
     - CTSCR_STAT
     - CTS的当前状态，RO                           |

   * - 6:4
     - RTSCR_THR
     - RTS流控的触发阈值                           |

       000：触发                                   | 1byte，内部缓存的剩余空间最多只剩1个BYTE |

       001：触发阈                                 | bytes，内部缓存的剩余空间最多只剩2个BYTE  |

       010：触发阈                                 | bytes，内部缓存的剩余空间最多只剩4个BYTE  |

       011：触发阈                                 | bytes，内部缓存的剩余空间最多只剩6个BYTE  |

   * - 3
     - RTSCR_POL
     - RTS信号的极性                               |

       1：高有效，rts输出高，可以接收数据          |

       0：低有效，rts输出低，可以接收数据          |

   * - 2
     - CTSCR_POL
     - CTS信号的极性。                             |

       1：高有效，cts输入为高，可以发送数据        |

       0：低有效，cts输入为低，可以发送数据        |

   * - 1
     - RTSCR_EN
     - RTS流控使能                                 |

       1：rts信号发挥流控的作用                    |

       0：忽略rts                                  |

   * - 0
     - CTSCR_EN
     - CTS流控使能                                 |

       1：cts信号发挥流控的作用                    |

       0：忽略cts                                  |


配置寄存器CFG
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CFG
     - 0x18
     -
     - 0
     - CFG 寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - BR LEN
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - BRKRXLEN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11
     - TXINV
     - 1：发送时电平取反                           |

       0：发送时电平不取反                         |

   * - 10
     - RXINV
     - 1：接收时电平取反                           |

       0：接收时电平不取反                         |

   * - 9:6
     - BRKRXLEN
     - 接收BRK的判定长度。                         |

       0000：表示收到1 bit的0                      |

       0001：表示收到2 bit的0                      |

       N：表示收到（n+1）bit的0                    |

       1111：表示收到16bit的0                      |

   * - 5:2
     - BRKTXLEN
     - 发送BRK的长度。                             |

       0001：表示发送1bit的0                       |

       0010：表示发送2bit的0                       |

       n：表示发送n bit的0                         |

       1111：表示发送15bit的0                      |

   * - 1
     - MSBF
     - 1：发送和接收时MSB在前                      |

       0：发送和接收时LSB在前                      |

   * - 0
     - RXEN
     - 接收打开使能                                |

       1：接收打开。可接收外来的数据。             |

       0：接收                                     | 不能接收外来的数据。接收的数据一直是1。  |


接收超时控制寄存器TOCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TOCR
     - 0x1C
     -
     - 0x0
     - 接收超时控制寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - TIME
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:14
     - -
     - -

   * - 13
     - IFCLR
     - 超时计数器清零，写1清除中断，R/W1C          |

   * - 12
     - MODE
     - 1：                                         | IFO是否清空，间隔指定时间后均产生超时中断 |

       0：FIFO清空后，不产生超时中断               |

   * - 11:0
     - TIME
     - 接收数据超时中断的触发条件。                |

       计时单位为10个SYMBOL TIME                   |

       具体和实际波特率的设                        | 。如波特率为9600，则计时单位为1/960秒。  |


I2C总线控制器（I2C）
------------------------------

.. _概述-7:

概述
~~~~~~~~~~~~

SWM241系列所有型号I2C操作均相同，不同型号I2C模块数量可能不同。使用前需使能对应I2C模块时钟。

I2C模块提供了MASTER模式及SLAVE模式，基本操作及配置详见功能描述章节。

.. _特性-7:

特性
~~~~~~~~~~~~

-  支持通过APB总线进行配置

-  支持master、slave两种模式

-  支持I2C输入信号数字滤波

-  支持Standard-mode（100kbps）、Fast-mode（400kbps）、Fast-mode Plus（1Mbps）、High-speed mode（3.4Mbps）

-  SCL/SDA线上数据可读

-  Master模式特性：

   -  支持clock synchronization

   -  支持多master总线仲裁

   -  支持clock stretching，slave器件可通过拉低SCL来hold总线

   -  支持SCL LOW超时报警

   -  支持读、写操作

   -  支持发出的SCL时钟周期最大为（2^17）\*pclk

   -  SCL时钟占空比可配置

-  Slave模式特性：

   -  支持多slave

   -  支持7位、10位两种地址模式

   -  支持地址mask，一个slave器件可以占用多个地址

      -  7位地址模式，一个slave器件最多可占用128个地址

      -  10位地址模式，一个slave器件最多可占用256个地址

   -  支持clock stretching，slave器件可通过拉低SCL来hold总线

   -  支持读、写操作

.. _模块结构框图-5:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur034|

图 6‑33 I2C模块结构框图

*注：I2CxDATA主机模式下是MSTDAT，从机模式下写入、读出时分别是SLVTX、SLVRX*

.. _功能描述-8:

功能描述
~~~~~~~~~~~~~~

总线设置

I2C总线采用串行数据线(SDA)和串行时钟线(SCL)传输数据。I2C总线的设备端口为开漏输出，必须在接口外接上拉电阻。

数据在主从设备之间通过SCL时钟信号在SDA数据线上逐字节同步传输。每一个SCL时钟脉冲发送一位数据，高位在前。每发送一个字节的数据产生一个应答信号。在时钟线SCL高电平期间对数据的每一位进行采样。数据线SDA在时钟线SCL为低改变，在时钟线SCL为高电平时保持稳定。

协议介绍

通常情况下，一个标准的通信包含四个部分：开始信号、从机地址、数据传输、停止信号。如图 6‑34所示：

|Featur035|

图 6‑34 I2C通信示意图

起始位发送

当总线空闲时，表示没有主机设备占用总线（SCL和SDA都保持高电平），主机可以通过发送一个起始信号启动传输。启动信号，通常被称为S位。SCL为高电平时，SDA由高电平向低电平跳变。启动信号表示开始新的数据传输。

重新启动是没有先产生一个停止信号的启动信号。主机使用此方法与另一个从机或者在不释放总线的情况下与相同的从机改变数据传输方向（例如从写入设备到写入设备的转换）。

当命令寄存器的STA位被置位，同时RD或者WR位被置位时，系统核心产生一个启动信号。根据SCLK的当前的不同状态，生成启动信号或重复启动信号。

地址发送

在开始信号后，由主机传输的第一个字节数据是从机地址。包含7位的从设备地址和1位的RW指示位。RW指示位信号表示与从机的数据传输方向。在系统中的从机不可以具有相同的地址。只有从机地址和主机发送的地址匹配时才能产生一个应答位（在第九个时钟周期拉低SDA）进行响应。对于10位从机地址，模块通过产生两个从机
地址支持。

发送从机地址为一次写操作，在传输寄存器中保存从机地址并对WR位置位，从机地址将被发送到总线上。

数据发送

一旦成功取得了从机地址，主机就可以通过R/W位控制逐字节的发送数据。每传输一个字节都需要在第九个时钟周期产生一个应答位。

如果从机信号无效，主机可以生成一个停止信号中止数据传输或生成重复启动的信号并开始一个新的传输周期。如果从机返回一个NACK信号，主机就会产生一个停止信号放弃数据传输，或者产生一个重新启动信号开始一个新的传输周期。

如果主机作为接收设备，没有应答从机，从机就会释放SDA，主机产生停止信号或者重新启动信号。

向从机写入数据，需把将要发送的数据存入传输寄存器中并设置WR位。从从机中读取数据，需设置RD位。在数据传输过程中系统核心设置TIP提示标志，指示传输正在进行。当传输完成后TIP提示标志会自动清除。当中断使能时，中断标志位IF被置位，并产生中断。当中断标志位IF被置位后，接收寄存器收到有效数据。当TI
P提示标志复位后，用户可以发出新的写入或读取命令。

停止位发送

主机可以通过生成一个停止信号终止通信。停止信号通常被称为P位，被定义为SCL为高电平时，SDA由低电平向高电平跳变。

Master SCL周期配置
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

|Featur036|

图 6‑35 Master SCL周期配置示意图

主机发送模式
^^^^^^^^^^^^^^^^^^^^^^^^

I2C模块作为主机，初始化配置操作如下：

-  配置PORTCON模块中端口对应PORTX_FUNC寄存器，将指定引脚切换为功能复用

-  配置PORTCON模块中端口对应PULLU_x上拉使能寄存器，使能端口内部上拉电阻（也可使用外部上拉电阻）

-  配置PORTCON模块中端口对应INEN_x输入使能寄存器，使能I2C数据线输入功能

-  配置CR寄存器的EN位，关闭I2C模块，确保配置寄存器过程中模块未工作

-  配置CR寄存器的MASTER位，将I2C模块设置为主机模式

-  配置CR寄存器的EN位，I2C模块总线使能

-  设置时序配置寄存器CLK，假设pclk=48M，希望I2C工作在Standard-mode（100kbps）速度下，则每个SCL 480个pclk，可以设置SCLL=0Xa0，SCLH =0x50，DIV=0x01

-  查询SR.BUSY，如果为1，则等待直至其变为0；如果为0，则进行下一步

-  发送Start。设置MCR.STA=1，查询该位，直至其变为0

-  发slave地址字节

-  设置TXDATA为【7位slave地址字节左移一位】

-  设置MCR.WR=1，查询该位，直至其变为0（或查询到IF的TXDONE=1（发送成功）或AL=1（仲裁丢失总线），并写1清除）

-  如果TXDONE=1，读TR.RXACK，如果该位为0，表示slave地址匹配成功

-  如果AL=1，表示本master失去总线，不能再进行后续操作，需重新查询SR.BUSY位直至1，才可以重新发送Start位，重新申请总线操作

   -  向slave发送待写数据

-  设置TXDATA，准备待写入slave的数据

-  设置MCR.WR=1，查询该位，直至其变为0（或查询到RIST的TXDONE=1，并写1清除）

-  读TR.RXACK，如果该位为0，表示写数据成功

   -  发STOP。设置MCR.STO=1，查询该位，直至其变为0

示意图如图 6‑36所示：

|Featur037|

图 6‑36 Master 寄存器时序示意图

*注：*\ *图中红色部分表示软件操作*

主机接收模式
^^^^^^^^^^^^^^^^^^^^^^^^

I2C作为主机接收模式，需将I2C模块设置为MASTER，初始化过程与主发送模式相同。

I2C作为主机从从机接收数据操作流程如下：

-  配置PORTCON模块中端口对应PORTx_FUNC寄存器，将指定引脚切换为功能复用

-  配置PORTCON模块中端口对应PULLU_x上拉使能寄存器，使能端口内部上拉电阻（也可使用外部上拉电阻）

-  配置PORTCON模块中端口对应INEN_x输入使能寄存器，使能I2C数据线输入功能

-  配置CR寄存器的EN位，关闭I2C模块，确保配置寄存器过程中模块未工作

-  配置CR寄存器的MASTER位，将I2C模块设置为主机模式

-  配置CR寄存器的EN位，I2C模块总线使能

-  设置时序配置寄存器CLK，假设pclk=48M，希望I2C工作在Standard-mode（100kbps）速度下，则每个SCL 480个pclk，可以设置SCLL=0Xa0，SCLH =0x50，DIV=0x01

-  查询SR.BUSY，如果为1，则等待直至其变为0；如果为0，则进行下一步

-  发送Start。设置MCR.STA=1，查询该位，直至其变为0

-  发slave地址字节

-  设置TXDATA为【7位slave地址字节地址右移1位】

-  设置MCR.WR=1，查询该位，直至其变为0（或查询到IF的TXDONE=1（发送成功）或AL=1（仲裁丢失总线），并写1清除）

-  如果TXDONE=1，读TR.RXACK，如果该位为0，表示slave地址匹配成功

-  如果AL=1，表示本master失去总线，不能再进行后续操作，需重新查询SR.BUSY位直至1，才可以重新发送Start位，重新申请总线操作

   -  从slave读数据

-  设置TR.TXACK=0

-  设置MCR.RD=1，查询直到IF.RXNE=1

-  读取RXDATA，得到slave数据

-  查询MCR.RD，直至其变为0（或查询到IF.RXDONE=1，并写1清除）

   -  发STOP。设置MCR.STO=1，查询该位，直至其变为0

从发送模式
^^^^^^^^^^^^^^^^^^^^^^^

I2C作为从发送模式，需将I2C模块设置为SLAVE，具体软件配置操作如下：

-  配置PORTCON模块中端口对应PORTx_FUNC寄存器，将指定引脚切换为功能复用

-  配置PORTCON模块中端口对应PULLU_x上拉使能寄存器，使能端口内部上拉电阻（也可使用外部上拉电阻）

-  配置PORTCON模块中端口对应INEN_x输入使能寄存器，使能I2C数据线输入功能

-  配置CR寄存器的EN位，关闭I2C模块，确保配置寄存器过程中模块未工作

-  配置CR寄存器的MASTER位，将I2C模块设置为从机模式

-  配置CR寄存器的EN位，I2C模块总线使能

-  设置slave地址模式。SCR.ADDR10=0

-  设置slave地址SADDR

-  查询直至IF.RXSTA，表示检测到I2C总线上有start发出

-  查询直至IF.RXNE=1。表示有master选中本器件

-  如果SADDR中设置了地址mask，则读取RXDATA，判断master发送的实际地址

-  如果判断到TR.SLVRD=1，表示master希望从slave读取数据

-  准备数据，写TXDATA

-  查询直到RXDONE=1，表示之前地址匹配后，返回ACK结束

-  查询直到IF.TXE=1，就可以向TXDATA中写入新数据了

-  查询直到IF.TXDONE=1，表示数据发送完成。然后写1清除

-  查询TR.RXACK，如果为0，表示master希望继续接收数据，则可重新向TXDATA中写入数据；如果RXACK=1，表示master希望结束读操作，则设置TR.TXCLR，清除之前预准备到TXDATA中的最后一个数据。转入下一步

-  查询到IF.RXSTO，表示检测到I2C总线上有STOP发出。本次会话结束

示意图如图 6‑37所示：

|Featur038|

图 6‑37 Slave 寄存器时序示意图

*注1：图中红色部分表示软件操作*

*注2：图中t1= tLOW，由CLK寄存器设置*

从接收模式
^^^^^^^^^^^^^^^^^^^^^^^

I2C作为从接收模式，需将I2C模块设置为SLAVE，操作流程如下：

-  配置PORTCON模块中端口对应PORTx_FUNC寄存器，将指定引脚切换为功能复用

-  配置PORTCON模块中端口对应PULLU_x上拉使能寄存器，使能端口内部上拉电阻（也可使用外部上拉电阻）

-  配置PORTCON模块中端口对应INEN_x输入使能寄存器，使能I2C数据线输入功能

-  配置CR寄存器的EN位，关闭I2C模块，确保配置寄存器过程中模块未工作

-  配置CR寄存器的MASTER位，将I2C模块设置为从机模式

-  配置CR寄存器的EN位，I2C模块总线使能

-  设置slave地址模式。SCR.ADDR10=0

-  设置slave地址SADDR

-  查询直至IF.RXSTA，表示检测到I2C总线上有start发出

-  查询直至IF.RXNE=1。表示有master选中本器件

-  如果SADDR中设置了地址mask，则读取RXDATA，判断master发送的实际地址

-  如果判断到TR.SLVWR=1，表示master希望向slave写入数据

-  查询直到RXDONE=1，表示之前地址匹配后，返回ACK结束。然后写1清除

-  设置TR.TXACK=0

-  查询直到IF.RXNE=1，表示slave接收到新数据，读取RXDATA

-  查询直到RXDONE=1，表示之前接收数据后，返回ACK结束。然后写1清除

-  可重复查询IF.RXNE位，继续接收数据，直到查询到IF.RXSTO，表示本次会话结束

时钟延展clock stretching
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

clock stretching通过将SCL线拉低来暂停一个传输，直到释放SCL线为高电平,传输才继续进行。

以master-receiver，slave-transmitter为例，具体软件配置操作如下：

-  配置PORTCON模块中端口对应PORTx_FUNC寄存器，将指定引脚切换为功能复用

-  配置PORTCON模块中端口对应PULLU_x上拉使能寄存器，使能端口内部上拉电阻（也可使用外部上拉电阻）

-  配置PORTCON模块中端口对应INEN_x输入使能寄存器，使能I2C数据线输入功能

-  配置CR寄存器的EN位，关闭I2C模块，确保配置寄存器过程中模块未工作

-  配置CR寄存器的MASTER位，将I2C模块设置为主机模式

-  配置CR寄存器的EN位，I2C模块总线使能

-  设置时序配置寄存器CLK，假设pclk=48M，希望I2C工作在Standard-mode（100kbps）速度下，则每个SCL 480个pclk，可以设置SCLL=0Xa0，SCLH =0x50，DIV=0x01

-  查询SR.BUSY，如果为1，则等待直至其变为0；如果为0，则进行下一步

-  发送Start。设置MCR.STA=1，查询该位，直至其变为0

-  发slave地址字节

-  设置TXDATA为【7位slave地址字节左移一位】

-  设置MCR.WR=1，查询该位，直至其变为0（或查询到IF的TXDONE=1（发送成功）或AL=1（仲裁丢失总线），并写1清除）

-  如果TXDONE=1，读TR.RXACK，如果该位为0，表示slave地址匹配成功

-  如果AL=1，表示本master失去总线，不能再进行后续的步骤6~7，需查询直至SR.BUSY=1，才可以回到步骤4，重新发送Start位，重新申请总线操作

   -  向slave发送待写数据

-  设置TXDATA，准备待写入slave的数据

-  设置MCR.WR=1，查询该位，直至其变为0（或查询到RIST的TXDONE=1，并写1清除）

-  读TR.RXACK，如果该位为0，表示写数据成功

   -  发STOP。设置MCR.STO=1，查询该位，直至其变为0

HS-MODE
^^^^^^^^^^^^^^^^^^^^^^^^^

以master-transmitter为例

具体软件配置操作如下：

-  设置CR.HS=0，以普通模式发第一个字节

-  以主机发送模式的方式，先在F/S-mode下发送START和master code。在此过程中，可以进行multi-master的总线仲裁

-  如果本master获得了总线控制权。则进行如下步骤

-  设置CR.HS=1。才可以设置为高速模式

-  设置CLK寄存器。假设pclk=60M，希望I2C工作在HS-mode（3.4Mbps）速度下，则每个SCL 14个pclk，可以设置SCLL=0x0A，SCLH=0x05，DIV=0x0

-  以主机发送模式的方式，以High-speed发送Sr和slave地址（不需要再判断IF.AL位）、写数据等

以slave-receiver为例

具体软件配置操作如下：

-  根据F/S-mode速度设置CLK寄存器

-  设置CR.MASTER=0（slave），CR.EN=1，CR.HS=0

-  设置slave SCR.MCDE=1，等待master发送master code

-  查询直到RXNE=1，表示接收到master code

-  读取RXDATA中的数据，判断是multi-master中的哪一个master获得了总线。（对于single-master情况，可以省略此判断，但RXDATA中的数据需要读走，否则会影响后续地址和数据的接收）

-  设置HS-mode，后续操作在HS-mode下进行。设置CR.HS=1；设置SCR.MCDE=0

-  根据HS-mode速度设置CLK寄存器

-  设置slave地址模式及地址。设置SCR.ADDR10，并相应设置SADDR

-  查询直到IF.RXSTA=1，表示接收到Sr

-  查询直到RXNE=1，表示接收到匹配的地址

-  根据从机接收模式的操作继续后续操作，直至结束本次会话

.. _中断清除-1:

中断清除
^^^^^^^^^^^^^^^^^^^^^^

此模块中中断状态位详见寄存器中各个中断标志位属性，当其中断标志位属性为R/W1C时，如需清除此标志，需在对应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入；当其中断标志位属性为AC时，表示此中断状态位会自动清零；当其中断标志位属性为RO时，表示此标志位会随着水位的变化而改变，标志位只
与其当前状态有关，不需要清除。具体详见寄存器描述。

.. _寄存器映射-6:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - I2C0BASE： |0x400A6000I2C1BASE： |0x400A6800
     - |     |
     -
     -
     -

   * - CR
     - 0x0
     -
     - 0x0 _0018
     - 通用配置寄存器             |

   * - SR
     - 0x4
     -
     - 0x0 _0000
     - 通用状态寄存器             |

   * - TR
     - 0x8
     -
     - 0x0 _0002
     - 通用传输寄存器             |

   * - RXDATA
     - 0xC
     -
     - 0x0 _0000
     - 接收数据寄存器             |

   * - TXDATA
     - 0x10
     -
     - 0x0 _0000
     - 发送数据寄存器             |

   * - IF
     - 0x14
     -
     - 0x0 _0001
     - 中断标志寄存器             |

   * - IE
     - 0x18
     -
     - 0x0 _0001
     - 中断使能寄存器             |

   * - MCR
     - 0x20
     -
     - 0x0 _0000
     - Master控制寄存器           |

   * - CLK
     - 0x24
     -
     - 0x0 _3f7f
     - 时序配置寄存器             |

   * - SCR
     - 0x30
     -
     - 0x0 _0000
     - Slave控制寄存器            |

   * - SADDR
     - 0x34
     -
     - 0x0 _0000
     - Slave地址寄存器            |


.. _寄存器描述-6:

寄存器描述
~~~~~~~~~~~~~~~

通用配置寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x0
     -
     - 0x 0_0018
     - 通用配置寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - DNF
     -
     -
     -
     - HS
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:7
     - -
     - -

   * - 6:3
     - DNF
     - Receive SDA、SCL数字噪声滤波（Digital Noise | Filter）                                    |

       0000：滤波不使能                            |

       0001：滤波使能，且滤波能力最大1个系统时钟   |

       ……

       1111：滤波使能，且滤波能力最大15个系统时钟  |

   * - 2
     - HS
     - High-Speed mode，仅在master模式下有效       |

       0：Standard-mode, Fast-mode, Fast-mode      | Plus。SCL为open-drain输出                   |

       1：High-Speed                               | mode。SCL为电流源上                         | 输出。Master发送STOP后，硬件自动清除本位 |

   * - 1
     - MASTER
     - 模式控制                                    |

       0：slave模式                                |

       1：master模式                               |

   * - 0
     - EN
     - i2c总线使能                                 |

       0：不使能                                   |

       1：使能                                     |


通用状态寄存器SR
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SR
     - 0x4
     -
     - 0x 0_0000
     - 通用状态寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - SDA
     - SCL
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - SDA
     - I2C SDA状态。不受I2C总线使能影响。          |

       0：I2C SDA为低。                            |

       1：I2C SDA为高。                            |

   * - 1
     - SCL
     - I2C SCL状态。不受I2C总线使能影响。          |

       0：I2C SCL为低。                            |

       1：I2C SCL为高。                            |

   * - 0
     - BUSY
     - 总线忙状态。本位不受C                       | N位控制，当EN不使能时，仍然检测总线忙状态。 |

       0：总线不忙。                               |

       1：总线忙，I2C总线START至STOP期间有效。     |


通用传输寄存器TR
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TR
     - 0x8
     -
     - 0x 0_0002
     - 通用传输寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     - S DS
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:14
     - -
     - -

   * - 13:12
     - SLVRDS
     - Slave接收到的数据类型。仅在Slave模式有效。  |

       00：RXDATA为空。                            |

       01：接收到的是地址。                        |

       10：接收到的是数据。                        |

       11：接收到的是master                        | code。仅当MCDE=1时有效。                    |

   * - 11
     - SLVSTR
     - Slave clock stretching忙状态。仅在slave模式有效。       |

       0：无clock stretching。                     |

       1：有clock stretching。                     |

   * - 10
     - SLVWR
     - Slave写状态。仅在slave模式有效。            |

       1：Slave接收到master的写请求后有效。        |

       0：                                         | ve接收到master的读请求或STOP后，自动清除。  |

   * - 9
     - SLVRD
     - Slave读状态。仅在slave模式有效。            |

       1：Slave接收到master的读请求后有效。        |

       0：                                         | ve接收到master的写请求或STOP后，自动清除。  |

   * - 8
     - SLVACT
     - Slave活跃状态。仅在slave模式有效。          |

       0：slave器件处于非活跃状态                  |

       1：s                                        | e器件处于活跃状态。地址匹配成功后本位有效； | STOP，或Sr后的地址匹配不成功，自动清除。 |

   * - 7:3
     - -
     - -

   * - 2
     - TXCLR
     - 发送数据寄存器清空。硬件自动清除。          |

       0：不清空。                                 |

       1：清空TXDATA中的数据，并更新TXE位。        |

   * - 1
     - RXACK
     - 当作为trans                                 | ter时，接收到的ACK/NACK。硬件置位，TXDONE有 | 可查询此位；接收到Sr或STOP会将此位清零。 |

       0：接收到ACK                                |

       1：接收到NACK                               |

   * - 0
     - TXACK
     - 当作为receiver时，反馈ACK/NACK。            |

       0：反馈ACK。                                |

       1：反馈NACK。                               |

       以下情况，ACK/NACK不由本位决定：            |

       slave接收地址时，硬件自动反馈ACK/NACK。     |

       slave MCDE有效，接收到master                | code时，硬件自动返回NACK。                  |

       slave接收溢出时，硬件自动反馈NACK。         |


接收数据寄存器RXDATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RXDATA
     - 0xC
     -
     - 0x 0_0000
     - 接收数据寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - RXDATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - RXDATA
     - 接收数据                                    | 。RXNE为1，表示本寄存器中存在有效数据。  |

       在完成数据接                                | 包含ACK/NACK发送）的时刻，更新此寄存器。 |

       slave接收地址字节情况，参见RXDONE位说明。   |


发送数据寄存器TXDATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TXDATA
     - 0x10
     -
     - 0x 0_0000
     - 发送数据寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - TXDATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - TXDATA
     - 发送数据                                    | 。TXE为0，表示本寄存器中存在待发送数据。 |


中断标志寄存器IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x14
     -
     - 0x 0_0001
     - 中断标志寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     - AL

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - TXE


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:18
     - -
     - -

   * - 17
     - MLTO
     - Master SCL LOW超时。写1清除。仅在master模式有效        |

       0：未超时                                   |

       1：超时。SCL                                | LOW时间超过1024个由CLK寄存器设置的SCL       | LOW时间                                     |

       【对于golden model，SCL                     | LOW超时时间由MLTO_LIM设置】                 |

   * - 16
     - AL
     - M er仲裁丢失总线。写1清除。仅在master模式有效 |

       0：无仲裁丢失总线控制权                     |

       1：仲裁丢失总线控制权                       |

   * - 15:10
     - -
     - -

   * - 9
     - RXSTO
     - S e检测到STOP。写1清除。仅在slave模式下有效。 |

       0：slave未检测到STOP                        |

       1：slave检测到STOP                          |

   * - 8
     - RXSTA
     -

   * - 7:5
     - -
     - -

   * - 4
     - RXDONE
     - 接收结束。写1清除，包含ACK/NACK时间         |

       0：接收未结束                               |

       1：接收结束                                 |

       Slave接收情况说明                           |

       Slave器件7位地址模式下，slave地址字节       | /W位）接收完成，若地址匹配，则生成此中断  |

       Slave器件10位地                             | 下，slave地址的第2字节（ADDR[7:0]）接收  | 若10位地址匹配，则生成此中断；跟在repeat | START之后的slave地址第1字节，若地址8、9位   |
       则生成此中断；跟在START之后的第1字节接收 | ，即使ADDR[9:8]匹配，也不会生成此中断。  |

       Slave模式，MCDE=1，接收到master             | code时，会生成此中断。                      |

   * - 3
     - TXDONE
     - 发送结束。写1清除，包含ACK/NACK时间         |

       0：发送未结束，或没有发送                   |

       1：发送结束                                 |

       说明：当master                              | 送字节发生仲裁丢失总线时，不产生本中断。 |

   * - 2
     - RXOV
     - 接收数据寄存器溢出。软件                    | 除。（更新的时刻点，不包含ACK/NACK发送）  |

       0：无溢出                                   |

       1：当RXDATA非空时，又接收到                 | 节，会产生溢出。溢出发生时，新数据丢失。 |

       说明：对于slave模式，如果STRE位             | 当接收数据寄存器非空，且又接收到新的字节 | ave器件会拉低SCL信号，直到RXDATA中的旧数被 | 再把新数存到RXDATA中，此情况不会产生溢出 |

   * - 1
     - RXNE
     - 接收数据寄存器非空                          |

       0：接收数据寄存器空，不存在未读取的接收数据 |

       1：接收数据寄存器非空，存在未读取的接收数据 |

       在接收完                                    | 时刻更新此位（不包含ACK/NACK发送时间）。 |

       如果新数据接收                              | ，旧数据未及时读取，分如下几种情况处理： |

       Master模式：                                |

       新数据丢失。同时置位RXD_OV位。              |

       Slave模式：                                 |

       A．STRE=0：新                               | 失。同时置位RXD_OV位，硬件自动反馈NACK。 |

       B．STRE=1：正常返回                         | ，然后在master发送下一个字节前，slave将SCL  | hold在低电平，直到旧数据被读走后，          | 数据更新到RXDATA寄存器中。最后释放SCL。  |

   * - 0
     - TXE
     - 发送数据寄存器空                            |

       0：发送数据寄存器非空，不允许写TXDATA寄存器 |

       1：发送数据寄存器空，允许写TXDATA寄存器     |

       在发送数据开始的时刻，发送数据被            | 走后，此位被更新为1（此时TXDONE仍为0）。 |

       向TXDATA寄存器写入新数据，可清除此位。      |


中断使能寄存器IE
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x18
     -
     - 0x 0_0001
     - 中断使能寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     - AL

   * - 12
     - 11
     - 10
     - 9
     - 8
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - TXE


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:18
     - -
     - -

   * - 17
     - MLTO
     - Master SCL LOW超时中断使能                  |

       0：不使能                                   |

       1：使能                                     |

   * - 16
     - AL
     - Master仲裁丢失总线中断使能                  |

       0：不使能                                   |

       1：使能                                     |

   * - 15:10
     - -
     - -

   * - 9
     - RXSTO
     - Slave检测到STOP中断使能                     |

       0：不使能                                   |

       1：使能                                     |

   * - 8
     - RXSTA
     - Slave检测到START中断使能                    |

       0：不使能                                   |

       1：使能                                     |

   * - 7:5
     - -
     - -

   * - 4
     - RXDONE
     - 接收数据结束中断使能                        |

       0：不使能                                   |

       1：使能                                     |

   * - 3
     - TXDONE
     - 发送数据结束中断使能                        |

       0：不使能                                   |

       1：使能                                     |

   * - 2
     - RXOV
     - 接收数据寄存器溢出中断使能                  |

       0：不使能                                   |

       1：使能                                     |

   * - 1
     - RXNE
     - 接收数据寄存器非空中断使能                  |

       0：不使能                                   |

       1：使能                                     |

   * - 0
     - TXE
     - 发送数据寄存器空中断使能                    |

       0：不使能                                   |

       1：使能                                     |


Master控制寄存器MCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器 |
     - | 偏移 |
     - | 类型 |
       |
         |
     - 复位值 |    描述|
     - |
            |
              |

   * - MCR
     - 0x20
     - R/W
     - 0x 0_0000
     - Master控制寄存器           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - STO
     - WR
     - RD
     - STA


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 3
     - STO
     - 写1，产生STOP，完成后自动清零。             |

   * - 2
     - WR
     - 写1，发送TX                                 | A中数据，完成后（含ACK/NACK时间）自动清零。 |

       向本位写                                    | 要求TXDATA不能为空。否则，本位无法设置。  |

       注意：WR与RD位不能同时写1.
       |

   * - 1
     - RD
     - 写1，接收数据                               | DATA中，完成后（含ACK/NACK时间）自动清零。 |

   * - 0
     - STA
     - 写1，产生START，完成后自动清零。            |

       注：允许STA和WR同时置位，优先发送START。    |


时序配置寄存器CLK
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CLK
     - 0x24
     -
     - 0x 3_3f7f
     - 时序配置寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DIV
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - SCLH
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SCLL
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - -
     - -

   * - 27:24
     - SDAH
     -

   * - 23:16
     - DIV
     - 时钟预分                                    | 见SCLH和SCLL描述。（仅对Master模式有效） |

       0：1分频                                    |

       1：2分频                                    |

       2：3分频                                    |

       ……

       255：256分频                                |

   * - 15:8
     - SCLH
     -

   * - 7:0
     - SCLL
     - SCL时钟低电平时间配置。（对Master模         | ；在slave模式下，如果使能了STRETCH功能， | DS配置为0，则需要配置本寄存器。在slave写T  | TA后，延迟本寄存器设置的时间，再释放SCL。） |

       tLOW=( (SCLL+1) \* (DIV+1) + SDAH + 5) \* Tpclk

       SCL的周期为tHIGH+tLOW。                     |

       推荐SCLH与SCLL的比例为1:2。                 |


*注：示意图如图 6‑35所示*

Slave控制寄存器SCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SCR
     - 0x30
     -
     - 0x 0_0000
     - Slave控制寄存器            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - ASDS
     -

   * - 2
     - STRE
     - Clock stretching使能控制。                  |

       0：Clock stretching不使能。                 |

       1：Clock stretching使能。                   |

       （slave作为                                 | eiver时，当接收到新数据，但旧数据未被及时读 | XNE=1）：SLVSTR变有效，在返回ACK后，将SCL | hold在低电平，直到                          |
       被读取后，把新数据更新到RXDATA中，同时S  | TR变无效，再释放SCL，开始下一个数据的接收。 |

       slave作为transmitter时                      | 送结束（TXDONE=1，含接收ACK/NACK时间）， | 据未准备好（TXE=1）：SLVSTR变有效，将SCL | ho 低电平，直到新数据准备好，延迟SCLL时间后， |
       STR变无效，再释放SCL，开始新数据的发送。）  |

   * - 1
     - MCDE
     - Master Code Detect Enable.

       0：不检测master code。                      |

       1：检测master code。                        |

       本位有效时，slave在START之后检测到master    | code，会生成RXDONE中断，并硬件设置          | RDS为11。软件应保证slave地址设置不与master  | code冲突。                                  |

   * - 0
     - ADDR10
     - slave地址模式控制。                         |

       0：7位地址模式                              |

       1：10位地址模式                             |


Slave地址寄存器SADDR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SADDR
     - 0x34
     -
     - 0x 0_0000
     - Slave地址寄存器            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - MASK_ADDR7
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ADDR7
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23:17
     - MASK7
     - Slave对应地址位掩码。                       |

       0：不掩码。                                 |

       1：掩码对应位地址。掩码                     | 件匹配slave地址时，忽略被掩码的地址位。  |

       对于10位地址模式，RXDATA                    | ADDR[7:0]，所以不支持对ADDR[9:8]的mask。 |

   * - 16
     - MASK10
     - Slave对应地址位掩码。                       |

   * - 15:10
     - -
     - -

   * - 9:8
     - ADDR10
     - 10位地址模式：地址bit9~bit8                 |

   * - 7:1
     - ADDR7
     - 地址bit7~bit1                               |

   * - 0
     - ADDR0
     - 10位地址模式：地址bit0                      |


SPI总线控制器（SPI）
------------------------------

.. _概述-8:

概述
~~~~~~~~~~~~

SWM241系列所有型号SPI模块操作均相同，不同型号SPI数量可能不同。使用前需使能对应SPI模块时钟。

SPI是一种用于全双工模式的串行同步数据通讯协议。该模块为支持SPI通讯协议的接口控制模块，它支持主/从工作模式。

SPI模块支持SPI模式及SSI模式。SPI模式下支持MASTER模式及SLAVE模式。具备深度为8的FIFO，速率及帧宽度可灵活配置。其结构图如图 6‑38所示。

除了支持SPI协议外，还可支持SSI协议。

.. _特性-8:

特性
~~~~~~~~~~~~

-  支持主机模式和从机模式

-  支持SPI和SSI两种帧结构

-  内置深度为8的FIFO，作为接收和发送数据的缓存

-  支持DMA

-  数据位数4~16bit可配置

-  可编程时钟极性和相位

-  支持LSB和MSB可配置

.. _模块结构框图-6:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur039|

图 6‑38 SPI模块结构框图

.. _功能描述-9:

功能描述
~~~~~~~~~~~~~~

位速率的产生
^^^^^^^^^^^^^^^^^^^^^^^^

SPI模块包含一个可编程的位速率时钟分频器来生成串行输出时钟。串行位速率通过设置CTRL寄存器CLKDIV位对输入时钟进行分频来获得。分频值的范围为4~512分频值。计算公式如下F\ :sub:`sclk_out` = F\ :sub:`HCLK`/SCKDIV。

作为主设备时，SPI_CLK最高支持模块输入时钟4分频，即当时钟为48MHz时，最高可支持输出12MHz时钟。

作为从设备时，SPI_CLK最高支持模块输入时钟6分频，即当时钟为48MHz时，最高支持输入8MHz时钟。

帧宽度
^^^^^^^^^^^^^^^^^^^^^

使能SPI模块前，可通过设置CTRL寄存器SIZE位选择数据帧长度，支持4～16位。设置该寄存器位时，需保证SPI处于关闭状态。

SPI模式
^^^^^^^^^^^^^^^^^^^^^^^

使能SPI模块前，可通过设置CTRL寄存器中FFS位选择输出模式。当该位选择SPI模式，此时，可通过CTRL寄存器中CPOL和CPHA配置SPI模块时钟空闲状态极性与数据采样时间点。

当CPOL=0，CPHA=0时，时钟空闲状态为低电平，起始采样点为时钟上升沿。

当CPOL=0，CPHA=1时，时钟空闲状态为低电平，起始采样点为时钟下降沿。

当CPOL=1，CPHA=0时，时钟空闲状态为高电平，起始采样点为时钟下降沿。

当CPOL=1，CPHA=1时，时钟空闲状态为高电平，起始采样点为时钟上升沿。

输出波形如图 6‑39所示：

|Featur040|

图 6‑39 SPI模式波形图

所有模式下，片选线均为发送一个数据后自动拉高，第二个数据再次拉低，因此当需要使用连续片选时，需使用GPIO模拟片选线。

SSI模式
^^^^^^^^^^^^^^^^^^^^^^^

可通过设置CTRL寄存器中FFS位选择输出模式，当该位选择SSI模式，单次输出波形如图 6‑40所示：

|Featur041|

图 6‑40 SSI模式单次输出波

连续输出波形如图 6‑41所示：

|Featur042|

图 6‑41 SSI模式连续输出波形

主设备操作
^^^^^^^^^^^^^^^^^^^^^^^

当SPI模块作为主模块工作时，操作流程如下：

-  通过CTRL寄存器CLKDIV位定义串行时钟波特率

-  设置CTRL寄存器SIZE位来选择数据位数

-  选择CTRL寄存器CPOL和CPHA位，定义数据传输和串行时钟间的相位关系。主、从设备的CPOL和CPHA位必须一致

-  配置CTRL寄存器FFS位定义数据帧格式，主、从设备的数据帧格式必须一致。

-  设置CTRL寄存器MSTR位为主模式

-  使能CTRL寄存器EN位

在主模式配置中，MOSI引脚是数据输出，而MISO引脚是数据输入。

注意：当选择硬件提供的CS引脚作为从设备片选使能时，每传输一个字节的数据，CS引脚均会变高。因此，当从设备需要连续拉低的片选信号时，需要使用GPIO模拟CS信号。

从设备操作
^^^^^^^^^^^^^^^^^^^^^^^

在从模式下，SCK引脚用于接收从主设备来的串行时钟。对CTRL寄存器中CLKDIV的设置不影响数据传输速率。

操作流程：

-  设置CTRL寄存器SIZE位来定义数据位数选择。

-  选择CTRL寄存器CPOL和CPHA位，与主设备一致。

-  配置CTRL寄存器FFS位定义数据帧格式。

-  设置CTRL寄存器MSTR位为从模式

在从设备配置中，MOSI引脚是数据输入，MISO引脚是数据输出。

FIFO操作
^^^^^^^^^^^^^^^^^^^^^^^^

发送FIFO

通用发送FIFO是一个32位宽、8单元深、先进先出的存储缓冲区。通过写DATA寄存器来将数据写入发送FIFO，数据在由发送逻辑读出之前一直保存在发送FIFO中。并行数据在进行串行转换并通过MOSI管脚分别发送到相关的从机之前先写入发送FIFO。

接收FIFO

通用接收FIFO是一个32位宽、8单元深、先进先出的存储缓冲区。从串行接口接收到的数据在读出之前一直保存在缓冲区中，通过读DATA寄存器来访问读FIFO。从MISO管脚接收到的串行数据在分别并行加载到相关的主机接收FIFO之前先进行记录。

可通过中断使能寄存器IE、中断状态寄存器IF、状态寄存器STAT对FIFO状态及中断进行查询与控制。

.. _中断配置与清除-3:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^

可通过配置中断使能寄存器IE相应位使能中断。当中断触发后，中断标志寄存器IF对应位置1。如需清除此标志，需在对应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

.. _寄存器映射-7:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - SPI0BASE： |0x40044000SPI1BASE： |0x40044800
     - |     |
     -
     -
     -

   * - CTRL
     - 0x00
     -
     -
     - SPI控制寄存器              |

   * - DATA
     - 0x04
     -
     -
     - SPI数据寄存器              |

   * - STAT
     - 0x08
     -
     -
     - SPI状态寄存器              |

   * - IE
     - 0x0C
     -
     -
     - SPI中断使能寄存器          |

   * - IF
     - 0x10
     -
     -
     - SPI中断状态寄存器          |


.. _寄存器描述-7:

寄存器描述
~~~~~~~~~~~~~~~

控制寄存器CTRL
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTRL
     - 0x00
     -
     - 0x009e 1172
     - SPI控制寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     - -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - TFTHR
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DMARXEN
     - D MATXEN
     -
     -
     - FFS
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SIZE
     -
     -
     -
     - EN
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:29
     - -
     - -

   * - 28
     - LSBF
     - LSB配置寄存器                               |

       1：数据按照LSB发送（发                      | TX寄存器数据的bit0位会首先被发出；接收时 | 的第一个bit数据会放到RX寄存器的bit0位）  |

       0：数据按照MSB发送（发                      | TX寄存器数据的最高位会首先被发出；接收时 | 的第一个bit数据会放到RX寄存器的最高位）  |

   * - 27:26
     - -
     - -

   * - 25
     - TFCLR
     - 发送FIFO清除控制位                          |

       1：发送FIFO清除有效                         |

       0：发送FIFO清除无效                         |

   * - 24
     - RFCLR
     - 接收FIFO清除控制位                          |

       1：接收FIFO清除有效                         |

       0：接收FIFO清除无效                         |

   * - 23:21
     - TFTHR
     - 发送FIFO达到设置水位后产生中断配置位        |

       000：发送FIFO中最多有0个数据                |

       001：发送FIFO中最多有1个数据                |

       010：发送FIFO中最多有2个数据                |

       011：发送FIFO中最多有3个数据                |

       100：发送FIFO中最多有4个数据                |

       101：发送FIFO中最多有5个数据                |

       110：发送FIFO中最多有6个数据                |

       111：发送FIFO中最多有7个数据                |

   * - 20:18
     - RFTHR
     - 接收FIFO达到设置水位后会产生中断配置位      |

       000：接收FIFO中至少有1个数据                |

       001：接收FIFO中至少有2个数据                |

       010：接收FIFO中至少有3个数据                |

       011：接收FIFO中至少有4个数据                |

       100：接收FIFO中至少有5个数据                |

       101：接收FIFO中至少有6个数据                |

       110：接收FIFO中至少有7个数据                |

       111：接收FIFO中至少有8个数据                |

   * - 17
     - SSN_H
     - SSN在传输过程中是否出现控制位。（在数据帧   | I模式下，并且配置主模式工作时，通过该位可  | 传输过程中每帧数据之间是否需要SSN拉高）  |

       0：传输过程中SSN始终为0                     |

       1：传输过                                   | 一帧数据之间会将SSN至少拉高0.5个SCK周期  |

   * - 16
     - FILTE
     - 输入信号去抖控制                            |

       0：对输入信号不进行去抖操作                 |

       1：对输入信号进行去抖操作                   |

       注：采用去抖功能，会极大提高                | 线上信号的可靠性，但也会极大损失传输速率。  |


       抖功能，在全双工模式下最高只能采用波特率 | 分频工作，单工情况下可采用8分频波特率工作  | 能关闭，全双工模式下最高只能采用波特率为 | 工作，在单工情况下可采用4分频波特率工作。 |

   * - 15
     - DMARXEN
     - DMA读SPI模式选择                            |

       1：通过DMA读FIFO                            |

       0：通过MCU写FIFO                            |

   * - 14
     - DMATXEN
     - DMA写SPI模式选择                            |

       1：通过DMA写FIFO                            |

       0：通过MCU写FIFO                            |

   * - 13
     - FAST
     - 快速模式选择                                |

       1：SPI的SCLK为pclk的2分频                   |

       0：SPI的SCLK由CLKDIV控制                    |

       注：仅适用于SPI模式                         |

   * - 12
     - MSTR
     - 主从模式选择                                |

       1：SPI系统配置为主器件模式                  |

       0：SPI系统配置为从器件模式                  |

       注：仅适用于SPI模式                         |

   * - 11:10
     - FFS
     - 数据帧格式选择                              |

       00：SPI模式                                 |

       01：SSI模式                                 |

       10：保留                                    |

       11：保留                                    |

   * - 9
     - CPOL
     - 时钟极性选择                                |


       串行时钟空闲状态为低电平，有效电平为高电平 |


       串行时钟空闲状态为高电平，有效电平为低电平 |

       注：仅适用于SPI模式                         |

   * - 8
     - CPHA
     - 时钟相位选择                                |

       0：在串行时钟的第一个跳变沿采样数据         |

       1：在串行时钟的第二个跳变沿采样数据         |

       注：仅适用于SPI模式                         |

   * - 7:4
     - SIZE
     - 数据位数选择                                |

       0000：保留                                  |

       0001：保留                                  |

       0010：保留                                  |

       0011：4bit数据                              |

       0100：5bit数据                              |

       0101：6bit数据                              |

       0110：7bit数据                              |

       0111：8bit数据                              |

       1000：9bit数据                              |

       1001：10bit数据                             |

       1010：11bit数据                             |

       1011：12bit数据                             |

       1100：13bit数据                             |

       1101：14bit数据                             |

       1110：15bit数据                             |

       1111：16bit数据                             |

       注：仅适用于SPI模式                         |

   * - 3
     - EN
     - SPI使能位                                   |

       0：关闭                                     |

       1：开启                                     |

       注1：仅适用于SPI模式                        |

       注2：该寄                                   | 能后，若在主模式下，当发送FIFO有数据时则 | 动数据帧传输；在从模式下，等待数据帧传输 |

   * - 2:0
     - CLKDIV
     - 波特率选择                                  |

       000：主时钟4分频                            |

       001：主时钟8分频                            |

       010：主时钟16分频                           |

       011：主时钟32分频                           |

       100：主时钟64分频                           |

       101：主时钟128分频                          |

       110：主时钟256分频                          |

       111：主时钟512分频                          |

       注：仅适用于SPI模式                         |


数据寄存器DATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA
     - 0x04
     -
     - 0x0000 0000
     - SPI数据寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATA
     - SPI接收/发送数据寄存器                      |

       读操作从接收FIFO中读出接收到的数据          |

       写操作将数据写入发送FIFO中                  |

       注：若数据                                  | 2bit，则按照右对齐进行排列，高位不关心。  |


状态寄存器STAT
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT
     - 0x08
     -
     - 0x0000 0006
     - SPI状态寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BUSY
     - -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - TFLVL
     -
     -
     - RFF
     -
     -
     - TFE
     - WTC


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - BUSY
     - SPI传输忙标志位                             |

       0：表示SPI未进行传输                        |

       1：表示SPI正在进行传输                      |

       注：仅适用于SPI模式                         |

   * - 14:12
     - -
     - -

   * - 11:9
     - RFLVL
     - 接收FIFO数据深度位标志，RO                  |

       000：RFF为1时，表示FIFO内有8组数据          |

       RFF为0时，表示FIFO内没有数据；              |

       001：表示FIFO内有1组数据；                  |

       010：表示FIFO内有2组数据；                  |

       011：表示FIFO内有3组数据；                  |

       100：表示FIFO内有4组数据；                  |

       101：表示FIFO内有5组数据；                  |

       110：表示FIFO内有6组数据；                  |

       111：表示FIFO内有7组数据；                  |

   * - 8:6
     - TFLVL
     - 发送FIFO数据深度位标志，RO                  |

       000：TFNF为0时，表示FIFO内有8组数据         |

       TFNF为1时，表示FIFO内没有数据；             |

       001：表示FIFO内有1组数据；                  |

       010：表示FIFO内有2组数据；                  |

       011：表示FIFO内有3组数据；                  |

       100：表示FIFO内有4组数据；                  |

       101：表示FIFO内有5组数据；                  |

       110：表示FIFO内有6组数据；                  |

       111：表示FIFO内有7组数据；                  |

   * - 5
     - RFOV
     - 接收FIFO溢出标志，软件清零，写清零          |

       0：未溢出                                   |

       1：溢出                                     |

   * - 4
     - RFF
     - 接收FIFO满标志                              |

       0：非满                                     |

       1：满                                       |

   * - 3
     - RFNE
     - 接收FIFO非空标志                            |

       0：空                                       |

       1：非空                                     |

   * - 2
     - TFNF
     - 发送FIFO非满标志                            |

       0：满                                       |

       1：非满                                     |

   * - 1
     - TFE
     - 发送FIFO空标志                              |

       0：非空                                     |

       1：空                                       |

   * - 0
     - WTC
     - SPI数据帧传输结束标志                       |

       每次数据帧传输结束后，该标志会被置位。      |

       软件清零，写1清零。                         |

       注：仅适用于SPI模式                         |


.. _中断使能寄存器ie-1:

中断使能寄存器IE
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x0C
     -
     - 0x0000 0000
     - SPI中断使能寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - FTC
     - WTC

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ­-
     - | TFTHR
     - |
        RFTHR
     - |
          TFHF
     - |    TFE
     - |
          RFHF
     - |    RFF
     - |
          RFOV


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11
     - SSRISE
     - 从机模式下，SSN信号上升沿检测中断使能       |

   * - 10
     - SSFALL
     - 从机模式下，SSN信号下降沿检测中断使能       |

   * - 9
     - FTC
     - SPI传输结束中断使能                         |

   * - 8
     - WTC
     - SPI数据帧传输结束中断使能                   |

   * - 7
     - -
     - -

   * - 6
     - TFTHR
     - 发送FIFO达到设定水位中断使能                |

   * - 5
     - RFTHR
     - 接收FIFO达到设定水位中断使能                |

   * - 4
     - TFHF
     - 发送FIFO半满使能                            |

   * - 3
     - TFE
     - 发送FIFO空中断使能                          |

   * - 2
     - RFHF
     - 接收FIFO半满使能                            |

   * - 1
     - RFF
     - 接收FIFO满中断使能                          |

   * - 0
     - RFOV
     - 接收FIFO溢出中断使能                        |


中断状态寄存器IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x10
     -
     - 0x0000 0000
     - SPI中断状态寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - FTC
     - WTC

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ­-
     - | TFTHR
     - |
        RFTHR
     - |
          TFHF
     - |    TFE
     - |
          RFHF
     - |    RFF
     - |
          RFOV


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11
     - SSRISE
     - 从机模式SSN上升沿中断，写1清中断            |

       1：中断                                     |

       0：未中断                                   |

   * - 10
     - SSFALL
     - 从机模式SSN下降沿中断，写1清中断            |

       1：中断                                     |

       0：未中断                                   |

   * - 9
     - FTC
     - SPI传输结束中断                             |

       1：中断                                     |

       0：未中断                                   |

       写1清中断                                   |

   * - 8
     - WTC
     - SPI数据帧传输结束中断                       |

       1：中断                                     |

       0：未中断                                   |

       写1清中断                                   |

   * - 7
     - -
     - -

   * - 6
     - TFTHR
     - 发送FIFO达到设定水位中断                    |

       1：中断                                     |

       0：未中断                                   |

       写1清中断                                   |

   * - 5
     - RFTHR
     - 接收FIFO达到设定水位中断                    |

       1：中断                                     |

       0：未中断                                   |

       写1清中断                                   |

   * - 4
     - TFHF
     - 发送FIFO半满中断                            |

       1：中断                                     |

       0：未中断                                   |

       写1清中断状态                               |

   * - 3
     - TFE
     - 发送FIFO空中断                              |

       1：中断                                     |

       0：未中断                                   |

       写1清中断状态                               |

   * - 2
     - RFHF
     - 接收FIFO半满中断                            |

       1：中断                                     |

       0：未中断                                   |

       写1清中断状态                               |

   * - 1
     - RFF
     - 接收FIFO满中断                              |

       1：中断                                     |

       0：未中断                                   |

       写1清中断状态                               |

   * - 0
     - RFOVF
     - 接收FIFO溢出中断                            |

       1：中断                                     |

       0：未中断                                   |

       写1清中断状态                               |


局域网控制器（CAN）
----------------------------

.. _概述-9:

概述
~~~~~~~~~~~~

本系列所有型号CAN模块操作均相同，不同型号CAN数量可能不同。使用前需使能CAN模块时钟。与物理层相连需要连接额外的硬件收发器。

.. _特性-9:

特性
~~~~~~~~~~~~

-  支持协议2.0A(11位标识符)和2.0B（29位标识符）

-  支持最大1 Mbit/s 的比特率

-  提供64字节的接收FIFO

-  提供32个16位或16个32位的滤波器

-  提供可掩蔽中断

-  为自检操作提供可编程环回模式

.. _功能描述-10:

功能描述
~~~~~~~~~~~~~~

.. _中断配置与清除-4:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^

CAN模块支持如下中断：

-  接收中断

-  发送中断

-  错误中断

-  数据溢出中断

-  唤醒中断

-  被动错误中断

-  仲裁丢失中断

-  总线错误中断

触发中断前，首先需要设置相应位的中断使能(IE)。

各中断状态清除(除接收中断)，均为读清除。对于接收中断，需要将CMD寄存器RRB位写1清除。

数据发送
^^^^^^^^^^^^^^^^^^^^^^

发送报文需要设置发送buffer (寄存器INFO，DATA0—DATA11)。可以是标准帧格式或是扩展帧格式。数据位最大是8个字节，超过8字节，自动按8字节计算。

写数据前，需要查看SR寄存器TXRDY位是否等于1，如果不等于1，则发送的数据将会被丢弃。发送数据请求通过设置CMD寄存器TXREQ位为1(发送请求) 或是CMD.
SRR=1(自接收请求)。发送传输启动时，状态寄存器SR.TXBUSY置1，发送请求位清零。

数据传输没有开始时，可以通过设置命令寄存器(CMD.
ABTTX = 1)中止传输。如果已经开始传输，则不能中止。

数据接收
^^^^^^^^^^^^^^^^^^^^^^

数据接收先通过滤波器，符合条件标识符的才可以接收。滤波器的设置详见“接收滤波”章节。

数据接收可以读取内部64字节FIFO。

当CAN模块开始将接收到的数据写入接收FIFO时，状态寄存器SR.RXBUSY = 1，当接收FIFO (寄存器INFO，DATA0—DATA11)接收到完整报文的时候，状态寄存器SR.
RXDA = 1 ,中断状态IF.
RXDA置1(如果中断使能寄存器IE.
RXDA置1)。接收FIFO是64字节，最多允许接收5个完整的扩展帧报文。如果接收FIFO没有足够的内存，状态寄存器SR.
RXOV = 1，数据溢出，(如果中断使能 IE.
RXOV =1)，溢出中断置位IF.RXOV = 1。

从接收FIFO中读取数据后，需要释放FIFO(设置CMD.
RRB= 1)。如果没有读取的数据，中断状态位(IE.
RXDA)和接收BUFFER(SR.
RXDA)状态位清除。

自接收
^^^^^^^^^^^^^^^^^^^^^

自接收功能，数据可以自发自收，不发送应答位。通过设置自接收请求(CMD.
SRR = 1),根据配置，可以产生发送和接收中断。

如果自接收请求和发送请求同时设置，则自接收请求设置无效

接收滤波
^^^^^^^^^^^^^^^^^^^^^^

验收滤波器有验收代码寄存器(ACR0—ACR3)和验收屏蔽寄存器(AMR0—AMR1)

当接收到的CAN帧的ID满足ACR & ~AMR == ID & ~AMR时，该帧通过过滤，否则丢弃该帧。

.. list-table::
   :widths: 16 16 16 16 16 16
   :header-rows: 0


   * - **标准帧格 |式，单过 |滤模式** |
     - | | |
     -
     -
     -
     -

   * - 接       |收buffer |
     - | |
     - |
       |
     - |
       |
     - |
       |
     - |
       |

   * - 地址0x44 |
     - x48     |
     - |
     - |
     - x4c        |
     - x50       |

   * - ID28….ID21
     - I D20…ID18
     - R TR
     - XXXX(不匹配)  | 数
     - 字节1   | 数据字节2
     - |

   * - 过滤器   |
     - |
     - |
     - |
     - |
     - |

   * - ACR0[7:0]
     - A CR1[7:4]
     -
     - (ACR 1[3:0]不使用) |
     - ACR2[7：0]  | |
     - ACR3[7：0] | |

   * - AMR0[7:0]
     - A MR1[7:4]
     -
     - (AMR 1[3:0]不使用) |
     - AMR2[7：0]  | |
     - AMR3[7：0] | |

   * - *注      |：如果不 |需要数据 |匹配，AM |R2、AMR3 |设置     |0xFF*
     - | | | | | |
     - |


       |
     - |


       |
     - |


       |
     - |


       |


.. list-table::
   :widths: 11 11 11 11 11 11 11 11 11
   :header-rows: 0


   * - **标准帧 |格式，  |双过滤  |模式**  |
     - | | | |
     -
     -
     -
     -
     -
     -
     -

   * - 接收    |buffer
     - |
     - |
     - |
     - |
     - |
     - |
     - |
     - |

   * - 地      |址0x44  |
     - 0x48    | |
     - |
       |
     - |
       |
     - 0 | x | 4 C
     - |
       |
     - |
       |
     - 0 | x | 5 0
     - |
       |

   * - ID28…ID21
     - ID 20…ID18
     - R TR
     - XX( 不匹配) | 据
     - 数

       字 节 1 [ 7 : 4 ]
     - |
       1
       |
       |
     - 数据字    | 数 3:0]  | 据 | | |
     -
     -

         |
         |

   * - 过      |滤器1： |
     - | |
     - |
     - |
     - |
     - |
     - |
     - |
     - |

   * - ACR0[7:0]
     - AC R1[7:4]
     -
     -
     -
     - AC R1[3:0]
     - ACR3[3:0]
     -
     -

   * - AMR0[7:0]
     - AM R1[7:4]
     -
     -
     -
     - AM R1[3:0]
     - AMR3[3:0]
     -
     -

   * - 过      |滤器2： |
     - | |
     - |
     - |
     - |
     - |
     - |
     - |
     - |

   * - ACR2[7:0]
     - AC R3[7:4]
     -
     -
     -
     -
     -
     -
     -

   * - AMR2[7:0]
     - AM R3[7:4]
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 16 16 16 16 16 16
   :header-rows: 0


   * - **扩展帧格 |式，单过  |滤模式**  |
     - | | |
     -
     -
     -
     -

   * - 接        |收buffer  |
     - | |
     - |
       |
     - |
       |
     - |
       |
     - |
       |

   * - 地        |址：0x44  |
     - 0x48       | |
     - 0x4c      | |
     - 0x50   | |
     - |
     - |

   * - ID28…ID21
     - ID20…ID13
     - ID12…ID5
     - I D4…ID0
     - RTR
     - XX(不匹配)     |

   * - 过滤器：  |
     - |
     - |
     - |
     - |
     - |

   * - ACR0[7:0]
     - ACR1[7:0]
     - ACR2[7:0]
     - ACR 3[7:2]
     -
     - A CR3[1:0]不匹配 |

   * - AMR0[7:0]
     - AMR1[7:0]
     - AMR2[7:0]
     - AMR 3[7:2]
     -
     - A MR3[1:0]不匹配 |


.. list-table::
   :widths: 16 16 16 16 16 16
   :header-rows: 0


   * - **扩展帧 |格式， |双过滤 |模式** |
     - | | | |
     -
     -
     -
     -

   * - 接收   |buffer
     - |
     - |
     - |
     - |
     - |

   * - 地址   |：0x44 |
     - x48     | |
     - x4C        | |
     - x50       | |
     - |
        |
     - |
        |

   * - ID28…ID21
     - I D20…ID13
     - ID12~ ID5(不匹配) | D
     - ID4~I 不匹配) | (不匹配
     - RTR | (不匹配) |
     - XX

   * - 过滤   |器1：  |
     - | |
     - |
       |
     - |
       |
     - |
       |
     - |
       |

   * - ACR0[7:0]
     - A CR1[7:0]
     -
     -
     -
     -

   * - AMR0[7:0]
     - A MR1[7:0]
     -
     -
     -
     -

   * - 过滤 |器2：  |
     - | |
     -
     -
     -
     -

   * - ACR2[7:0]
     - A CR3[7:0]
     -
     -
     -
     -

   * - AMR2[7:0]
     - A MR3[7:0]
     -
     -
     -
     -


波特率
^^^^^^^^^^^^^^^^^^^^^

可通过BT0 和BT1寄存器设置波特率，波特率的分频值（BRP）低6bit存入BT0寄存器BRP位，高4bit存入BT2寄存器BRP位。

如BRP=(SystemCoreClock/2)/2/ Baudrate/(1 + (BT1.
TSEG1+ 1) + (BT1.
TSEG2 + 1)) – 1

值得注意的是需要确保BRP的值为整数，即(SystemCoreClock/2)/2/ Baudrate为整数，即(1 + (BT1.
TSEG1+ 1) + (BT1.
TSEG2 + 1))能被((SystemCoreClock/2)/2/ Baudrate)整除。

采样点 = ( BT1.
TSEG1 + 1)/((1 + (BT1.
TSEG1+ 1) + (BT1.
TSEG2 + 1))*100%

如图 6‑42 波特率设置示意图所示。

|Featur043|

图 6‑42 波特率设置示意图

错误处理
^^^^^^^^^^^^^^^^^^^^^^

CAN 模块包括两个错误计数器：接收错误计数器RXERR和发送错误计数器TXERR。当发生错误时，它们会根据 CAN 2.0 规范自动递增。

错误的类型（位错误、格式错误、填充错误或是其他错误）和错误在帧中的位置，可以通过错误代码捕捉寄存器ECC查询。

错误报警限制寄存器EWLIM用于设定当接收/发送错误个数达到指定值时触发警告，默认值是96。当发送错误计数器或是接收错误计数器超过错误报警限制寄存器设置的值时，错误状态寄存器(SR.
ERRWARN = 1)置1，如果错误中断使能(IE.
ERRWARN = 1)，产生错误中断(IF.
ERRWARN = 1)。

如果任何一个错误计数器超过127是，CAN进入错误被动状态（Error Passive），如果主动错误中断使能(IE.
ERRPASS = 1)，产生错误主动中断(IF.
ERRPASS = 1)。

如果发送错误计数器超过了255，总线状态位(SR.
BUSOFF)会被置1，总线关闭，CAN就会进入复位模式。当清除控制寄存器的复位模式(CR.
RST)，CAN退出复位模式。

睡眠模式
^^^^^^^^^^^^^^^^^^^^^^

CAN可以工作在低功耗的睡眠模式。通过设置控制寄存器CR.SLEEP = 1，进入睡眠模式。

唤醒睡眠模式可以通过以下三种：

-  总线上有活动

-  配置睡眠中断使能，触发睡眠唤醒中断

-  清除睡眠位（CR.SLEEP =0）

如果是总线上有活动唤醒睡眠模式，CAN 直到检测到总线空闲，并且接收到11bit后，才接受报文。在复位模式下，CAN不能进入睡眠模式。

仅听模式
^^^^^^^^^^^^^^^^^^^^^^

配置CR.
LOM = 1，进入仅听模式。（至少需要三个节点）。

CAN工作在仅听模式，只接收数据，不发送数据。即使接收成功，也不发送应答位。

初始化和配置
^^^^^^^^^^^^^^^^^^^^^^^^

初始化

-  配置中断使能寄存器

-  选择单/双过滤模式和复位模式

-  配置验收寄存器(ACR0—ACR3) 和验收屏蔽寄存器(AMR0—AMR3)

-  配置总线定时寄存器0(BTR0)和1(BTR1),设置波特率

-  配置CR寄存器，退出复位模式

设置发送数据

-  查看发送buffer状态位，SR.
  TXBR

-  如果可以写入新的报文发送，在发送buffer中写入数据 (配置寄存器INFO，DATA0—DATA11)

-  配置命令寄存器CMD，设置CMD.
  TXREQ，发送数据请求，或CMD.
  SRR，自接收请求

-  设置接收数据

-  查看接收中断状态IF.
  RXDA (使能接收中断)或是接收buffer状态寄存器SR.
  RXDA

-  当读取接收buffer里的数据后(寄存器INFO，DATA0—DATA11)，将CMD.
  RRB置1，释放接收FIFO。

.. _寄存器映射-8:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - CAN0BASE：0 |x400A8000
     - |
     -
     -
     -

   * - CR
     - 0x00
     -
     - 0x01
     - 控制寄存器                 |

   * - CMD
     - 0x04
     -
     - 0x00
     - 命令寄存器                 |

   * - SR
     - 0x08
     -
     - 0x3C
     - 状态寄存器                 |

   * - IF
     - 0x0C
     -
     - 0x00
     - 中断标志寄存器             |

   * - IE
     - 0x10
     -
     - 0x00
     - 中断使能寄存器             |

   * - BT2
     - 0x14
     -
     - 0x00
     - 总线定时器2                |

   * - BT0
     - 0x18
     -
     - 0x00
     - 总线定时器0                |

   * - BT1
     - 0x1C
     -
     - 0x00
     - 总线定时器1                |

   * - AFM
     - 0x24
     -
     - 0x00
     - 过滤方式选择寄存器         |

   * - AFE
     - 0x28
     -
     - 0x00
     - 过滤使能寄存器AFE          |

   * - ALC
     - 0x2C
     -
     - 0x00
     - 仲裁丢失捕捉               |

   * - ECC
     - 0x30
     -
     - 0x00
     - 错误代码捕捉               |

   * - EWLIM
     - 0x34
     -
     - 0x60
     - 错误报警限制               |

   * - RXERR
     - 0x38
     -
     - 0x00
     - 接收错误计数               |

   * - TXERR
     - 0x3C
     -
     - 0x00
     - 发送错误计数               |

   * - INFO
     - 0x40
     -
     - 0x00
     - 帧格式                     |

   * - DATA0~11
     - 0x44 ~0x70
     -
     - 0x00
     - 数据0~11寄存器             |

   * - RMCNT
     - 0x74
     -
     - 0x00
     - 接收数据计数寄存器         |

   * - ACR0~15
     - 0 x300~ 0x33C
     -
     - 0x00
     - 验收寄存器0~15             |

   * - AMR0~15
     - 0 x380~ 0x3BC
     -
     - 0x00
     - 验收屏蔽寄存器0~15         |


.. _寄存器描述-8:

寄存器描述
~~~~~~~~~~~~~~~

控制寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x00
     -
     - 0x01
     - 控制寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - -
     - STM
     - LOM
     - RST


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - SLEEP
     - 1：进入                                     | 式，有总线活动或中断时唤醒并自动清零此位 |

       0：正常模式                                 |

   * - 3
     - -
     - -

   * - 2
     - STM
     - 1 ：自                                        | ，即使没有应答，CAN控制器也可以成功发送  |

       0 ：正常模式，成功发送数据，需要应答信号    |

   * - 1
     - LOM
     - 1 ：仅听模式                                |

       0 ：正常模式                                |

   * - 0
     - RST
     - 1 ：复位模式                                |

       0 ：正常模式                                |

       注：复位模                                  | 收到’1’-’0’跳变后，CAN控制器回到工作模式 |


*注：CR.SLEEP 只能在正常模式下写；CR[2：1] 在正常模式和复位模式下都可以写*

命令寄存器 CMD
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CMD
     - 0x04
     -
     - 0x00
     - 命令寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - SRR
     -
     - RRB
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31：5 |
     - - |
     - - |

   * - 4
     - SRR
     - 1：                                         | 式下，自接收请求，数据可以同时发送和接收 |

   * - 3
     - CLROV
     - 1：清除数据溢出状态位                       |

   * - 2
     - RRB
     - 1：释放接收缓冲                             |

   * - 1
     - ABTTX
     - 1：取消下一个发送请求                       |

   * - 0
     - TXREQ
     - 1：工作模式下，发送数据请求                 |


注1：同时设置CMD.
ABTTX =1，CMD.
TXREQ =1，在发生总线错误和丢失仲裁的时候，数据只发送一次

注2：同时设置CMD.
SRR =1，CMD.
TXREQ =1,那么CMD.
SRR =1无效

注3：同时设置CMD ABTTX =1 CMD.
SRR =1，在发生总线错误和丢失仲裁的时候，数据只发送一次

注4：发送请求位（CMD.
TXREQ）不能通过设置CMD.
TXREQ =0 取消发送请求，只能通过设置发送终止命令(CMD.
ABTTX =1)取消

注5：命令寄存器只写，读清零。

状态寄存器 SR
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SR
     - 0x08
     -
     - 0x3C
     - 状态寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - BUSOFF
     - E RRWARN
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31：8 |
     - - |
     - - |

   * - 7
     - BUSOFF
     - 1：CAN                                      | 控制器处于总线关闭状态，没有参与到总线活动  |

       0：CAN 控制器处于总线开启状态，参与总线活动 |

   * - 6
     - ERRWARN
     - 1 一个错误计数器达到错误限制寄存器设置的值 |

       0：错误计数器的值小于错误限制寄存器设置的值 |

   * - 5
     - TXBUSY
     - 1：正在发送报文                             |

       0：空闲                                     |

   * - 4
     - RXBUSY
     - 1：正在接收报文                             |

       0：空闲                                     |

   * - 3
     - TXOK
     - 1：上一个报文发送成功完成                   |

       0：上一次的报文没有成功发送                 |

   * - 2
     - TXBR
     - 1：可以写入新的报文发送                     |

       0：正在处理前面的发送，现在不能写新的报文   |

   * - 1
     - RXOV
     - 1：数据                                     | 在接收FIFO里没有足够的空间导致数据的丢失 |


       上一次写入清除数据溢出命令后，没有数据溢出 |

   * - 0
     - RXDA
     - 1：接收                                     | fer满。接收buffer里有一个或多个数据可以读取 |

       0：接收buffer空。没有可读数据               |


中断状态寄存器 IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x0C
     -
     - 0x00
     - 中断标志寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - BUSERR
     - A RBLOST
     - E ASS
     -
     -
     - E ARN
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31：8 |
     - - |
     - - |

   * - 7
     - BUSERR
     - CAN控制器检测到总线错误                     |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 6
     - ARBLOST
     - CAN控制器丢失仲裁变成接收方                 |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 5
     - ERRPASS
     - 从被动错                                    | 主动错误，或是至少一个错误计数器超过127  |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 4
     - WKUP
     - 在睡眠模式下的CAN控制器检测到总线活动       |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 3
     - RXOV
     - 数据溢出                                    |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 2
     - ERRWARN
     - 错误（SR.
       ERRWARN或SR.BUSOFF 0-to-1 或      | 1-to-0）                                    |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 1
     - TXBR
     - 可以写入新的报文，发送buffer状态位(SR.
       | TXRDY)从0变成1                              |

       1：中断已产生                               |

       0：中断未产生                               |

   * - 0
     - RXDA
     -


注：各中断状态清除(除接收中断)，均为读清除。对于接收中断，需要将CMD寄存器RRB位写1清除。

中断使能寄存器 IE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x10
     -
     - 0x00
     - 中断使能寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - BUSERR
     - A RBLOST
     - E ASS
     -
     -
     - E ARN
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31：8 |
     - - |
     - - |

   * - 7
     - BUSERR
     - 总线错误使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 6
     - ARBLOST
     - 丢失仲裁使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - ERRPASS
     - 主动错误使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 4
     - WKUP
     - 睡眠唤醒使能                                |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - RXOV
     - 接收报文溢出使能                            |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - ERRWARN
     - 错误使能                                    |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - TXBR
     - 可以写入新的报文使能                        |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - RXDA
     - 接收中断使能                                |

       1：使能                                     |

       0：禁能                                     |


总线定时器高四位寄存器BT2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BT2
     - 0x14
     -
     - 0x00
     - 总线定时器高四位寄存器2    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - BRP
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3:0
     - BRP
     - Baudrate Prescale，波特率预分频值高四位     |

       CAN时间单位=2*Tsysclk*(BT2.BRP<<6+ BT0.BRP  | +1)


总线定时器BT0
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BT0
     - 0x18
     -
     - 0x00
     - 总线定时器0                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SJW
     -
     - BRP
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:6
     - SJW
     - 同步跳变宽度                                |

   * - 5:0
     - BRP
     - Baudrate Prescale，波特率分频低6位          |

       CAN时间单位=2*Tsysclk*(BT2.BRP<<6+ BT0.BRP  | +1)


总线定时器BT1
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BT1
     - 0x1C
     -
     - 0x00
     - 总线定时器1                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SAM
     - TSEG2
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - SAM
     - 采样次数                                    |

       0：1次                                      |

       1：3次                                      |

   * - 6:4
     - TSEG2
     - t_tseg2 = CAN时间单位 \* (TSEG2+1)          |

   * - 3:0
     - TSEG1
     - t_tseg1 = CAN时间单位 \* (TSEG1+1)          |


过滤方式选择寄存器AFM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AFM
     - 0x24
     -
     - 0x00
     - 过滤方式选择寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - AFM15
     - AFM14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - AFM7
     - AFM6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - AFM15
     - 过滤器15的滤波方式                          |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 14
     - AFM14
     - 过滤器14的滤波方式                          |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 13
     - AFM13
     - 过滤器13的滤波方式                          |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 12
     - AFM12
     - 过滤器12的滤波方式                          |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 11
     - AFM11
     - 过滤器11的滤波方式                          |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 10
     - AFM10
     - 过滤器10的滤波方式                          |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 9
     - AFM9
     - 过滤器9的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 8
     - AFM8
     - 过滤器8的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 7
     - AFM7
     - 过滤器7的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 6
     - AFM6
     - 过滤器6的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 5
     - AFM5
     - 过滤器5的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 4
     - AFM4
     - 过滤器4的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 3
     - AFM3
     - 过滤器3的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 2
     - AFM2
     - 过滤器2的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 1
     - AFM1
     - 过滤器1的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |

   * - 0
     - AFM0
     - 过滤器0的滤波方式                           |

       1：单滤波（32）位，只用于扩展帧             |

       0：双滤波（16）位，只用于标准帧             |


过滤使能寄存器AFE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AFE
     - 0x28
     -
     - 0x00
     - 过滤使能寄存器AFE          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - AFE15
     - AFE14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - AFE7
     - AFE6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15
     - AFE15
     - 滤波器15的使能                              |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 14
     - AFE14
     - 滤波器14的使能                              |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 13
     - AFE13
     - 滤波器13的使能                              |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 12
     - AFE12
     - 滤波器12的使能                              |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 11
     - AFE11
     - 滤波器11的使能                              |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 10
     - AFE10
     - 滤波器10的使能                              |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 9
     - AFE9
     - 滤波器9的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 8
     - AFE8
     - 滤波器8的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 7
     - AFE7
     - 滤波器7的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 6
     - AFE6
     - 滤波器6的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 5
     - AFE5
     - 滤波器5的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 4
     - AFE4
     - 滤波器4的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 3
     - AFE3
     - 滤波器3的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 2
     - AFE2
     - 滤波器2的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 1
     - AFE1
     - 滤波器1的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |

   * - 0
     - AFE0
     - 滤波器0的使能                               |

       1：使能滤波                                 | 据滤波规则进行包收取，默认所有滤波器使能 |

       0：关闭滤滤器，不收取该滤波器对应的包       |


仲裁丢失捕捉寄存器 ALC
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ALC
     - 0x2C
     -
     - 0x00
     - 仲裁丢失捕捉               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - ER ode
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4:0
     - ERR_Code
     - 详见下表                                    |


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - ALC[4：0] |
     - 十进制值 |  |
     - 功能                                        |

                                                      |

   * - 00000
     - 00
     - 仲裁丢失在识别码的bit1(ID.28)               |

   * - 00001
     - 01
     - 仲裁丢失在识别码的bit2(ID.27)               |

   * - 00010
     - 02
     - 仲裁丢失在识别码的bit3(ID.26)               |

   * - 00011
     - 03
     - 仲裁丢失在识别码的bit4(ID.25)               |

   * - 00100
     - 04
     - 仲裁丢失在识别码的bit5(ID.24)               |

   * - 00101
     - 05
     - 仲裁丢失在识别码的bit6(ID.23)               |

   * - 00110
     - 06
     - 仲裁丢失在识别码的bit7(ID.22)               |

   * - 00111
     - 07
     - 仲裁丢失在识别码的bit8(ID.21)               |

   * - 01000
     - 08
     - 仲裁丢失在识别码的bit9(ID.20)               |

   * - 01001
     - 09
     - 仲裁丢失在识别码的bit10(ID.19)              |

   * - 01010
     - 10
     - 仲裁丢失在识别码的bit11(ID.18)              |

   * - 01011
     - 11
     - 仲裁丢失在SRTR位                            |

   * - 01100
     - 12
     - 仲裁丢失在IDE位                             |

   * - 01101
     - 13
     - 仲                                          | 在识别码的bit12(ID.17)，只存在扩展帧格式 |

   * - 01110
     - 14
     - 仲                                          | 在识别码的bit13(ID.16)，只存在扩展帧格式 |

   * - 01111
     - 15
     - 仲裁丢失在识别码的bit14(ID.15)              | ，只存在扩展帧格式                          |

   * - 10000
     - 16
     - 仲裁丢失在识别码的bit15(ID.14)              | ，只存在扩展帧格式                          |

   * - 10001
     - 17
     - 仲裁丢失在识别码的bit16(ID.13)              | ，只存在扩展帧格式                          |

   * - 10010
     - 18
     - 仲裁丢失在识别码的bit17(ID.12)              | ，只存在扩展帧格式                          |

   * - 10011
     - 19
     - 仲裁丢失在识别码的bit18(ID.11)              | ，只存在扩展帧格式                          |

   * - 10100
     - 20
     - 仲裁丢失在识别码的bit19(ID.10)              | ，只存在扩展帧格式                          |

   * - 10101
     - 21
     - 仲裁丢失在识别码的bit20(ID.
       9)              | ，只存在扩展帧格式                          |

   * - 10110
     - 22
     - 仲裁丢失在识别码的bit21(ID.
       8)              | ，只存在扩展帧格式                          |

   * - 10111
     - 23
     - 仲裁丢失在识别码的bit22(ID.
       7)              | ，只存在扩展帧格式                          |

   * - 11000
     - 24
     - 仲裁丢失在识别码的bit23(ID.
       6)              | ，只存在扩展帧格式                          |

   * - 11001
     - 25
     - 仲裁丢失在识别码的bit24(ID.
       5)              | ，只存在扩展帧格式                          |

   * - 11010
     - 26
     - 仲裁丢失在识别码的bit25(ID.
       4)              | ，只存在扩展帧格式                          |

   * - 11011
     - 27
     - 仲裁丢失在识别码的bit26(ID.
       3)              | ，只存在扩展帧格式                          |

   * - 11100
     - 28
     - 仲裁丢失在识别码的bit27(ID.
       2)              | ，只存在扩展帧格式                          |

   * - 11101
     - 29
     - 仲裁丢失在识别码的bit28(ID.
       1)              | ，只存在扩展帧格式                          |

   * - 11110
     - 30
     - 仲裁丢失在识别码的bit29(ID.
       0)              | ，只存在扩展帧格式                          |

   * - 11111
     - 31
     - 仲裁丢失在RTR位，只存在扩展帧格式           |


错误代码 ECC
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ECC
     - 0x30
     -
     - 0x00
     - 错误代码捕捉               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ERRCODE
     -
     - DIR
     - S ODE
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:6
     - ERRCODE
     - 错误代码：                                  |

       00：位错误                                  |

       01：格式错误                                |

       10：填充错误                                |

       11：其它错误                                |

   * - 5
     - DIR
     - 0 发送时发生错误                            |

       1 接收时发生错误                            |

   * - 4:0
     - SEGCODE
     - 错误段码，见下表                            |


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - ECC[4：0] |
     - 十进制值 |  |
     - 功能                                        |

                                                      |

   * - 00000
     - 00
     - -

   * - 00001
     - 01
     - -

   * - 00010
     - 02
     - ID28—ID21

   * - 00011
     - 03
     - 帧开始                                      |

   * - 00100
     - 04
     - SRTR位                                      |

   * - 00101
     - 05
     - IDE位                                       |

   * - 00110
     - 06
     - ID20—ID18

   * - 00111
     - 07
     - ID17—ID13

   * - 01000
     - 08
     - CRC序列                                     |

   * - 01001
     - 09
     - 保留位0                                     |

   * - 01010
     - 10
     - 数据区                                      |

   * - 01011
     - 11
     - 数据长度代码                                |

   * - 01100
     - 12
     - RTR位                                       |

   * - 01101
     - 13
     - 保留位1                                     |

   * - 01110
     - 14
     - ID.4 – ID.0

   * - 01111
     - 15
     - ID.12 – ID.5

   * - 10000
     - 16
     - -

   * - 10001
     - 17
     - 积极错误标志                                |

   * - 10010
     - 18
     - -

   * - 10011
     - 19
     - 支配（控制）位误差                          |

   * - 10100
     - 20
     - -

   * - 10101
     - 21
     - -

   * - 10110
     - 22
     - 消极错误标志                                |

   * - 10111
     - 23
     - 错误定义符                                  |

   * - 11000
     - 24
     - CRC定义符                                   |

   * - 11001
     - 25
     - 应答通道                                    |

   * - 11010
     - 26
     - 帧结束                                      |

   * - 11011
     - 27
     - 应答定义符                                  |

   * - 11100
     - 28
     - 溢出标志                                    |


错误报警限制EWLIM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - EWLIM
     - 0x34
     -
     - 0x60
     - 错误报警限制               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - EWLIM
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - EWLIM
     - 注意：在复位模式下可读可写                  |

       在正常模式下只读                            |


接收错误计数器 RXERR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RXERR
     - 0x38
     -
     - 0x00
     - 接收错误计数               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ERRCNT
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - ERRCNT
     - 当前接收错误计数器的值                      |

       注意：在复位模式下可读可写                  |

       在正常模式下只读                            |


发送错误计数器 TXERR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TXERR
     - 0x3C
     -
     - 0x00
     - 发送错误计数               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ERRCNT
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - ERRCNT
     - 发送错误计数器当前值                        |

       注意：在复位模式下可读可写                  |

       在正常模式下只读                            |


帧信息寄存器INFO
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INFO
     - 0x40
     -
     - 0x00
     - 帧格式                     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - FF
     - RTR
     - -
     -
     - DLC
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - FF
     - 帧格式                                      |

       0 标准帧格式                                |

       1 扩展帧格式                                |

   * - 6
     - RTR
     - 帧格式                                      |

       0 数据帧                                    |

       1 远程帧                                    |

   * - 5:4
     - -
     - -

   * - 3:0
     - DLC
     - 数据长度                                    |


<标准帧格式>数据寄存器0 DATA0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA0
     - 0x44
     -
     - 0x00
     - 数据0寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - ID
     - 标识符ID[28：21]                            |


<标准帧格式>数据寄存器1 DATA1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA1
     - 0x48
     -
     - 0x00
     - 数据1寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID
     -
     -
     - -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:5
     - ID
     - 标识符ID[20：18]                            |

   * - 4:0
     - -
     - -


<标准帧格式>数据寄存器2 DATA2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA2
     - 0x4C
     -
     - 0x00
     - 数据2寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节0                                   |


<标准帧格式>数据寄存器3 DATA3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA3
     - 0x50
     -
     - 0x00
     - 数据3寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节1                                   |


<标准帧格式>数据寄存器4 DATA4
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA4
     - 0x54
     -
     - 0x00
     - 数据4寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节2                                   |


<标准帧格式>数据寄存器5 DATA5
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA5
     - 0x58
     -
     - 0x00
     - 数据5寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节3                                   |


<标准帧格式>数据寄存器6 DATA6
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA6
     - 0x5C
     -
     - 0x00
     - 数据6寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节4                                   |


<标准帧格式>数据寄存器7 DATA7
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA7
     - 0x60
     -
     - 0x00
     - 数据7寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节5                                   |


<标准帧格式>数据寄存器8 DATA8
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA8
     - 0x64
     -
     - 0x00
     - 数据8寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节6                                   |


<标准帧格式>数据寄存器9 DATA9
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA9
     - 0x68
     -
     - 0x00
     - 数据9寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节7                                   |


<扩展帧格式>数据寄存器0 DATA0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA0
     - 0x44
     -
     - 0x00
     - 数据0寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - ID
     - 标识符ID[28：21]                            |


<扩展帧格式>数据寄存器1 DATA1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA1
     - 0x48
     -
     - 0x00
     - 数据1寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - ID
     - 标识符ID[20：13]                            |


<扩展帧格式>数据寄存器2 DATA2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA2
     - 0x4C
     -
     - 0x00
     - 数据2寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - ID
     - 标识符ID[12：5]                             |


<扩展帧格式>数据寄存器3 DATA3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA3
     - 0x50
     -
     - 0x00
     - 数据3寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ID
     -
     -
     -
     -
     - -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:3
     - ID
     - 标识符ID[4：0]                              |

   * - 2:0
     - -
     - -


<扩展帧格式>数据寄存器4 DATA4
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA4
     - 0x54
     -
     - 0x00
     - 数据4寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节0                                   |


<扩展帧格式>数据寄存器5 DATA5
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA5
     - 0x58
     -
     - 0x00
     - 数据5寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节1                                   |


<扩展帧格式>数据寄存器6 DATA6
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA6
     - 0x5C
     -
     - 0x00
     - 数据6寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节2                                   |


<扩展帧格式>数据寄存器7 DATA7
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA7
     - 0x60
     -
     - 0x00
     - 数据7寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节3                                   |


<扩展帧格式>数据寄存器8 DATA8
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA8
     - 0x64
     -
     - 0x00
     - 数据8寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节4                                   |


<扩展帧格式>数据寄存器9 DATA9
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA9
     - 0x68
     -
     - 0x00
     - 数据9寄存器                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节5                                   |


<扩展帧格式>数据寄存器10 DATA10
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA10
     - 0x6C
     -
     - 0x00
     - 数据10寄存器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节6                                   |


<扩展帧格式>数据寄存器11 DATA11
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA11
     - 0x70
     -
     - 0x00
     - 数据11寄存器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7:0
     - DATA
     - 数据字节7                                   |


接收报文数目寄存器RMCNT
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RMCNT
     - 0x74
     -
     - 0x00
     - 接收数据计数寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - RMC
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4:0
     - RMC
     - 每次接收到报文数目加1，                     |

       释放接收缓冲数目减1                         |

       复位模式下，寄存器清零                      |


验收寄存器ACR
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR0
     - 0x300
     -
     - 0x00
     - 验收寄存器0                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR1
     - 0x304
     -
     - 0x00
     - 验收寄存器1                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR2
     - 0x308
     -
     - 0x00
     - 验收寄存器2                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR3
     - 0x30C
     -
     - 0x00
     - 验收寄存器3                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR4
     - 0x310
     -
     - 0x00
     - 验收寄存器4                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR5
     - 0x314
     -
     - 0x00
     - 验收寄存器5                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR6
     - 0x318
     -
     - 0x00
     - 验收寄存器6                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR7
     - 0x31C
     -
     - 0x00
     - 验收寄存器7                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR8
     - 0x320
     -
     - 0x00
     - 验收寄存器8                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR9
     - 0x324
     -
     - 0x00
     - 验收寄存器9                |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR10
     - 0x328
     -
     - 0x00
     - 验收寄存器10               |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR11
     - 0x32C
     -
     - 0x00
     - 验收寄存器11               |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR12
     - 0x330
     -
     - 0x00
     - 验收寄存器12               |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR13
     - 0x334
     -
     - 0x00
     - 验收寄存器13               |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR14
     - 0x338
     -
     - 0x00
     - 验收寄存器14               |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ACR15
     - 0x33C
     -
     - 0x00
     - 验收寄存器15               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ACR
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ACR
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ACR
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ACR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - ACR
     - 当                                          | [n] = 1时，ACR[n]和AMR[n]构成一个32位过滤器 |

       当                                          | [n] = 0时，ACR[n]和AMR[n]构成两个16位过滤器 |

       注 : ACR & AMR == ID & AMR的Message通过过滤 |


验收屏蔽寄存器AMR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR0
     - 0x380
     -
     - 0x00
     - 验收屏蔽寄存器0            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR1
     - 0x384
     -
     - 0x00
     - 验收屏蔽寄存器1            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR2
     - 0x388
     -
     - 0x00
     - 验收屏蔽寄存器2            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR3
     - 0x38C
     -
     - 0x00
     - 验收屏蔽寄存器3            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR4
     - 0x390
     -
     - 0x00
     - 验收屏蔽寄存器4            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR5
     - 0x394
     -
     - 0x00
     - 验收屏蔽寄存器5            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR6
     - 0x398
     -
     - 0x00
     - 验收屏蔽寄存器6            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR7
     - 0x39C
     -
     - 0x00
     - 验收屏蔽寄存器7            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR8
     - 0x3A0
     -
     - 0x00
     - 验收屏蔽寄存器8            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR9
     - 0x3A4
     -
     - 0x00
     - 验收屏蔽寄存器9            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR10
     - 0x3A8
     -
     - 0x00
     - 验收屏蔽寄存器10           |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR11
     - 0x3AC
     -
     - 0x00
     - 验收屏蔽寄存器11           |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR12
     - 0x3B0
     -
     - 0x00
     - 验收屏蔽寄存器12           |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR13
     - 0x3B4
     -
     - 0x00
     - 验收屏蔽寄存器13           |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR14
     - 0x3B8
     -
     - 0x00
     - 验收屏蔽寄存器14           |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMR15
     - 0x3BC
     -
     - 0x00
     - 验收屏蔽寄存器15           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - AMR
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - AMR
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - AMR
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - AMR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - AMR
     - 当                                          | [n] = 1时，ACR[n]和AMR[n]构成一个32位过滤器 |

       当                                          | [n] = 0时，ACR[n]和AMR[n]构成两个16位过滤器 |

       注 : ACR & AMR == ID & AMR的Message通过过滤 |


脉冲宽度调制（PWM）发生器
-------------------------------

.. _概述-10:

概述
~~~~~~~~~~~~

SWM241系列所有型号PWM操作均相同，不同型号PWM通道数可能不同。使用前需使能PWM模块时钟。

PWM模块提供了4组（PWM0、PMW1、PWM2、PWM3）、8路（PWM0A、PWM0B、PWM1A、PWM1B、PWM2A、PWM2B、PWM3A、PWM3B）独立通道，支持边沿模式、中心对称模式。

中心对称模式下，输出是互补输出。如PWM0A驱动PWM0A和PWM0AN两个输出信号，两个信号周期相等、电平值相反，且可设置死区。

.. _特性-10:

特性
~~~~~~~~~~~~

-  4组16位宽PWM控制，最多可产生8路PWM信号

-  支持边沿模式、中心对称模式

-  每个PWM的输出可以独立选择反相输出

-  提供新周期开始中断，高电平结束中断、刹车中断以及中心对称模式下的半周期中断

-  支持硬件死区设置

-  可选择初始输出电平选择

-  PWM输出的固定值可配

-  PWM空闲状态下的输出可配

-  支持刹车功能

-  支持硬件自动触发ADC采样

-  每路预分频可独立配置

.. _模块结构框图-7:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur044|

图 6‑43 PWM模块结构框图

.. _功能描述-11:

功能描述
~~~~~~~~~~~~~~

时钟分频
^^^^^^^^^^^^^^^^^^^^^^

通过CLKDIV寄存器，可进行PWM计数时钟周期配置，支持计数周期最多为PWM模块时钟周期的256倍。

注意：分频寄存器需要在初始电平设置完成后进行配置。

PWM模块建议按照如下顺序配置

-  配置初始电平

-  配置周期及中断相关寄存器

-  初始化时钟分频

-  引脚功能切换

-  PWM使能

死区保护
^^^^^^^^^^^^^^^^^^^^^^

PWM输出时Dead Zone(死区)的作用是在电平翻转时插入一个时间间隔，避免关闭前一个设备和打开后一个设备时，因为开关速度的问题，出现同时开启状态而增加负荷的情况(在没有彻底关闭前打开了后一个设备)，尤其是电流过大时容易造成短路等损坏设备。

此PWM模块每一路PWM的死区都独立配置，在独立模式和中心对称模式下均可配。效果为将上升沿推后指定周期，但其配置值必须小于高电平持续时长的配置值，且具有死区保护，即当高电平周期设置为全0或者等于周期数时，死区设置失效。

死区示意图如图 6‑44所示：

|Featur045|

图 6‑44 PWM死区示意图

模式选择
^^^^^^^^^^^^^^^^^^^^^^

通过配置MODEx寄存器，配置PWM输出模式，包括边沿、中心对称模式。

半周期中断只存在于中心对称模式下。

**边沿模式**

边沿模式下，每一路PWM输出独立配置，彼此间相互无影响，PWM计数周期、高电平持续时长、死区时长以及起始输出电平可独立配置。

支持的中断类型为：

-  新周期开始中断

-  高电平结束中断

-  刹车中断

示意图如图 6‑45所示：

|Featur046|

图 6‑45边沿模式

|Featur047|

图 6‑46 边沿模式带死区

**中心对称模式**

PWMxA和PWMxB两路输出互相独立，且各自都有其反相输出引脚。与边沿模式相比，中心对称模式精度加倍、频率减半。

此模式下支持的中断类型为：

-  新周期开始中断

-  高电平结束中断

-  半周期中断

-  刹车中断

在此模式下，PWM计数周期、高电平持续时长、死区时长以及起始输出电平可独立配置，具有半周期中断功能（即中心点中断），且该功能仅存在于此模式下，其他模式不可用。每一路均可单独进行使能、屏蔽及查询操作。详情请参考寄存器HCIE、HCIF、HCIM、HCIRS寄存器。

示意图如图 6‑47所示：

|Featur048|

图 6‑47中心对称模式带死区

在此模式下，在半周期和整周期处都会更新高电平周期、计数周期、以及ADC触发阈值。

周期更新示意图如图 6‑48、图 6‑49所示：

|Featur049|

图 6‑48 中心对称模式周期结束更新示意图

|Featur050|

图 6‑49 中心对称模式半周期更新示意图

触发SAR ADC采样
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

PWM在任意模式下可以触发ADC，每一路输出独立的ADC触发信号，且每个周期可以设置两个ADC触发点。

将SAR ADC配置寄存器（CTRL）中TRIG方式设置为PWM触发。每路PWM对应2个ADTRG值，当PWM计数到指定值，可触发ADC进行采样。

具体配置方式如下：

-  配置PWMx路触发ADC控制寄存器，设置触发点是否有效以及PWM触发ADC时间点。在中心对称模式下，前半周期为设置值，后半周期为设置值的对称点，可通过ADTRGDIRx寄存器分别设置计数器递增/递计数时ADTRGXn是否有效。

-  配置ADC的触发方式为PWM触发

-  使能PWM模块EN位，当计数值到达MATCH设置值时，触发ADC配置寄存器（CTRL）中选中的通道（CHx）进行采样，采样完成后，将产生EOC标志位，并产生ADC中断

示意图如图 6‑50所示：

|Featur051|

图 6‑50 PWM触发ADC采样示意图

.. _中断配置与清除-5:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^

PWM模块提供了高电平结束中断、新周期起始中断及半周期中断，每一路均可单独进行使能、屏蔽及查询操作。每组PWM（2路）共享一根中断线。通过IE寄存器、IF寄存器、IM寄存器、IRS寄存器进行操作。IRS寄存器只受EN寄存器影响，当IM寄存器使能后，IF寄存器对应位将被屏蔽。不同模式下工作方式如下：

-  所有模式下，均通过对IF寄存器写1清除对应中断

-  对于边沿模式，每路均可单独产生中断

   -  新周期开始中断

   -  高电平结束中断

   -  刹车中断

-  对于中心对称模式，可发生半周期中断

   -  新周期开始中断

   -  高电平结束中断

   -  刹车中断

   -  半周期中断

可通过配置刹车中断使能寄存器BRKIE、中断使能寄存器IE、半周期中断使能寄存器HCIE等相关寄存器中相应位使能中断。当中断触发后，中断标志寄存器BRKIF、NCIF、HEIF、HCIF对应位置1。如需清除此标志，需在对应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

此模块还具备中断屏蔽功能。当配置了中断屏蔽寄存器IM时，即使数据传输结束，也不会产生中断。

刹车与暂停功能
^^^^^^^^^^^^^^^^^^^^^^^^^

PWM模块支持内部软件操作对输出进行暂停（即强制输出高/低电平，但PWM模块计数依然继续进行），外部信号输入对输出进行刹车。

**暂停功能**

PWM0~3都支持内部软件操作对输出进行暂停，通过操作FORCEO寄存器对应位配置。使对应PWM输出为固定电平，并可配置相应位输出为高电平或低电平。此时，PWM模块计数依然继续进行。当配置FORCEO寄存器中对应位，使对应PWM为正常输出时，PWM可继续输出。配置详情请见寄存器。

当PWM输出暂停时，PWM模块计数依然继续进行。

波形如图 6‑51所示：

   |Featur052|

图 6‑51输出屏蔽功能示意图

**刹车功能**

PWM0~2支持外部信号输入对输出进行暂停（刹车），输入电平可通过配置BRKCR配置，刹车时输出电平可通过BRKENx寄存器进行配置。

通过配置BRKCR寄存器选择刹车信号生效后是否停止计数。

外部信号可通过PWM_BRAKE引脚输入指定电平对PWM模块进行刹车操作，使用前配置如下：

-  配置PORTCON模块中INEN寄存器使能引脚输入功能

-  通过PORT_FUNC寄存器将引脚配置为PWM_BRAKE功能

-  对BRK相关寄存器进行设置，配置刹车输入有效电平、刹车过程中输出电平、刹车后PWM是否继续计数、该功能影响的通道

-  配置使能寄存器。使能后，当外部输入指定电平时，对应通道执行刹车功能

-  刹车电平恢复后，将根据BRK寄存器配置决定PWM波形是否继续输出

最多支持2路刹车引脚，每个引脚均可配置使能及对应PWM通道。

刹车结构图如图 6‑52所示：刹车示意图如图 6‑53所示：

|Featur053|

图 6‑52 刹车结构图

|Featur054|

图 6‑53 刹车示意图

电平翻转
^^^^^^^^^^^^^^^^^^^^^^

PWM模块支持电平翻转，可通过配置OUTCRx寄存器中INVA和INVB位，分别对应A通道和B通道。

如图 6‑54所示：

|Featur055|

图 6‑54 电平翻转示意图

.. _寄存器映射-9:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - PWM0BASE：0 |x40046000PWM1BASE：0 |x40046040PWM2BASE：0 |x40046080PWM3BASE：0 |x400460C0
     - |     |     |     |
     -
     -
     -

   * - MODEx
     - 0x00
     -
     - 0
     - 第x组PWM的工作模式控制     |

   * - PERAx
     - 0x04
     -
     - 0
     - 第x组A路PWM的计数周期，    | 1，对应一个计数时钟周期 |

   * - HIGHAx
     - 0x08
     -
     - 0
     -

   * - DZAx
     - 0x0C
     -
     - 0
     - 第x组A路                   | 度控制。必须小于HIGHA0  |

   * - PERBx
     - 0x10
     -
     - 0
     - 第x组B路PWM的计数周期，    | 1，对应一个计数时钟周期 |

   * - HIGHBx
     - 0x14
     -
     - 0
     -

   * - DZBx
     - 0x18
     -
     - 0
     - 第x组B路死区长度控制。     |

   * - OUTCRx
     - 0x1C
     -
     - 0
     - 第x组PWM输出起始值控制     |

   * - ADTRGxA0
     - 0x20
     -
     - 0
     - 第x组A路ADC触发点0         |

   * - ADTRGxA1
     - 0x24
     -
     - 0
     - 第x组A路ADC触发点1         |

   * - BRKENx
     - 0x28
     -
     - 0
     - 第x组刹车使能寄存器        |

   * - VALUEAx
     - 0x2C
     -
     - 0
     - 第x组A路当前计数值         |

   * - VALUEBx
     - 0x30
     -
     - 0
     - 第x组B路当前计数值         |

   * - ADTRGxB0
     - 0x34
     -
     - 0
     - 第x组B路ADC触发点0         |

   * - ADTRGxB1
     - 0x38
     -
     - 0
     - 第x组B路ADC触发点1         |

   * - ADTRGDIRx
     - 0x3C
     -
     - 0xFF
     - 第x组触发ADC条件寄存器     |

   * - CONFIG
     - 0x200
     -
     - 0
     - 输入脉冲触发沿控制寄存器   |

   * - FORCEO
     - 0x204
     -
     - 0
     - 强制输出寄存器             |

   * - BRKCR
     - 0x208
     -
     - 0
     - 刹车控制                   |

   * - BRKIE
     - 0x20C
     -
     - 0
     - 刹车中断使能               |

   * - BRKIF
     - 0x210
     -
     - 0
     - 刹车中断状态               |

   * - BRKIM
     - 0x214
     -
     - 0
     - 刹车中断屏蔽               |

   * - BRKIRS
     - 0x218
     -
     - 0
     - 刹车中断原始状态           |

   * - IE
     - 0x21C
     -
     - 0
     - 中断使能                   |

   * - CHEN
     - 0x220
     -
     - 0
     - PWM输出使能                |

   * - IM
     - 0x224
     -
     - 0
     - 中断屏蔽寄存器             |

   * - NCIRS
     - 0x228
     -
     - 0
     - 新周期中断原始状态         |

   * - HEIRS
     - 0x22C
     -
     - 0
     - 高电平结束中断原始状态     |

   * - NCIF
     - 0x230
     -
     - 0
     - 新周期中断状态             |

   * - HEIF
     - 0x234
     -
     - 0
     - 高电平结束中断状态         |

   * - HCIE
     - 0x238
     -
     - 0
     - 半周期中断使能             |

   * - HCIM
     - 0x23C
     -
     - 0
     - 半周期中断屏蔽             |

   * - HCIRS
     - 0x240
     -
     - 0
     - 半周期中断原始状态         |

   * - HCIF
     - 0x244
     -
     - 0
     - 半周期中断状态             |

   * - FORCEV
     - 0x248
     -
     - 0
     - 强制输出电平选择寄存器     |


.. _寄存器描述-9:

寄存器描述
~~~~~~~~~~~~~~~

PWM工作模式寄存器MODEx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - MODEx
     - 0x00
     -
     - 0
     - 第x组PWM的工作模式控制     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CLKDIV
     -
     -
     - C RCx
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:6
     - -
     - -

   * - 12:5
     - CLKDIV
     - PWM工作时钟频率相对于系统时钟的分频比选择： |

       0：无分频；                                 |

       1：2分频                                    |

       2：3分频                                    |

       …..

       255：256分频                                |

   * - 4:3
     - CLKSRCx
     - 第x组PWM的计数使能                          |

       00：常1，直接使用PWM的工作时钟计数          |

       01：使用PWM_DIV分频后的时钟计数             |

       10：使用Pulse0作为PWM的计数时钟             |

       11：使用Pulse1作为PWM的计数时钟             |

   * - 2:0
     - MODEx
     - 第x组PWM的工作模式控制                      |


       ：边沿模式，每一组PWM中的A、B两路互相独立。 |

       101：中心对称模式，综合对称模               | 补模式，由PWMX和PWMXn实现，独立配置死区  |


PWM_A路计数周期PERAx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PERAx
     - 0x04
     -
     - 0
     - 第x组A路PWM的计数周期      |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PERAx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PERAx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:0
     - PERAx
     - 第x组A                                      | M的计数周期，最小为1，对应一个计数时钟周期 |


PWM_A路高电平持续时长HIGHAx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HIGHAx
     - 0x08
     -
     - 0
     -


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - HIGHAx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - HIGHAx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:17
     - -
     - -

   * - 16:1
     - HIGHAx
     - 第x组A路PWM的高电平持续周期。               |

   * - 0
     - DELAY
     - 下降沿推迟半个PWM时钟                       | 在中心对称模式下，同样影响pwmxan的输出） |

       1：使能                                     |

       0：禁能                                     |


PWM_A路死区长度DZAx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DZAx
     - 0x0C
     -
     - 0
     - 第x组A路死区长度控制。     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DZAx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9:0
     - DZAx
     - 第x组A路死区长度控制。必须小于HIGHAx        |


PWM_B路计数周期PERBx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PERBx
     - 0x10
     -
     - 0
     - 第x组B路PWM的计数周期      |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - PERBx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PERBx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:0
     - PERBx
     - 第x组B                                      | M的计数周期，最小为1，对应一个计数时钟周期 |


PWM_B路高电平持续时长HIGHBx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HIGHBx
     - 0x14
     -
     - 0
     -


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - HIGHBx
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - HIGHBx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:17
     - -
     - -

   * - 16:1
     - HIGHBx
     - 第x组B路PWM的高电平持续周期。               |

   * - 0
     - DELAY
     - 下降沿推迟半个PWM时钟周期                   |

       1：使能                                     |

       0：禁能                                     |


PWM_B路死区长度DZBx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DZBx
     - 0x18
     -
     - 0
     - 第x组B路死区长度控制。     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DZBx
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9:0
     - DZBx
     - 第x组B路死区长度控制。必须小于HIGHBx        |


PWM输出起始值控制OUTCRx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - OUTCRx
     - 0x1C
     -
     - 0
     - 第x组PWM输出起始值控制     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - INVBNx
     - INVANx
     - I Bx
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - INVBNx
     - 1：将x组B路pwmxbn输出反相后输出             |

       0：将x组B路pwmxbn按常规输出                 |

   * - 6
     - INVANx
     - 1：将x组A路pwmxan输出反相后输出             |

       0：将x组A路pwmxan按常规输出                 |

   * - 5
     - IDLEBx
     - 1：第x组B路空闲输出为高                     |

       0：第x组B路空闲输出为低                     |

   * - 4
     - IDLEAx
     - 1：第x组A路空闲输出为高                     |

       0：第x组A路空闲输出为低                     |

   * - 3
     - INVBx
     - 1：第x组B路反向后输出                       |

       0：第x组B路正常输出                         |

   * - 2
     - INVAx
     - 1：第x组A路反向后输出                       |

       0：第x组A路正常输出                         |

   * - 1
     - INIBx
     - 1：第x组B路输出从高电平开始                 |

       0：第x组B路输出从低电平开始                 |

   * - 0
     - INIAx
     - 1：第x组A路输出从高电平开始                 |

       0：第x组A路输出从低电平开始                 |


PWM_A路触发ADC控制寄存器ADTRGxA0 (x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ADTRGxA0
     - 0x20
     -
     - 0
     - 第x组A路ADC触发点0         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     - EN

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - MATCH
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - MATCH
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:17
     - -
     - -

   * - 16
     - EN
     - 第x组A路trigger0触发点是否有效              |

       1：有效                                     |

       0：无效                                     |

   * - 15:0
     - MATCH
     - 第x组A路PWM触发ADC时间点0：                 |

       当对                                        | M计数器经过MATCH值延时后，输出ADC触发脉冲  |

       例如：EN为1，如果第x组a路计数器的值和TRIG   | A1的值相等，则trigger2adc输出一个单周期脉冲 |

       注1：当本组进入刹车状态后，不再输出脉冲。   |

       注2：当PWM工                                | 心对称模式下时，在偶数周期时，不改变tri  | ra0的值，对应的触发位置为奇数周期的对称点。 |

       注3：trigg                                  | 置为0对应第一个周期，而period设置为1表示一 | ，所以trigger的设置值至少要比period小1。 |


PWM_A路触发ADC控制寄存器ADTRGxA1(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ADTRGxA1
     - 0x24
     -
     - 0
     - 第x组A路ADC触发点1         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     - EN

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - MATCH
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - MATCH
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:17
     - -
     - -

   * - 16
     - EN
     - 第x组A路trigger1触发点是否有效              |

       1：有效                                     |

       0：无效                                     |

   * - 15:0
     - MATCH
     - 第x组A路PWM触发ADC时间点1：                 |

       当对                                        | M计数器经过MATCH值延时后，输出ADC触发脉冲  |

       例如：EN为1，如果第x组a路计数器的值和TRIG   | A1的值相等，则trigger2adc输出一个单周期脉冲 |

       注1：当本组进入刹车状态后，不再输出脉冲。   |

       注2：当PWM工                                | 心对称模式下时，在偶数周期时，不改变tri  | ra0的值，对应的触发位置为奇数周期的对称点。 |

       注3：trigg                                  | 置为0对应第一个周期，而period设置为1表示一 | ，所以trigger的设置值至少要比period小1。 |


PWM刹车使能寄存器BRKENx (x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKENx
     - 0x28
     -
     - 0
     - 第x组刹车使能寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - BRK OUT
     -
     - BR _S1
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - BRKEN_OUT
     - 1：刹车过程中输出高电平                     |

       0：刹车过程中输出低电平                     |

   * - 3
     - BRKEN_S2
     - BRAKE2引脚是否对该组PWM有效                 |

       1：有效                                     |

       0：无效                                     |

   * - 2
     - BRKEN_S1
     - BRAKE1引脚是否对该组PWM有效                 |

       1：有效                                     |

       0：无效                                     |

   * - 1
     - BRKEN_S0
     - BRAKE0引脚是否对该组PWM有效                 |

       1：有效                                     |

       0：无效                                     |

   * - 0
     - EN
     - 1：刹车功能生效                             |

       0：屏蔽刹车功能                             |


PWMA路计数值寄存器VALUEA x (x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - VALUEAx
     - 0x2C
     -
     - 0
     - 第x组A路当前计数值         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CNT
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CNT
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:0
     - CNT
     - X组A路当前对应计数值                        |


PWMB路计数值寄存器VALUEB x (x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - VALUEBx
     - 0x30
     -
     - 0
     - 第x组B路当前计数值         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CNT
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CNT
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:0
     - CNT
     - X组B路当前对应计数值                        |


PWMB路触发ADC控制寄存器ADTRGxB0 (x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ADTRGxB0
     - 0x34
     -
     - 0
     - 第x组B路ADC触发点0         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     - EN

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - MATCH
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - MATCH
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:17
     - -
     - -

   * - 16
     - EN
     - 第x组B路trigger0触发点是否有效              |

       1：有效                                     |

       0：无效                                     |

   * - 15:0
     - MATCH
     - 第x组B路PWM触发ADC时间点0：                 |

       当对                                        | M计数器经过MATCH值延时后，输出ADC触发脉冲  |

       例如：EN为1，如果第x组a路计数器的值和TRIG   | A1的值相等，则trigger2adc输出一个单周期脉冲 |

       注1：当本组进入刹车状态后，不再输出脉冲。   |

       注2：当PWM工                                | 心对称模式下时，在偶数周期时，不改变tri  | ra0的值，对应的触发位置为奇数周期的对称点。 |

       注3：trigg                                  | 置为0对应第一个周期，而period设置为1表示一 | ，所以trigger的设置值至少要比period小1。 |


PWMB路触发ADC控制寄存器ADTRGxB1(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ADTRGxB1
     - 0x38
     -
     - 0
     - 第x组B路ADC触发点1         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     - EN

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - MATCH
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - MATCH
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:17
     - -
     - -

   * - 16
     - EN
     - 第x组B路trigger1触发点是否有效              |

       1：有效                                     |

       0：无效                                     |

   * - 15:0
     - MATCH
     - 第x组B路PWM触发ADC时间点1：                 |

       当对                                        | M计数器经过MATCH值延时后，输出ADC触发脉冲  |

       例如：EN为1，如果第x组a路计数器的值和TRIG   | A1的值相等，则trigger2adc输出一个单周期脉冲 |

       注1：当本组进入刹车状态后，不再输出脉冲。   |

       注2：当PWM工                                | 心对称模式下时，在偶数周期时，不改变tri  | ra0的值，对应的触发位置为奇数周期的对称点。 |

       注3：trigg                                  | 置为0对应第一个周期，而period设置为1表示一 | ，所以trigger的设置值至少要比period小1。 |


第x组触发ADC条件寄存器ADTRGDIRx(x=0,1,2,3)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ADTRGDIRx
     - 0x3C
     -
     - 0xFF
     - 第x组触发ADC条件寄存器     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - B1INC
     - B1DEC
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - B1INC
     - ADTRGB1在奇数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 6
     - B1DEC
     - ADTRGB1在偶数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 5
     - B0INC
     - ADTRGB1在奇数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 4
     - B0DEC
     - ADTRGB0在偶数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 3
     - A1INC
     - ADTRGA1在奇数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 2
     - A1DEC
     - ADTRGA1在偶数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 1
     - A0INC
     - ADTRGA0在奇数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |

   * - 0
     - A0DEC
     - ADTRGA0在偶数周期有效使能                   |

       0：禁能                                     |

       1：使能                                     |


输入脉冲触发沿控制寄存器CONFIG
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CONFIG
     - 0x200
     -
     - 0
     - 输入脉冲触发沿控制寄存器   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - P1RISE
     - 选择输入Pulse1的触发沿                      |

       1：上升沿                                   |

       0：下降沿                                   |

   * - 3
     - P0RISE
     - 选择输入Pulse0的触发沿                      |

       1：上升沿                                   |

       0：下降沿                                   |

   * - 2:0
     - -
     - -


强制输出寄存器FORCEO
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - FORCEO
     - 0x204
     -
     - 0
     - 强制输出寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     - P Bn
     -
     - P Bn
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     - P An
     -
     - P An
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - -
     - -

   * - 27
     - PWM3Bn
     - PWM3Bn强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 26
     - PWM2Bn
     - PWM2Bn强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 25
     - PWM1Bn
     - PWM1Bn强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 24
     - PWM0Bn
     - PWM0Bn强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 23:20
     - -
     - -

   * - 19
     - PWM3B
     - PWM3B强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 18
     - PWM2B
     - PWM2B强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 17
     - PWM1B
     - PWM1B强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 16
     - PWM0B
     - PWM0B强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 15:12
     - -
     - -

   * - 11
     - PWM3An
     - PWM3An强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 10
     - PWM2An
     - PWM2An强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 9
     - PWM1An
     - PWM1An强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 8
     - PWM0An
     - PWM0An强制输出固定电平使能                  |

       1：使能                                     |

       0：输出正常                                 |

   * - 7:4
     - -
     - -

   * - 3
     - PWM3A
     - PWM3A强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 2
     - PWM2A
     - PWM2A强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 1
     - PWM1A
     - PWM1A强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |

   * - 0
     - PWM0A
     - PWM0A强制输出固定电平使能                   |

       1：使能                                     |

       0：输出正常                                 |


PWM刹车控制寄存器BRKCR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKCR
     - 0x208
     -
     - 0
     - 刹车控制                   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     - S2 OL
     - S POL
     - S0 OL
     - S CLR

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - S1STCLR
     - S 0STCLR
     - S2 TE
     - S ATE
     - S0 TE
     - -
     -
     - S CNT


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11
     - S2INPOL
     - BRAKE2输入有效电平                          |

       1：高电平有效                               |

       0：低电平有效                               |

   * - 10
     - S1INPOL
     - BRAKE1输入有效电平                          |

       1：高电平有效                               |

       0：低电平有效                               |

   * - 9
     - S0INPOL
     - BRAKE0输入有效电平                          |

       1：高电平有效                               |

       0：低电平有效                               |

   * - 8
     - S2STCLR
     - BRAKE2状态清除，RO                          |

       1：清除状态                                 |

       0：保持状态                                 |

   * - 7
     - S1STCLR
     - BRAKE1状态清除，RO                          |

       1：清除状态                                 |

       0：保持状态                                 |

   * - 6
     - S0STCLR
     - BRAKE0状态清除，RO                          |

       1：清除状态                                 |

       0：保持状态                                 |

   * - 5
     - S2STATE
     - BRAKE2状态（软件清除），RO                  |

       1：正在刹车                                 |

       0：未刹车                                   |

   * - 4
     - S1STATE
     - BRAKE1状态（软件清除），RO                  |

       1：正在刹车                                 |

       0：未刹车                                   |

   * - 3
     - S0STATE
     - BRAKE0状态（软件清除），RO                  |

       1：正在刹车                                 |

       0：未刹车                                   |

   * - 2:1
     - -
     - -

   * - 0
     - STOPCNT
     - 1：                                         | 效后PWM清零，停止计数，使能位会自动清除  |

       0：刹车生效后PWM继续计数，输出停止          |


PWM刹车中断使能寄存器BRKIE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKIE
     - 0x20C
     -
     - 0
     - 刹车中断使能               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - S2
     - S1
     - S0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - S2
     - BRAKE2中断使能                              |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - S1
     - BRAKE1中断使能                              |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - S0
     - BRAKE0中断使能                              |

       1：使能                                     |

       0：禁能                                     |


PWM刹车中断状态寄存器BRKIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKIF
     - 0x210
     -
     - 0
     - 刹车中断状态               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - S2
     - S1
     - S0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - S2
     - BRAKE2中断状态，R/W1C                       |

       1：已发生                                   |

       0：未发生                                   |

   * - 1
     - S1
     - BRAKE1中断状态，R/W1C                       |

       1：已发生                                   |

       0：未发生                                   |

   * - 0
     - S0
     - BRAKE0中断状态，R/W1C                       |

       1：已发生                                   |

       0：未发生                                   |


PWM刹车中断屏蔽寄存器BRKIM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKIM
     - 0x214
     -
     - 0
     - 刹车中断屏蔽               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - S2
     - S1
     - S0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - S2
     - BRAKE2中断屏蔽                              |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 1
     - S1
     - BRAKE1中断屏蔽                              |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 0
     - S0
     - BRAKE0中断屏蔽                              |

       1：屏蔽                                     |

       0：非屏蔽                                   |


PWM刹车中断原始状态寄存器BRKIRS
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BRKIRS
     - 0x218
     -
     - 0
     - 刹车中断原始状态           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - S2
     - S1
     - S0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 2
     - S2
     - BRAKE2原始中断状态，R/W1C                   |

       1：已发生                                   |

       0：未发生                                   |

   * - 1
     - S1
     - BRAKE1原始中断状态，R/W1C                   |

       1：已发生                                   |

       0：未发生                                   |

   * - 0
     - S0
     - BRAKE0原始中断状态，R/W1C                   |

       1：已发生                                   |

       0：未发生                                   |


PWM中断使能寄存器IE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x21C
     -
     - 0
     - 中断使能                   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - HE3B
     - HE3A
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - NC3B
     - NC3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23
     - HE3B
     - 第3组B路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 22
     - HE3A
     - 第3组A路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 21
     - HE2B
     - 第2组B路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 20
     - HE2A
     - 第2组A路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 19
     - HE1B
     - 第1组B路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 18
     - HE1A
     - 第1组A路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 17
     - HE0B
     - 第0组B路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 16
     - HE0A
     - 第0组A路高电平结束中断使能                  |

       1：使能                                     |

       0：禁能                                     |

   * - 15:8
     - -
     - -

   * - 7
     - NC3B
     - 第3组B路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 6
     - NC3A
     - 第3组A路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - NC2B
     - 第2组B路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 4
     - NC2A
     - 第2组A路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - NC1B
     - 第1组B路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - NC1A
     - 第1组A路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - NC0B
     - 第0组B路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - NC0A
     - 第0组A路新周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |


PWM使能控制寄存器CHEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CHEN
     - 0x220
     -
     - 0
     - PWM输出使能                |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:12
     - -
     - -

   * - 11
     - PWM3B
     - 第3组B路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 10
     - PWM2B
     - 第2组B路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 9
     - PWM1B
     - 第1组B路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 8
     - PWM0B
     - 第0组B路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 7:4
     - -
     - -

   * - 3
     - PWM3A
     - 第3组A路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - PWM2A
     - 第2组A路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - PWM1A
     - 第1组A路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - PWM0A
     - 第0组A路PWM使能                             |

       1：使能                                     |

       0：禁能                                     |


PWM中断屏蔽寄存器IM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IM
     - 0x224
     -
     - 0
     - 中断屏蔽寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - HE3B
     - HE3A
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - NC3B
     - NC3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - -
     - -

   * - 23
     - HE3B
     - 第3组B路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 22
     - HE3A
     - 第3组A路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 21
     - HE2B
     - 第2组B路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 20
     - HE2A
     - 第2组A路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 19
     - HE1B
     - 第1组B路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 18
     - HE1A
     - 第1组A路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 17
     - HE0B
     - 第0组B路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 16
     - HE0A
     - 第0组A路高电平结束中断屏蔽                  |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 15:8
     - -
     - -

   * - 7
     - NC3B
     - 第3组B路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 6
     - NC3A
     - 第3组A路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 5
     - NC2B
     - 第2组B路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 4
     - NC2A
     - 第2组A路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 3
     - NC1B
     - 第1组B路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 2
     - NC1A
     - 第1组A路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 1
     - NC0B
     - 第0组B路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |

   * - 0
     - NC0A
     - 第0组A路新周期中断屏蔽                      |

       1：屏蔽                                     |

       0：未屏蔽                                   |


PWM新周期中断原始状态寄存器NCIRS
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - NCIRS
     - 0x228
     -
     - 0
     - 新周期中断原始状态         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - PWM3A
     - 第3组A路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - PWM2B
     - 第2组B路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - PWM2A
     - 第2组A路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - PWM1B
     - 第1组B路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - PWM1A
     - 第1组A路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - PWM0B
     - 第0组B路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - PWM0A
     - 第0组A路新周期开始原始中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |


PWM高电平结束中断原始状态寄存器HEIRS
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HEIRS
     - 0x22C
     -
     - 0
     - 高电平结束中断原始状态     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - PWM3A
     - 第3组A路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - PWM2B
     - 第2组B路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - PWM2A
     - 第2组A路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - PWM1B
     - 第1组B路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - PWM1A
     - 第1组A路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - PWM0B
     - 第0组B路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - PWM0A
     - 第0组A路高电平结束原始中断状态，写1清除     |

       1：中断已发生                               |

       0：中断未发生                               |


PWM新周期中断状态寄存器NCIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - NCIF
     - 0x230
     -
     - 0
     - 新周期中断状态             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - PWM3A
     - 第3组A路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - PWM2B
     - 第2组B路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - PWM2A
     - 第2组A路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - PWM1B
     - 第1组B路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - PWM1A
     - 第1组A路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - PWM0B
     - 第0组B路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - PWM0A
     - 第0组A路新周期开始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |


PWM高电平结束中断状态寄存器HEIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HEIF
     - 0x234
     -
     - 0
     - 高电平结束中断状态         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - PWM3A
     - 第3组A路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - PWM2B
     - 第2组B路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - PWM2A
     - 第2组A路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - PWM1B
     - 第1组B路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - PWM1A
     - 第1组A路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - PWM0B
     - 第0组B路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - PWM0A
     - 第0组A路高电平结束中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |


PWM半周期中断使能寄存器HCIE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HCIE
     - 0x238
     -
     - 0
     - 半周期中断使能             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 6
     - PWM3A
     - 第3组A路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - PWM2B
     - 第2组B路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 4
     - PWM2A
     - 第2组A路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - PWM1B
     - 第1组B路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - PWM1A
     - 第1组A路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - PWM0B
     - 第0组B路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - PWM0A
     - 第0组A路半周期中断使能                      |

       1：使能                                     |

       0：禁能                                     |


PWM半周期中断屏蔽寄存器HCIM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HCIM
     - 0x23C
     -
     - 0
     - 半周期中断屏蔽             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     -

   * - 6
     - PWM3A
     -

   * - 5
     - PWM2B
     -

   * - 4
     - PWM2A
     -

   * - 3
     - PWM1B
     -

   * - 2
     - PWM1A
     -

   * - 1
     - PWM0B
     -

   * - 0
     - PWM0A
     -


PWM半周期原始中断状态寄存器HCIRS
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HCIRS
     - 0x240
     -
     - 0
     - 半周期原始中断状态         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - PWM3A
     - 第3组A路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - PWM2B
     - 第2组B路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - PWM2A
     - 第2组A路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - PWM1B
     - 第1组B路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - PWM1A
     - 第1组A路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - PWM0B
     - 第0组B路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - PWM0A
     - 第0组A路半周期原始中断状态，R/W1C           |

       1：中断已发生                               |

       0：中断未发生                               |


PWM半周期中断状态寄存器HCIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - HCIF
     - 0x244
     -
     - 0
     - 半周期中断状态             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - 第3组B路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 6
     - PWM3A
     - 第3组A路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 5
     - PWM2B
     - 第2组B路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 4
     - PWM2A
     - 第2组A路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 3
     - PWM1B
     - 第1组B路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - PWM1A
     - 第1组A路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - PWM0B
     - 第0组B路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - PWM0A
     - 第0组A路半周期中断状态，R/W1C               |

       1：中断已发生                               |

       0：中断未发生                               |


强制输出电平选择寄存器FORCEV
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - FORCEV
     - 0x248
     -
     - 0
     - 强制输出电平选择寄存器     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     - P Bn
     -
     - P Bn
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     - P An
     -
     - P An
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - -
     - -

   * - 27
     - PWM3Bn
     -

   * - 26
     - PWM2Bn
     -

   * - 25
     - PWM1Bn
     -

   * - 24
     - PWM0Bn
     -

   * - 23:18
     - -
     - -

   * - 19
     - PWM3B
     -

   * - 18
     - PWM2B
     -

   * - 17
     - PWM1B
     -

   * - 16
     - PWM0B
     -

   * - 15:12
     - -
     - -

   * - 11
     - PWM3An
     -

   * - 10
     - PWM2An
     -

   * - 9
     - PWM1An
     -

   * - 8
     - PWM0An
     -

   * - 7:4
     - -
     - -

   * - 3
     - PWM3A
     -

   * - 2
     - PWM2A
     -

   * - 1
     - PWM1A
     -

   * - 0
     - PWM0A
     -


模拟数字转换器（SAR ADC）
---------------------------------

.. _概述-11:

概述
~~~~~~~~~~~~

SWM241系列所有型号SAR ADC操作均相同，不同型号ADC通道数量可能不同，最多支持1组12通道。使用前需使能SAR ADC模块时钟。

.. _特性-11:

特性
~~~~~~~~~~~~

-  12-bits 分辨率

-  最高1MSPS 转换速率

-  支持单次模式和连续模式

-  具备深度为8的FIFO

-  灵活的转换启动方式，支持软件、PWM、TIMER启动

-  每个通道都有自己独立的转换结果数据寄存器和转换完成、数据溢出状态寄存器

-  支持DMA传输

.. _模块结构框图-8:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur056|

图 6‑55 ADC模块结构框图

.. _功能描述-12:

功能描述
~~~~~~~~~~~~~~

操作说明
^^^^^^^^^^^^^^^^^^^^^^

使用SAR ADC前，需针对对应引脚及模块进行如下操作：

-  通过PORT_FUNC寄存器将引脚切换GPIO功能并输入使能

-  通过CTRL寄存器中TRIG位配置触发方式

-  通过CTRL寄存器中CONT位配置采样方式（单次采样、连续采样）

-  通过CTRL寄存器中DMAEN位配置是否需要DMA读取

-  通过CTRL寄存器中AVG位配置是否需要硬件计算平均值

-  如需使用中断，通过IE寄存器使能对应中断

-  配置CTRL寄存器中对应通道（CHx）选通

-  使能CTRL寄存器中EN位

-  使用软件使能START寄存器GO位触发采样或使用TIMER、PWM模块触发采样

-  单次采样模式下，START寄存器自动清零；连续采样模式下，软件向 START 寄存器写0停止转换。

触发源选择
^^^^^^^^^^^^^^^^^^^^^^^

SAR ADC支持CPU触发、PWM触发、TIMER触发。通过将SAR ADC CTRL寄存器中TRIG进行设置，该设置对所有选中通道均有效，当不同通道需要不同触发方式时，需要在采样间隔配置TRIG位进行切换。

各模式触发操作方式如下：

使用PWM触发

PWM配置所需模式，将SARADC的CTRL寄存器中TRIG方式设置为PWM触发。每路PWM对应一个ADTRG寄存器值，当PWM计数到指定值，可触发ADC进行采样。当8路PWM工作在中心对称互补模式下时，最多可触发16次ADC采样。

具体配置方式如下（以ADTRG0A0为例）：

-  PWM配置所需模式，

-  配置PWM模块ADTRG0A0数值，该数值为触发延时时长，在中心对称模式下，前半周期从周期起始记，后半周期采样点与前半周期中心对称

-  使能ADTRG0A0寄存器EN位

-  配置ADC寄存器中TRIG寄存器A0对应位，确认该通道未被屏蔽

-  使能PWM模块EN位，当计数值到达ADTRG0A0设置值时，触发ADC CTRL寄存器中选中的通道（CHx）进行采样，采样完成后，将产生EOC标志位，并产生ADC中断

示意图如图 6‑56所示。

|Featur051|

图 6‑56 中心对称模式下PWM触发ADC采样示意图

使用TIMER触发

将SAR ADC CTRL寄存器中TRIG设置为TIMERx触发。TIMER可作为定时器或计数器使用。当对应TIMER计数值减至0时，将触发ADC CTRL寄存器中选中的通道（CHx）进行采样。可以通过ADC采样完成中断进行结果获取。TIMER触发支持单次模式和连续模式，且支持多次采样求平均值。

使用软件触发

将CTRL寄存器中TRIG设置为CPU触发。ADC配置完成后，通过程序将START寄存器GO位置1触发采样。采样完成后，该位自动清0。可以通过ADC采样完成中断或标志位查询进行结果获取。软件触发支持单次模式和连续模式。

数据处理
^^^^^^^^^^^^^^^^^^^^^^

SAR ADC支持针对采样数据硬件自动完成平均值计算。通过配置CTRL寄存器中AVG位设置为结果取平均。支持2到16次取平均。设置N次平均，则采集完成N次后EOC标志有效，同时取平均值的结果被送至对应通道数据寄存器。

参考源选择
^^^^^^^^^^^^^^^^^^^^^^^

SAR
ADC支持使用REFP和REFN作为输入电压参考。部分ADCx可具有独立的参考电压输入（不同封装可能有所变化，具体见封装引脚图），当封装图上有REFP/REFN引脚时，需接外部参考电压，此时参考电压为接入电压；当封装图上没有REFP/REFN引脚时，参考电压为ADC电源电压AVDD/AVSS。

模式说明
^^^^^^^^^^^^^^^^^^^^^^

单次模式

单次模式在所有选通的通道上执行一次转换，然后自动停止，其运作流程如下：

-  启动ADC采样前，CTRL寄存器CONT位配置为单次模式

-  START寄存器写1启动转换，也可以用PWM和TIMER触发启动

-  所有CTRL寄存器中选通通道从小到大依次完成一次转换，并将转换结果和转换完成EOC标志存入通道对应的数据和状态寄存器

-  每个通道转换完成时对应通道状态寄存器的EOC标志会置位，如果该通道的EOC中断使能，则该通道转换完成时会触发中断处理程序

-  所有通道转换完成后，START寄存器自动清零，停止转换，ADC进入Idle模式。

连续模式

连续模式下ADC会不断的重复在所有选通的通道上执行转换，直到软件向START寄存器写0，示意图如图 6‑58所示。

具体操作步骤如下：

-  启动ADC采样前，CTRL寄存器CONT位配置为连续模式

-  START寄存器写1启动转换，也可以用PWM和TIMER触发启动

-  所有CTRL寄存器中选通通道从小到大依次完成一次转换，转换完成后EOC标志将存入通道对应的状态寄存器

-  使用FIFO时，采样结果及对应通道将存至FIFO，未使用FIFO时，转换结果存入通道对应的数据寄存器

-  每个通道转换完成时对应通道状态寄存器的EOC标志会置位，如果该通道的EOC中断使能，则该通道转换完成时会触发中断处理程序

-  重复采样及结果存储，直到START寄存器写0，A/D转换停止，A/D转换器进入空闲状态。

|Featur057|

图 6‑57 SAR ADC连续采样示意图

|Featur058|

图 6‑58 SAR ADC多通道连续采样示意图

供电电压
^^^^^^^^^^^^^^^^^^^^^^

ADC正常供电电压范围为2.5V~5.5V，其特性详情请参考表格 8‑7所示。

ADC工作电压在2.5V以下时会影响ADC精度，建议2.5V电压点以下不使用ADC值。

.. _中断配置与清除-6:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^

可通过配置中断使能寄存器IE中相应位使能中断。当中断触发后，中断标志寄存器IF中对应位置1。如需清除此标志，需在对应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

.. _寄存器映射-10:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - SAR-ADC0BASE：0 |x40049000
     - |
     -
     -
     -

   * - CTRL
     - 0x00
     -
     - 0
     - ADC配置寄存器              |

   * - START
     - 0x04
     -
     - 0
     - ADC启动寄存器              |

   * - IE
     - 0x08
     -
     - 0
     - ADC中断使能寄存器          |

   * - IF
     - 0x0C
     -
     - 0
     - ADC中断状态寄存器          |

   * - STAT0
     - 0x10
     -
     - 0
     - ADC通道0状态寄存器         |

   * - DATA0
     - 0x14
     -
     - 0
     - ADC通道0数据寄存器         |

   * - STAT1
     - 0x20
     -
     - 0
     - ADC通道1状态寄存器         |

   * - DATA1
     - 0x24
     -
     - 0
     - ADC通道1数据寄存器         |

   * - STAT2
     - 0x30
     -
     - 0
     - ADC通道2状态寄存器         |

   * - DATA2
     - 0x34
     -
     - 0
     - ADC通道2数据寄存器         |

   * - STAT3
     - 0x40
     -
     - 0
     - ADC通道3状态寄存器         |

   * - DATA3
     - 0x44
     -
     - 0
     - ADC通道3数据寄存器         |

   * - STAT4
     - 0x50
     -
     - 0
     - ADC通道4状态寄存器         |

   * - DATA4
     - 0x54
     -
     - 0
     - ADC通道4数据寄存器         |

   * - STAT5
     - 0x60
     -
     - 0
     - ADC通道5状态寄存器         |

   * - DATA5
     - 0x64
     -
     - 0
     - ADC通道5数据寄存器         |

   * - STAT6
     - 0x70
     -
     - 0
     - ADC通道6状态寄存器         |

   * - DATA6
     - 0x74
     -
     - 0
     - ADC通道6数据寄存器         |

   * - STAT7
     - 0x80
     -
     - 0
     - ADC通道7状态寄存器         |

   * - DATA7
     - 0x84
     -
     - 0
     - ADC通道7数据寄存器         |

   * - STAT8
     - 0x90
     -
     - 0
     - ADC通道8状态寄存器         |

   * - DATA8
     - 0x94
     -
     - 0
     - ADC通道8数据寄存器         |

   * - STAT9
     - 0xa0
     -
     - 0
     - ADC通道9状态寄存器         |

   * - DATA9
     - 0xa4
     -
     - 0
     - ADC通道9数据寄存器         |

   * - STAT10
     - 0xb0
     -
     - 0
     - ADC通道10状态寄存器        |

   * - DATA10
     - 0xb4
     -
     - 0
     - ADC通道10数据寄存器        |

   * - STAT11
     - 0xc0
     -
     - 0
     - ADC通道11状态寄存器        |

   * - DATA11
     - 0xc4
     -
     - 0
     - ADC通道11数据寄存器        |

   * - CHSEL
     - 0xd0
     -
     - 0
     - ADC通道配置寄存器          |

   * - FFSTAT
     - 0x190
     -
     - 0
     - ADC FIFO状态寄存器         |

   * - FFDATA
     - 0x194
     -
     - 0
     - ADC所有通道数据寄存器      |

   * - CTRL1
     - 0x1a0
     -
     - 0
     - ADC配置寄存器1             |

   * - CTRL2
     - 0x1a4
     -
     - 0
     - ADC配置寄存器2             |

   * - CTRL3
     - 0x1a8
     -
     - 0
     - ADC配置寄存器3             |

   * - TRGMSK
     - 0x1b0
     -
     - 0
     - PWM通道触发ADC屏蔽寄存器   |

   * - CALIBSET
     - 0x1f4
     -
     - 0
     - ADC数据调整寄存器          |

   * - CALIBEN
     - 0x1f8
     -
     - 0
     - ADC数据调整使能寄存器      |


.. _寄存器描述-10:

寄存器描述
~~~~~~~~~~~~~~~

配置寄存器CTRL
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTRL
     - 0x00
     -
     - 00
     - ADC配置寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     - AVG

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - AVG
     -
     -
     - RST
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - TRIG
     -
     -
     - EN
     -
     -
     - CH9
     - CH8

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CH7
     - CH6
     - CH5
     - CH4
     - CH3
     - CH2
     - CH1
     - CH0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:25
     - -
     - -

   * - 24:21
     - AVG
     - 一次启动ADC采样次数配置寄存器               |

       0000：1次采样                               |

       0001：2次采样并取平均                       |

       0010：保留（不可配置）                      |

       0011：4次采样并取平均                       |

       0100、0101、0110：保留（不可配置）          |

       0111：8次采样并取平均                       |

       1000、1001、                                | 0、1011、1100、1101、1110：保留（不可配置） |

       1111：16次采样并取平均                      |

   * - 20
     - RST
     - ADC复位                                     |

       0：正常                                     |

       1：复位                                     |

   * - 19
     - FFCLR
     - FIFO清除使能                                |

       0：FIFO正常工作；                           |

       1：FIFO复位；                               |

   * - 18
     - RES2FF
     - 0：ADC数据存储为通道模式；                  |

       1：ADC数据存储为FIFO模式；                  |

       DMA模式必须使用FIFO模式；                   |

   * - 17
     - DMAEN
     - DMA使能，高电平有效                         |

       仅支持FIFO模式                              |

       0：只能通过CPU读取FFDATA；                  |

       1：只能通过DMA读取FFDATA；                  |

   * - 16:14
     - TRIG
     - ADC triger方式选择                          |

       000：CPU触发                                |

       001：PWM触发                                |

       010：TIMER2触发                             |

       011：TIMER3触发                             |

   * - 13
     - CONT
     - ADC工作模式（只在CPU触发方式下有效）        |

       0：单次模式                                 |

       1：连续模式                                 |

   * - 12
     - EN
     - ADC使能                                     |

       1：使能                                     |

       0：禁能                                     |

   * - 11
     - CH11
     - ADC通道11选择控制                           |

       0：通道未选中 1：通道选中                   |

   * - 10
     - CH10
     - ADC通道10选择控制                           |

       0：通道未选中 1：通道选中                   |

   * - 9
     - CH9
     - ADC通道9选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 8
     - CH8
     - ADC通道8选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 7
     - CH7
     - ADC通道7选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 6
     - CH6
     - ADC通道6选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 5
     - CH5
     - ADC通道5选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 4
     - CH4
     - ADC通道4选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 3
     - CH3
     - ADC通道3选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 2
     - CH2
     - ADC通道2选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 1
     - CH1
     - ADC通道1选择控制                            |

       0：通道未选中 1：通道选中                   |

   * - 0
     - CH0
     - ADC通道0选择控制                            |

       0：通道未选中 1：通道选中                   |


启动寄存器START
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - START
     - 0x04
     -
     - 00
     - ADC启动寄存器              |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - -
     -
     -
     - GO


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - BUSY
     - ADC工作状态标识                             |

   * - 3:1
     - -
     - -

   * - 0
     - GO
     - ADC启动信号（只在CPU触发方式下有效）        |

       该位写1，则启动一次转换。                   |

       若CON                                       | 单次采样模式，则该位置1后，将对有效通道依 | 进行采样转换，并将转换的数据保存在相应通 | IFO或寄存器中。转换完成后硬件会自动清零。 |

       若CO                                        | 于多次采样模式，则该位置1表示启动ADC转换， | 表示停止ADC转换。启动ADC转换后，将对有效 | 次轮询进行采样转换，并将转换的数据保存在 | 道的FIFO或寄存器中。每次转换完成后判断该 |
       为1，若为1则继续转换，若为0则停止转换。  |


中断寄存器IE
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x08
     -
     - 00
     - ADC中断使能寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - CH11OVF
     - C H11EOC
     - C OVF
     - C EOC
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CH7OVF
     - CH7EOC
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CH3OVF
     - CH3EOC
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:27
     - -
     - -

   * - 26
     - FIFOF
     - ADC数据FIFO满中断使能                       |

       1：使能                                     |

       0：禁能                                     |

   * - 25
     - FIFOHF
     - ADC数据FIFO半满中断使能                     |

       1：使能                                     |

       0：禁能                                     |

   * - 24
     - FIFOOV
     - ADC数据FIFO溢出中断使能                     |

       1：使能                                     |

       0：禁能                                     |

   * - 23
     - CH11OVF
     - ADC通道11数据寄存器溢出中断使能             |

       1：使能                                     |

       0：禁能                                     |

   * - 22
     - CH11EOC
     - ADC通道11数据转换完成中断使能               |

       1：使能                                     |

       0：禁能                                     |

   * - 21
     - CH10OVF
     - ADC通道10数据寄存器溢出中断使能             |

       1：使能                                     |

       0：禁能                                     |

   * - 20
     - CH10EOC
     - ADC通道10数据转换完成中断使能               |

       1：使能                                     |

       0：禁能                                     |

   * - 19
     - CH9OVF
     - ADC通道9数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 18
     - CH9EOC
     - ADC通道9数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 17
     - CH8OVF
     - ADC通道8数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 16
     - CH8EOC
     - ADC通道8数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 15
     - CH7OVF
     - ADC通道7数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 14
     - CH7EOC
     - ADC通道7数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 13
     - CH6OVF
     - ADC通道6数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 12
     - CH6EOC
     - ADC通道6数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 11
     - CH5OVF
     - ADC通道5数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 10
     - CH5EOC
     - ADC通道5数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 9
     - CH4OVF
     - ADC通道4数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 8
     - CH4EOC
     - ADC通道4数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 7
     - CH3OVF
     - ADC通道3数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 6
     - CH3EOC
     - ADC通道3数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 5
     - CH2OVF
     - ADC通道2数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 4
     - CH2EOC
     - ADC通道2数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 3
     - CH1OVF
     - ADC通道1数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - CH1EOC
     - ADC通道1数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - CH0OVF
     - ADC通道0数据寄存器溢出中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - CH0EOC
     - ADC通道0数据转换完成中断使能                |

       1：使能                                     |

       0：禁能                                     |


.. _中断状态寄存器if-1:

中断状态寄存器IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x0C
     -
     - 00
     - ADC中断状态寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - CH11OVF
     - C H11EOC
     - C OVF
     - C EOC
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CH7OVF
     - CH7EOC
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - CH3OVF
     - CH3EOC
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:27
     - -
     - -

   * - 26
     - FIFOF
     - ADC数据FIFO满中断状态，写1清除              |

       0：未产生                                   |

       1：产生中断                                 |

   * - 25
     - FIFOHF
     - ADC数据FIFO半满中断状态，写1清除            |

       0：未产生                                   |

       1：产生中断                                 |

   * - 24
     - FIFOOV
     - ADC数据FIFO溢出中断状态，写1清除            |

       0：未产生                                   |

       1：产生中断                                 |

   * - 23
     - CH11OVF
     - ADC通道11数据寄存器溢出中断状态，写1清除    |

       0：未产生                                   |

       1：产生中断                                 |

   * - 22
     - CH11EOC
     - ADC通道11数据转换完成中断状态，写1清除      |

       0：未产生                                   |

       1：产生中断                                 |

   * - 21
     - CH10OVF
     - ADC通道10数据寄存器溢出中断状态，写1清除    |

       0：未产生                                   |

       1：产生中断                                 |

   * - 20
     - CH10EOC
     - ADC通道10数据转换完成中断状态，写1清除      |

       0：未产生                                   |

       1：产生中断                                 |

   * - 19
     - CH9OVF
     - ADC通道9数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 18
     - CH9EOC
     - ADC通道9数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 17
     - CH8OVF
     - ADC通道8数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 16
     - CH8EOC
     - ADC通道8数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 15
     - CH7OVF
     - ADC通道7数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 14
     - CH7EOC
     - ADC通道7数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 13
     - CH6OVF
     - ADC通道6数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 12
     - CH6EOC
     - ADC通道6数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 11
     - CH5OVF
     - ADC通道5数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 10
     - CH5EOC
     - ADC通道5数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 9
     - CH4OVF
     - ADC通道4数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 8
     - CH4EOC
     - ADC通道4数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 7
     - CH3OVF
     - ADC通道3数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 6
     - CH3EOC
     - ADC通道3数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 5
     - CH2OVF
     - ADC通道2数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 4
     - CH2EOC
     - ADC通道2数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 3
     - CH1OVF
     - ADC通道1数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 2
     - CH1EOC
     - ADC通道1数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |

   * - 1
     - CH0OVF
     - ADC通道0数据寄存器溢出中断状态，写1清除     |

       0：未产生                                   |

       1：产生中断                                 |

   * - 0
     - CH0EOC
     - ADC通道0数据转换完成中断状态，写1清除       |

       0：未产生                                   |

       1：产生中断                                 |


通道状态寄存器STATx(0~11)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT0
     - 0x10
     -
     - 0
     - ADC通道0状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT1
     - 0x20
     -
     - 0
     - ADC通道1状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT2
     - 0x30
     -
     - 0
     - ADC通道2状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT3
     - 0x40
     -
     - 0
     - ADC通道3状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT4
     - 0x50
     -
     - 0
     - ADC通道4状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT5
     - 0x60
     -
     - 0
     - ADC通道5状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT6
     - 0x70
     -
     - 0
     - ADC通道6状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT7
     - 0x80
     -
     - 0
     - ADC通道7状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT8
     - 0x90
     -
     - 0
     - ADC通道8状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT9
     - 0xa0
     -
     - 0
     - ADC通道9状态寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT10
     - 0xb0
     -
     - 0
     - ADC通道10状态寄存器        |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT11
     - 0xc0
     -
     - 0
     - ADC通道11状态寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - EOC


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - OVF
     - ADC通道x数据寄存器溢出标志                  |

       1：溢出                                     |

       0：未溢出                                   |

       读数据寄存器清除                            |

   * - 0
     - EOC
     - ADC通道x数据转换完成标志，写1清除           |

       1：ADC对通道x一次采样转换完成               |

       0：转换未完成                               |


通道数据寄存器DATAx(0~11)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA0
     - 0x14
     -
     - 0
     - ADC通道0数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA1
     - 0x24
     -
     - 0
     - ADC通道1数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA2
     - 0x34
     -
     - 0
     - ADC通道2数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA3
     - 0x44
     -
     - 0
     - ADC通道3数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA4
     - 0x54
     -
     - 0
     - ADC通道4数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA5
     - 0x64
     -
     - 0
     - ADC通道5数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA6
     - 0x74
     -
     - 0
     - ADC通道6数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA7
     - 0x84
     -
     - 0
     - ADC通道7数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA8
     - 0x94
     -
     - 0
     - ADC通道8数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA9
     - 0xa4
     -
     - 0
     - ADC通道9数据寄存器         |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA10
     - 0b4
     -
     - 0
     - ADC通道10数据寄存器        |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA11
     - 0xc4
     -
     - 0
     - ADC通道11数据寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CHNUM
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - VALUE
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:12
     - CHNUM
     - ADC数据对应的通道编号                       |

       0000：通道0                                 |

       0001：通道1                                 |

       0010：通道2                                 |

       0011：通道3                                 |

       0100：通道4                                 |

       0101：通道5                                 |

       0110：通道6                                 |

       0111：通道7                                 |

       1000：通道8                                 |

       1001：通道9                                 |

       1010：通道10                                |

       1011：通道11                                |

   * - 11:0
     - VALUE
     - ADC通道x数据寄存器                          |

       注：溢出后，再次转换的数据会覆盖旧数据      |


ADC通道配置寄存器器CHSEL
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CHSEL
     - 0xd0
     -
     - 0
     - ADC通道配置寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - PWM
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     - SW
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SW
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - -
     - -

   * - 27:16
     - PWM
     - PWM启动ADC采样时的通道号                    |

       Bit16=1：CH0启动                            |

       Bit17=1：CH1启动                            |

       Bit18=1：CH2启动                            |

       Bit19=1：CH3启动                            |

       Bit20=1：CH4启动                            |

       Bit21=1：CH5启动                            |

       Bit22=1：CH6启动                            |

       Bit23=1：CH7启动                            |

       Bit24=1：CH8启动                            |

       Bit25=1：CH9启动                            |

       Bit26=1：CH10启动                           |

       Bit27=1：CH11启动                           |

       注1：当配                                   | m触发ADC采样使能且PWM触发信号有效时，实际  | ADC采样通道会自动切换为PWM2ADC_CH_SEL值  |

   * - 15:12
     - -
     - -

   * - 11:0
     - SW
     - CPU启动ADC采样的通道号                      |

       Bit0=1：CH0启动                             |

       Bit1=1：CH1启动                             |

       Bit2=1：CH2启动                             |

       Bit3=1：CH3启动                             |

       Bit4=1：CH4启动                             |

       Bit5=1：CH5启动                             |

       Bit6=1：CH6启动                             |

       Bit7=1：CH7启动                             |

       Bit8=1：CH8启动                             |

       Bit9=1：CH9启动                             |

       Bit10=1：CH10启动                           |

       Bit11=1：CH11启动                           |

       注1：当CPU启动了ADC采样过程                 | 遇到PWM触发ADC的启动信号，PWM信号被忽略  |


FIFO状态寄存器FFSTAT
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - FFSTAT
     - 0x190
     -
     - 0
     - ADC FIFO状态寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - LEVEL
     -
     -
     -
     -
     -
     - OVF


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:7
     - -
     - -

   * - 6:4
     - LEVEL
     - ADC数据FIFO LEVEL标志                       |

       000：FIFO有0个数据                          |

       001：FIFO有1个数据                          |

       010：FIFO有2个数据                          |

       011：FIFO有3个数据                          |

       100：FIFO有4个数据                          |

       101：FIFO有5个数据                          |

       110：FIFO有6个数据                          |

       111：FIFO有7个数据                          |

   * - 3
     - EMPTY
     - ADC数据FIFO空标志                           |

       1：FIFO空                                   |

       0：FIFO非空                                 |

   * - 2
     - FULL
     - ADC数据FIFO满标志                           |

       1：FIFO满                                   |

       0：FIFO非满                                 |

   * - 1
     - HFULL
     - ADC数据FIFO半满标志                         |

       1：FIFO半满                                 |

       0：FIFO满或未达到半满                       |

   * - 0
     - OVF
     - ADC数据FIFO溢出标志                         |

       1：FIFO出现溢出                             |

       0：FIFO未溢出                               |


所有通道FIFO数据寄存器FFDATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - FFDATA
     - 0x194
     -
     - 0
     - ADC所有通道数据寄存器      |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - CHNUM
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - VALUE
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - -
     - -

   * - 15:12
     - CHNUM
     - ADC数据对应的通道编号                       |

       0000：通道0                                 |

       0001：通道1                                 |

       0010：通道2                                 |

       0011：通道3                                 |

       0100：通道4                                 |

       0101：通道5                                 |

       0110：通道6                                 |

       0111：通道7                                 |

       1000：通道8                                 |

       1001：通道9                                 |

       1010：通道10                                |

       1011：通道11                                |

   * - 11:0
     - VALUE
     - ADC通道x数据FIFO寄存器                      |

       注：溢出后，再次转换的数据会被丢掉          |


配置寄存器CTRL1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTRL1
     - 0x1a0
     -
     - 0x0
     - ADC配置寄存器1             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - CLKSRC
     - ADC采样时钟选择                             |

       0：系统时钟                                 |

       1：外置晶振                                 |


配置寄存器CTRL2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTRL2
     - 0x1a4
     -
     - 0x0
     - ADC配置寄存器2             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - CL KDIV1
     -
     - C IV2
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PGAGAIN
     -
     -
     -
     -
     - P VCM
     - A VCM
     - -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31
     - -
     - -

   * - 30:29
     - CLKDIV1
     - RC Clock Post Divi EXT_REF_CLKIN或RC48MHZ_CLKIN时钟的预分频） |

       00：4分频                                   |

       01：2分频                                   |

       10：1分频                                   |

       11：不可配                                  |

   * - 28:24
     - CLKDIV2
     - RC clock input divider ratio（对分频时钟的再分频）                 |

       1对应1分频，以此类推                        |

       00001：1分频                                |

       00010：2分频                                |

       00011：3分频                                |

       00100：4分频                                |

       00101：5分频                                |

       00110：6分频                                |

       00111：7分频                                |

       01000：8分频                                |

       01001：9分频                                |

       01010：10分频                               |

       01011：11分频                               |

       01100：12分频                               |

       01101：13分频                               |

   * - 23:12
     - -
     - -

   * - 11:8
     - VCMSEL
     - PGA Common Mode Voltage Select

   * - 7:3
     - PGAGAIN
     - PGA GAIN program

   * - 2
     - PGAEVCM
     - 使能外部reference, PGA输入共模电平选择      |

       切换内部/外部基准                           |

       0：内部基准（5V/3.6V）                      |

       1：外部基准（AVDD5/REFP）                   |

   * - 1
     - ADCEVCM
     - 使能ADC外部reference ,ADC External          | VCM，ADC与PGA输出共模电平选择               |

   * - 0
     - -
     - -


配置寄存器CTRL3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CTRL3
     - 0x1a8
     -
     - 0x0
     - ADC配置寄存器8             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     - RCDIV
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - C IV0
     -
     - R SEL
     - -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:3
     - -
     - -

   * - 4:3
     - CLKDIV0
     - CLK分频                                     |

       00：4分频                                   |

       01：2分频                                   |

       10：1分频                                   |

       11：保留                                    |

   * - 2
     - REFPSEL
     - 直接连接至ADC模块的ADC_REF_SEL_VDD5端口     |

       基准切换AVDD5/外部refp                      |

       0：外部refp                                 |

       1：AVDD5                                    |

       直接连接至ADC模块的ADC_REF_TEST端口         |

   * - 1:0
     - -
     - -


PWM通道触发ADC屏蔽寄存器TRGMSK
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TRGMSK
     - 0x1b0
     -
     - 0
     - PWM通道                    | DC屏蔽寄存器，可通过此寄 | 分不同ADC的PWM触发通道  |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PWM3B
     - PWM3A
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - -
     - -

   * - 7
     - PWM3B
     - PWM3B触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 6
     - PWM3A
     - PWM3A触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 5
     - PWM2B
     - PWM2B触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 4
     - PWM2A
     - PWM2A触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 3
     - PWM1B
     - PWM1B触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 2
     - PWM1A
     - PWM1A触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 1
     - PWM0B
     - PWM0B触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |

   * - 0
     - PWM0A
     - PWM0A触发ADC屏蔽寄存器                      |

       0：不屏蔽                                   |

       1：屏蔽                                     |


ADC数据调整寄存器CALIBSET
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CALIBSET
     - 0x1f4
     -
     - 0
     - ADC数据调整寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     - K

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - K
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - OFFSET
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:25
     - -
     - -

   * - 24:16
     - K
     - ADC 整的K值（K始终大于1小于1.511）的小数部分 |

       例如：要                                    | K值为1.230，则该寄存器直接写入230即可。  |

   * - 15:9
     - -
     - -

   * - 8:0
     - OFFSET
     - ADC数据调整的OFFSET值                       |


ADC数据调整使能寄存器CALIBEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CALIBEN
     - 0x1f8
     -
     - 0
     - ADC数据调整使能寄存器      |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     - K
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - K
     - ADC_CALIB_SET寄存器K配置数据是否有效        |

       0：数据无效                                 |

       1：数据有效                                 |

   * - 0
     - OFFSET
     - ADC_CALIB_SET寄存器OFFSET配置数据是否有效   |

       0：数据无效                                 |

       1：数据有效                                 |


直接内存存取（DMA）控制器
-------------------------------

.. _概述-12:

概述
~~~~~~~~~~~~

SWM241系列所有型号DMA模块操作均相同，用来提供特定外设（UART、SPI、ADC）和存储器（SRAM）之间或总线地址和存储器（SRAM）之间的高速数据传输，无需CPU干涉，数据可以快速的通过DMA传输，从而节省了CPU的资源来做其他操作。

DMA传输规则为按字传输，单次可传输字数多达4096Word。数据交换过程中，无需软件参与。

本文中RX指MIU0到MIU1的数据搬移，TX指MIU1到MIU0的数据搬移。

.. _特性-12:

特性
~~~~~~~~~~~~

-  支持UART/SPI/ADC与SRAM间数据交互

-  支持总线地址至SRAM间数据交互

-  支持多种传输模式及数据单位

-  支持TIMER触发使能

-  支持三种地址变化方式：递增，固定，scatter gathe

-  Master接口支持BYTE、HALFWORD和WORD操作

.. _模块结构框图-9:

模块结构框图
~~~~~~~~~~~~~~~~

DMA模块结构如图 6‑59所示：

|Featur059|

图 6‑59 DMA模块结构图

SIU是AHB slave接口，MCU通过这个接口配置相关的控制寄存器，同时也完成和外设之间的握手。

ARB0和ARB1用于仲裁各个通道的数据传输请求。

HALFPLEXCH是单向传输通道，在任意时刻只能配置为发送或接收方向。

.. _功能描述-13:

功能描述
~~~~~~~~~~~~~~

通道选择
^^^^^^^^^^^^^^^^^^^^^^

DMA共有2组2个通道，可同时传输2组不同方向数据。通道与模块对应关系如表格 6‑3所示：

表格 6‑3 DMA各通道操作明细

.. list-table::
   :widths: 25 25 25 25
   :header-rows: 0


   * - M0通道      |
     - 对应外设     |    M
     - 通道      |    对应外
     - |

   * - CH0配置00   |
     - UART0 TX     |
     - CH0配置00   |
     - UART1 RX     |

   * - CH0配置01   |
     - SPI0 TX      |
     - CH0配置01   |
     - SPI1 RX      |

   * - CH0配置02   |
     - UART3 TX     |
     - CH0配置02   |
     - SARADC0      |

   * - CH0配置03   |
     - -            |
     - CH0配置03   |
     - UART2 RX     |

   * - CH1配置00   |
     - UART1 TX     |
     - CH1配置00   |
     - UART0 RX     |

   * - CH1配置01   |
     - SPI1 TX      |
     - CH1配置01   |
     - SPI0 RX      |

   * - CH1配置02   |
     - UART2 TX     |
     - CH1配置02   |
     - SARADC0      |

   * - CH1配置03   |
     - -            |
     - CH1配置03   |
     - UART3 RX     |


*注：在一个时间段内，同时使用的外设必须占用在不同的通道上，否则不能通过中断状态来区分哪个外设发生的事件*\ 。

.. _模式选择-1:

模式选择
^^^^^^^^^^^^^^^^^^^^^^

支持三种地址变化方式：递增，固定，scatter gather。可通过配置AMn寄存器，分别配置源地址模式和目的地址模式，并可分别配置源和目的地址的位宽和传输模式。

**递增**

传输单位为字节时，从SRC指定地址+n处取数据（向DST指定地址+n处存数据）,n表示第n个数据

传输单位为半字时，从SRC指定地址+2n处取数据（向DST指定地址+2n处存数据）,n表示第n个数据

传输单位为 字 时，从SRC指定地址+4n处取数据（向DST指定地址+4n处存数据）,n表示第n个数据

**固定**

固定从SRC指定地址处取数据、固定向DST指定地址处存数据。

**scatter** **gather**

源地址模式：

从SRCn开始，传输总长度1/4的数据；跳转到SRCSGADDRn1地址开始，再传输总长度1/4的数据；跳转到SRCSGADDRn2地址开始，再传输总长度1/4的数据；跳转到 SRCSGADDRn3地址开始，直到全部数据传输结束。

以源地址模式为scatter gather为例，传输40个字过程如下：

   第一步、从SRCn指定地址处取10个字传输，

   第二步、从SRCSGADDRn1指定地址处取10个字传输

   第三步、从SRCSGADDRn2指定地址处取10个字传输

   第四步、从SRCSGADDRn3指定地址处取10个字传输

目的地址模式：

   从DSTn0开始，传输总长度1/4的数据；跳转到DSTSGADDRn1地址开始，再传输总长度1/4的数据；跳转到DSTSGADDRn2地址开始，再传输总长度1/4的数据；跳转到DSTSGADDRn3地址开始，直到全部数据传输结束。

   以目的地址模式为scatter gather为例，传输40个字过程如下：

   第一步、向DSTn指定地址处存10个字传输，

   第二步、向DSTSGADDRn1指定地址处存10个字传输

   第三步、向DSTSGADDRn2指定地址处存10个字传输

   第四步、向DSTSGADDRn3指定地址处存10个字传输

三种模式下DMA搬运40个字流程如图 6‑60所示：

|Featur060|

图 6‑60 DMA搬运40个字流程图

握手信号选择
^^^^^^^^^^^^^^^^^^^^^^^^

DMA通道可选择M1/M0总线上是否采用握手信号，可通过MUXn寄存器对应位来选择。

**握手**

需要通过握手信号进行信息交换

DMA通道可通过握手信号进行信息交换，选择由哪个外设的硬件信号来控制源或目标外设之间的传输，具体外设可以通过MUXn寄存器对应位来选择。

外设握手信号详情参考表格 6‑3。

具体外设有SPI、UART、ADC，在一个时间段内，可同时使用多个外设，但同时使用的外设必须占用在不同的通道上，否则不能通过中断状态来区分哪个外设发生的事件。

**非握手**

非握手状态下所有的地址都可以搬运，可以任何地址到任何地址。

握手、非握手传输示意图如图 6‑61所示：

|Featur061|

图 6‑61 握手、非握手信号传输图

启动方式
^^^^^^^^^^^^^^^^^^^^^^

DMA通道启动传输的方式有两种，一种为通过软件操作TXEN/RXEN位启动、一种为通过外部trigger信号启动，可通过配置MUXn寄存器来选择。

**软件操作启动**

软件操作可通过配置CRn寄存器中的TXEN活RXEN启动DMA传输。

**外部trigger信号启动**

外部trigger信号触发有TMER0~8，可通过配置MUXn寄存器选择使用哪个TIMER溢出信号触发、，且通道会等到外部trigger信号为高后才启动传输。

配置如下：

-  配置DMA模式，CRn寄存器相应位

   -  单次模式，传输完成后停止

   -  环形模式，传输完成后从头执行下一轮传输

-  配置源地址传输位宽，AMn寄存器相应位

   -  字节

   -  半字

   -  字

-  配置传输长度，CRn寄存器相应位

-  配置源地址、目的地址，SRCn、DSTn寄存器

-  配置源和目标地址模式，AMn寄存器相应位

   -  地址固定

   -  地址递增

   -  scatter gather

-  配置通道由trigger信号启动，MUXn相应位

-  配置信号由哪个TIMER溢出信号触发，MUXn相应位

-  初始化定时器

-  启动定时器

DMA启动方式如图 6‑62所示：

|Featur062|

图 6‑62 DMA启动方式

中断处理
^^^^^^^^^^^^^^^^^^^^^^

DMA控制器模块2个通道均支持传输结束中断。DMA初始化时如果配置了中断使能寄存器IE，当所配置通道传输完指定数据长度时会产生中断，此时中断状态寄存器IF对应位自动置1，对该位写1则清除中断，用户可通过读此寄存器来判断是否产生了中断。

DMA各个通道还具备中断屏蔽功能。当配置了中断屏蔽寄存器IM时，即使数据传输结束，也不会产生中断。

优先级配置
^^^^^^^^^^^^^^^^^^^^^^^

可通过PRI寄存器来配置DMA各个通道的优先级。当多个通道同时请求传输时，先执行优先级高的。但当低优先级正在传输时，高优先级不会打断低优先级的传输。

.. _寄存器映射-11:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - DMABASE：0 |x40000800
     - |
     -
     -
     -

   * - EN
     - 0x00
     -
     - 0
     - 使能寄存器                 |

   * - IE
     - 0x04
     -
     - 0
     - 通道中断使能               |

   * - IM
     - 0x08
     -
     - 0
     - 通道中断屏蔽               |

   * - IF
     - 0x0C
     -
     - 0
     - 通道中断状态               |

   * - DSTSGIE
     - 0x10
     -
     - 0
     - scatter gathe 0总线一侧传输完成中断使能 |

   * - DSTSGIM
     - 0x14
     -
     - 0
     - scatter gather M0总线一侧传输完成中断屏蔽 |

   * - DSTSGIF
     - 0x18
     -
     - 0
     - scatter gathe 0总线一侧传输完成中断状态 |

   * - SRCSGIE
     - 0x1C
     -
     - 0
     - scatter gather M1总线一侧传输完成中断使能 |

   * - SRCSGIM
     - 0x20
     -
     - 0
     - scatter gather M1总线一侧传输完成中断屏蔽 |

   * - SRCSGIF
     - 0x24
     -
     - 0
     - scatter gathe 1总线一侧传输完成中断状态 |

   * - PRI
     - 0x3C
     -
     - 0
     - 通道优先级设定             |

   * - CRn
     - 0 x40*n +  0x00
     -
     - 0
     - 通道控制                   |

   * - AMn
     - 0 x40*n +  0x04
     -
     - 0
     - 通道地址模式               |

   * - DSTn
     - 0 x40*n +  0x08
     -
     - 0
     - 通道n目的地址寄存器        |

   * - DSTSGADDRn1
     - 0 x40*n +  0xC
     -
     - 0
     - Destination Scatter Gather

       ress通道n目的分散收集地址1 |

   * - DSTSGADDRn2
     - 0 x40*n +  0x10
     -
     - 0
     - Destination Scatter Gather

       ress通道n目的分散收集地址2 |

   * - DSTSGADDRn3
     - 0 x40*n +  0x24
     -
     - 0
     - Destination Scatter Gather

       ress通道n目的分散收集地址3 |

   * - MUXn
     - 0 x40*n +  0x18
     -
     - 0
     - 通道n握手信号选择寄存器    |

   * - SRCn
     - 0 x40*n +  0x1C
     -
     - 0
     - 通道n源地址寄存器          |

   * - SRCSGADDRn1
     - 0 x40*n +  0x20
     -
     - 0
     - Source Scatter Gather

       ddress通道n源分散收集地址1 |

   * - SRCSGADDRn2
     - 0 x40*n +  0x24
     -
     - 0
     - Source Scatter Gather

       ddress通道n源分散收集地址2 |

   * - SRCSGADDRn3
     - 0 x40*n +  0x28
     -
     - 0
     - Source Scatter Gather

       ddress通道n源分散收集地址3 |

   * - DSTSR
     - 0 x40*n +  0x2C
     -
     - 0
     - M0通道n状态寄存器          |

   * - SRCSR
     - 0 x40*n +  0x30
     -
     - 0
     - M1通道n状态寄存器          |


.. _寄存器描述-11:

寄存器描述
~~~~~~~~~~~~~~~

DMA使能寄存器EN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - EN
     - 0x00
     -
     - 0
     - 使能寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - EN
     - DMA使能                                     |

       1：使能                                     |

       0：禁能                                     |


DMA中断使能寄存器IE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x04
     -
     - 0
     - 通道中断使能               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - CH0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - CH1
     - 通道1传输完成中断使能                       |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - CH0
     - 通道0传输完成中断使能                       |

       1：使能                                     |

       0：禁能                                     |


DMA中断屏蔽寄存器IM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IM
     - 0x08
     -
     - 0
     - 通道中断屏蔽               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - CH0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - CH1
     - 通道1传输完成中断屏蔽                       |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 0
     - CH0
     - 通道0传输完成中断屏蔽                       |

       1：屏蔽                                     |

       0：非屏蔽                                   |


DMA中断状态寄存器IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x0C
     -
     - 0
     - 通道中断状态               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - CH0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - CH1
     - 通道1传输完成中断，写1清零                  |

       1：中断发生                                 |

       0：中断未发生                               |

   * - 0
     - CH0
     - 通道0传输完成中断，写1清零                  |

       1：中断发生                                 |

       0：中断未发生                               |


M0总线一侧传输完成中断使能寄存器DSTSGIE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSGIE
     - 0x10
     -
     - 0
     - scatter gathe 0总线一侧传输完成中断使能 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - CH1
     - CH1 M0总线一侧传输完成中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - CH1HF
     - CH1 M0总线一侧传输完成1/2中断使能           |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - CH0
     - CH0 M0总线一侧传输完成中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - CH0HF
     - CH0 M0总线一侧传输完成1/2中断使能           |

       1：使能                                     |

       0：禁能                                     |


M0总线一侧传输完成中断屏蔽寄存器DSTSGIM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSGIM
     - 0x14
     -
     - 0
     - scatter gather M0总线一侧传输完成中断屏蔽 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - CH1
     - CH1 M0总线一侧传输完成中断屏蔽              |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 2
     - CH1HF
     - CH1 M0总线一侧传输完成1/2中断屏蔽           |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 1
     - CH0
     - CH0 M0总线一侧传输完成中断屏蔽              |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 0
     - CH0HF
     - CH0 M0总线一侧传输完成1/2中断屏蔽           |

       1：屏蔽                                     |

       0：非屏蔽                                   |


M0总线一侧传输完成中断状态寄存器DSTSGIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSGIF
     - 0x18
     -
     - 0
     - scatter gathe 0总线一侧传输完成中断状态 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - CH1
     - CH1 M0总线一侧传输完成中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - CH1HF
     - CH1 M0总线一侧传输完成1/2中断状态，R/W1C    |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - CH0
     - CH0 M1总线一侧传输完成中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - CH0HF
     - CH0 M1总线一侧传输完成1/2中断状态，R/W1C    |

       1：中断已发生                               |

       0：中断未发生                               |


M1总线一侧传输完成中断使能寄存器SRCSGIE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSGIE
     - 0x1C
     -
     - 0
     - scatter gather M1总线一侧传输完成中断使能 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - CH1
     - CH1 M1总线一侧传输完成中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 2
     - CH1HF
     - CH1 M1总线一侧传输完成1/2中断使能           |

       1：使能                                     |

       0：禁能                                     |

   * - 1
     - CH0
     - CH0 M1总线一侧传输完成中断使能              |

       1：使能                                     |

       0：禁能                                     |

   * - 0
     - CH0HF
     - CH0 M1总线一侧传输完成1/2中断使能           |

       1：使能                                     |

       0：禁能                                     |


M1总线一侧传输完成中断屏蔽寄存器SRCSGIM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSGIM
     - 0x20
     -
     - 0
     - scatter gather M1总线一侧传输完成中断屏蔽 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - CH1
     - CH1 M1总线一侧传输完成中断屏蔽              |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 2
     - CH1HF
     - CH1 M1总线一侧传输完成1/2中断屏蔽           |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 1
     - CH0
     - CH0 M1总线一侧传输完成中断屏蔽              |

       1：屏蔽                                     |

       0：非屏蔽                                   |

   * - 0
     - CH0HF
     - CH0 M1总线一侧传输完成1/2中断屏蔽           |

       1：屏蔽                                     |

       0：非屏蔽                                   |


M1总线一侧传输完成中断状态寄存器SRCSGIF
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSGIF
     - 0x24
     -
     - 0
     - scatter gathe 1总线一侧传输完成中断状态 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - CH1
     - CH1 M1总线一侧传输完成中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 2
     - CH1HF
     - CH1 M1总线一侧传输完成1/2中断状态，R/W1C    |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 1
     - CH0
     - CH0 M1总线一侧传输完成中断状态，R/W1C       |

       1：中断已发生                               |

       0：中断未发生                               |

   * - 0
     - CH0HF
     - CH0 M1总线一侧传输完成1/2中断状态，R/W1C    |

       1：中断已发生                               |

       0：中断未发生                               |


通道优先设定寄存器PRI
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PRI
     - 0x3C
     -
     - 0
     - 通道优先级设定             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - CH0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:2
     - -
     - -

   * - 1
     - CH1
     - DMA CH1优先级                               |

       1：该通道为高优先级                         |

       0：该通道为低优先级。                       |

   * - 0
     - CH0
     - DMA CH0优先级                               |

       1：该通道为高优先级                         |

       0：该通道为低优先级。                       |


通道n控制寄存器CRn
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CRn
     - 0 x40*n +  0x00
     -
     - 0
     - 通道控制                   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     - LEN
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - LEN
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - **LEN**
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:28
     - -
     - -

   * - 27
     - SETPOP
     - 步进传输。在C                               | RIEN为1时，每触发一次，传送一个单位的数据。 |

       注意：                                      |

       步进模式将屏蔽OPBURST配置，即在             | URST配置为INCR4的情况下，仍然按SINGLE传输。 |

       步进模式不支持M0                            | 配置不同的OPWIDTH，因为OPWIDTH不同时，两组 | 要的TRIG次数不一样，会造成数据传输出错。 |


       模式下，当传输目标地址为固定地址模式，且O | DTH为BYTE或HALFWORD时，每次传输的有效数据在 | 置于低位。(因为无法通过地址识别有效字节) |

   * - 26
     - AUTORE
     - Auto Restart, 通道在传输完成后，是否自动重新启动          |

       0：传输完成后停止                           |

       1 完成后自动按照上一次的配置重新启动传输。 |

   * - 25
     - TXEN
     - TX软件启动传输，传输方向为SRCDST            |

   * - 24
     - RXEN
     - RX软件启动传输，传输方向为DSTSRC            |

   * - 23:20
     - -
     - -

   * - 19:0
     - LEN
     - DMA传输单元数量                             |

       0对应1个单位长度                            |


通道n地址模式寄存器AMn
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - AMn
     - 0 x40*n +  0x04
     -
     - 0
     - 通道地址模式               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     - SR RST
     - S IT
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - DS RST
     - D IT
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:13
     - -
     - -

   * - 12
     - SRCBURST
     - 源地址传输模式                              |

       0： Single                                  |

       1： Burst（Inc4）                           |

   * - 11:10
     - SRCBIT
     - 源地址传输宽度                              |

       00：字节                                    |

       01：半字                                    |

       10：字                                      |

       11：保留                                    |

   * - 9:8
     - SRCAM
     - 源地址模式                                  |

       00：地址固定                                |

       01：地址递增                                |

       10：scatter gather                          |

       11：保留                                    |

   * - 7:5
     - -
     - -

   * - 4
     - DSTBURST
     - 目的地址传输类型                            |

       0：Single                                   |

       1：Burst（Inc4）                            |

   * - 3:2
     - DSTBIT
     - 目的地址传输宽度                            |

       00：字节                                    |

       01：半字                                    |

       10：字                                      |

       11：保留                                    |

   * - 1:0
     - DSTAM
     - 目的地址模式                                |

       00：地址固定                                |

       01：地址递增                                |

       10：scatter gather                          |

       11：保留                                    |


通道n目的地址寄存器DSTn
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTn
     - 0 x40*n +  0x08
     -
     - 0
     - 通道n目的地址寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DST
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DST
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DST
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DST
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DST
     - 目的地址                                    |


通道n目的分散收集地址1寄存器DSTSGADDRn1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSGADDRn1
     - 0 x40*n +  0xC
     -
     - 0
     - Destination Scatter Gather

       ress通道n目的分散收集地址1 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DSTSGADDRn1
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DSTSGADDRn1
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DSTSGADDRn1
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DSTSGADDRn1
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DSTSGADDRn1
     - Destination Scatter Gather Address通道n目的分散收集地址1               |


通道n目的分散收集地址2寄存器DSTSGADDRn2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSGADDRn2
     - 0 x40*n +  0x10
     -
     - 0
     - Destination Scatter Gather

       ress通道n目的分散收集地址2 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DSTSGADDRn2
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DSTSGADDRn2
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DSTSGADDRn2
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DSTSGADDRn2
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DSTSGADDRn2
     - Destination Scatter Gather Address通道n目的分散收集地址2               |


通道n目的分散收集地址寄存器DSTSGADDRn3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSGADDRn3
     - 0 x40*n +  0x24
     -
     - 0
     - Destination Scatter Gather

       ress通道n目的分散收集地址3 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DSTSGADDRn3
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DSTSGADDRn3
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DSTSGADDRn3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DSTSGADDRn3
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DSTSGADDRn3
     - Destination Scatter Gather Address通道n目的分散收集地址3               |


通道n握手信号选择寄存器MUXn
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - MUXn
     - 0 x40*n +  0x18
     -
     - 0
     - 通道n握手信号选择寄存器    |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     - EX EN
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     - S SEN
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     - D SEN
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:20
     - -
     - -

   * - 19
     - EXTHSEN
     - 触发功能使能                                |

       1：使能，TRIGGER触发                        |

       0：关闭，由启动信号TXEN/RXEN进行启动        |

       注1：需要使用这个寄                         | ，必须在其它相关寄存器配置完成之后再使能 |

       注2：EXT                                    | N=1时，也需置TXEN或RXEN才能启动触发传输功能 |

   * - 18:16
     - EXTHSSIG
     - TRIGGER信号触发配置                         |

       000：TIMER0                                 |

       001：TIMER1                                 |

       010：TIMER2                                 |

       011：TIMER3                                 |

       100：TIMER4                                 |

       101：DMA_TRIG0                              |

       110：DMA_TRIG1                              |

       111：保留                                   |

   * - 15:11
     - -
     - -

   * - 10
     - SRCHSEN
     - M1上硬件触发源使能                          |

       1：硬件触发                                 |

       0：RXEN软件启动                             |

   * - 9:8
     - SRCHSSIG
     - M1上硬件触发源                              |

       11：选择编号为4*x+3的握手信号               |

       10：选择编号为4*x+2的握手信号               |

       01：选择编号为4*x+1的握手信号               |

       00：选择编号为4*x的握手信号                 |

       详见表格 6‑3                                |

   * - 7:3
     - -
     - -

   * - 2
     - DSTHSEN
     - M0上硬件触发源使能                          |

       1：硬件触发                                 |

       0：TXEN软件启动                             |

   * - 1:0
     - DSTHSSIG
     - M0上硬件触发源                              |

       11：选择编号为4*x+3的握手信号               |

       10：选择编号为4*x+2的握手信号               |

       01：选择编号为4*x+1的握手信号               |

       00：选择编号为4*x的握手信号                 |

       详见表格 6‑3                                |


通道n源地址寄存器SRCn
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCn
     - 0 x40*n +  0x1C
     -
     - 0
     - 通道n源地址寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SRCn
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - SRCn
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - SRCn
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SRCn
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - SRCn
     - 源地址                                      |


通道n源分散收集地址1寄存器SRCSGADDRn1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSGADDRn1
     - 0 x40*n +  0x20
     -
     - 0
     - Source Scatter Gather

       ddress通道n源分散收集地址1 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SRCSGADDRn1
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - SRCSGADDRn1
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - SRCSGADDRn1
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SRCSGADDRn1
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - SRCSGADDRn1
     - Source Scatter Gather Address通道n源分散收集地址1                 |


通道n源分散收集地址2寄存器SRCSGADDRn2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSGADDRn2
     - 0 x40*n +  0x24
     -
     - 0
     - Source Scatter Gather

       ddress通道n源分散收集地址2 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SRCSGADDRn2
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - SRCSGADDRn2
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - SRCSGADDRn2
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SRCSGADDRn2
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - SRCSGADDRn2
     - Source Scatter Gather Address通道n源分散收集地址2                 |


通道n源分散收集地址3寄存器SRCSGADDRn3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSGADDRn3
     - 0 x40*n +  0x28
     -
     - 0
     - Source Scatter Gather

       ddress通道n源分散收集地址3 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SRCSGADDRn3
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - SRCSGADDRn3
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - SRCSGADDRn3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SRCSGADDRn3
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - SRCSGADDRn3
     - Source Scatter Gather Address通道n源分散收集地址3                 |


M0通道n状态寄存器DSTSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DSTSR
     - 0 x40*n +  0x2C
     -
     - 0
     - M0通道n状态寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DSTERR
     - -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     - D EN
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DSTLEN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31
     - DSTERR
     - M0长度配置错误                              |

   * - 30:12
     - -
     - -

   * - 11:0
     - DSTLEN
     - M0剩余传输量                                |


M1通道n状态寄存器SRCSR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SRCSR
     - 0 x40*n +  0x30
     -
     - 0
     - M1通道n状态寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - SRCERR
     - -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     - S EN
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SRCLEN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31
     - SRCERR
     - M1长度配置错误                              |

   * - 30:12
     - -
     - -

   * - 11:0
     - SRCLEN
     - M1剩余传输量                                |


CRC计算单元（CRC）
-----------------------------

.. _概述-13:

概述
~~~~~~~~~~~~

SWM241系列所有型号CRC模块操作均相同，主要应用于核实数据传输或者数据存储的正确性和完整性，使用前需使能CRC模块时钟。

CRC模块分为CRC-32、CRC-16、CRC-8。使用CRC-32多项式进行计算时，输入数据有效位宽可选择为32Bit、16Bit、8Bit，使用CRC-16多项式进行计算时，输入数据有效位宽可选择16Bit、8Bit。

.. _特性-13:

特性
~~~~~~~~~~~~

-  支持四种多项式

   -  x^32+x^26+x^23+x^22+x^16+x^12+x^11+x^10+x^8+x^7+x^5+x^4+x^2+x+1

   -  x^16+x^12+x^5+1

   -  x^16+x^15+x^2+1

   -  x^8+x^2+x+1

-  支持输出结果设置，包括翻转、取反

-  支持初始值自定义

-  支持输入可选择取反

.. _模块结构框图-10:

模块结构框图
~~~~~~~~~~~~~~~~

CRC循环冗余检验结构框图如图 6‑63所示：

|Featur063|

图 6‑63 CRC结构框图

.. _功能描述-14:

功能描述
~~~~~~~~~~~~~~

计算步骤
^^^^^^^^^^^^^^^^^^^^^^

-  根据需求，通过CR寄存器选择CRC算法、输入数据有效位宽、输出结果

-  根据需求，通过INIVAL寄存器设置CRC初始值

-  通过CR寄存器使能CRC计算

-  通过DATAIN寄存器向CRC计算单元输入要计算的数据

-  通过RESULT寄存器读取计算结果

.. _寄存器映射-12:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - CRCBASE：0 |x40002800
     - |
     -
     -
     -

   * - CR
     - 0x00
     -
     - 0x00
     - CRC状态控制寄存器          |

   * - DATAIN
     - 0x04
     -
     - 0x00
     - CRC数据输入寄存器          |

   * - INIVAL
     - 0x08
     -
     - 0x00
     - CRC初始值设置寄存器        |

   * - RESULT
     - 0x0C
     -
     - 0x00
     - CRC结果输出寄存器          |


.. _寄存器描述-12:

寄存器描述
~~~~~~~~~~~~~~~

.. _控制寄存器cr-1:

控制寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x00
     -
     - 0x00
     - CRC状态控制寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - POLY
     - ONOT
     -
     -
     -
     -
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:11
     - -
     - -

   * - 10:9
     - IBIT
     - CRC输入数据有效位数寄存器                   |

       00：32位输入数据有效                        |

       01：低16位输入数据有效                      |

       10：低8位输入数据有效                       |

       11：保留                                    |

   * - 8:7
     - POLY
     - CRC算法选择寄存器                           |

       00：x^16+x^12+x^5+1                         |

       01：x^8+x^2+x+1                             |

       10：x^16+x^15+x^2+1                         |

       11：x^32+x^26+x^23+x^                       | x^16+x^12+x^11+x^10+x^8+x^7+x^5+x^4+x^2+x+1

   * - 6
     - ONOT
     - 输出结果是否取反寄存器                      |

       1：输出结果取反                             |

       0：输出结果不需要取反                       |

   * - 5:4
     - OREV
     - 输出结果是否翻转寄存器                      |

       00：bit顺序不变                             |

       01：bit顺序完全翻转（32位数据宽度31:0 ->    | 0:31；16位数据宽度15:0 ->                   | 0:15；8位数据宽度7:0 -> 0:7）               |

       10：bit顺序在字节范围内翻转（32位数据宽度   | 31:0 -> 24:31, 16:23, 8:15, 0:7；16位数据宽度15:0 -> 8:15,              | 0:7；8位数据宽度同01                        |

       11：仅字节顺序翻转（32位数据宽度 31:0 ->    | 7:0,15:8,23:16,31:24；16位数据宽度15:0 ->   | 7:0,15:8；8位数据宽度同00）                 |

   * - 3
     - INOT
     - 输入数据是否取反                            |

       1：输入数据取反                             |

       0：输入数据不取反                           |

   * - 2:1
     - IREV
     - 输入数据是否翻转。                          |

       00：bit顺序不变                             |

       01：bit顺序完全翻转（32位数据宽度31:0 ->    | 0:31；16位数据宽度15:0 ->                   | 0:15；8位数据宽度7:0 -> 0:7）               |

       10：bit顺序在字节范围内翻转（32位数据宽度   | 31:0 -> 24:31, 16:23, 8:15, 0:7；16位数据宽度15:0 -> 8:15,              | 0:7；8位数据宽度同01                        |

       11：仅字节顺序翻转（32位数据宽度 31:0 ->    | 7:0,15:8,23:16,31:24；16位数据宽度15:0 ->   | 7:0,15:8；8位数据宽度同00）                 |

   * - 0
     - EN
     - CRC使能控制位                               |

       1：CRC使能                                  |

       0：CRC禁能                                  |


数据输入寄存器DATAIN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATAIN
     - 0x04
     -
     - 0x00
     - CRC数据输入寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATAIN
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATAIN
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATAIN
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATAIN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATAIN
     - C 据输入寄存器，有效位根据CR寄存器IBIT位选择 |


初始值设置寄存器INIVAL
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - INIVAL
     - 0x08
     -
     - 0x00
     - CRC初始值设置寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - INIVAL
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - INIVAL
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - INIVAL
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - INIVAL
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - INIVAL
     - CRC初始值寄存器                             |


结果输出寄存器RESULT
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RESULT
     - 0x0C
     -
     - 0x00
     - CRC结果输出寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - RESULT
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - RESULT
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - RESULT
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - RESULT
     - C 果输出寄存器，有效位根据CR寄存器POLY位选择 |

       当POLY为：                                  |

       00：低16位有效                              |

       01：低8位有效                               |

       10：低16位有效                              |

       11：32位有效                                |


除法器（DIV）
-------------------------

.. _概述-14:

概述
~~~~~~~~~~~~

SWM241系列所有型号除法器模块操作均相同。使用前需使能除法器模块时钟。

.. _特性-14:

特性
~~~~~~~~~~~~

-  支持32位整数除法运算及求余运算

-  支持32位开方运算，支持小数位

-  除法单次运算耗时32个时钟，不包括读写寄存器时间

-  开方单次运算耗时16/32个时钟，不包括读写寄存器时间

-  开方可选择两种模式

   -  只取整数（16位）

   -  包含小数（16+16位）

-  运算启动自动清除运算使能查询

-  提供运算进行标志和完成标志

-  支持有符号数和无符号数运算

.. _功能描述-15:

功能描述
~~~~~~~~~~~~~~

使用除法器模块计算商/余数流程如下：

-  配置DIVIDEND寄存器和DIVISOR寄存器

-  配置CR寄存器。选择有符号数或无符号数，DIVGO启动运算

-  读取SR寄存器，查看运算进程

   -  DIVBUSY：运算标志

   -  DIVEND：运算完成标志

-  读取QUO寄存器及余数寄存器REMAIN

注1：当除数为0时，商数为全1，余数为被除数；当被除数为0，商数为全0，余数为0

注2：计算过程中，不可更改除数及被除数

注3：如果除数为0，商数为全‘1’，余数为被除数

注4：如果被除数为0，商数为全‘0’，余数为0

使用除法器模块计算开方流程如下：

-  配置RADICAND寄存器；

-  配置CR寄存器；ROOTMOD：运算模式；ROOTGO：启动运算；

-  读取SR寄存器；ROOTBUSY：开方运算标志；ROOTENDI：开方整数运算完成标志；ROOTENDF：开方小数运算完成标志；

-  读取ROOT寄存器；

注1：当选择只计算整数时， ROOT寄存器低16位仍保存最后一次的小数计算结果。

注2：计算过程中，不可更改被开方数。

.. _寄存器映射-13:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - DIVBASE：0 |x40003800
     - |
     -
     -
     -

   * - CR
     - 0x00
     -
     - 0
     - 控制寄存器                 |

   * - SR
     - 0x04
     -
     - 0
     - 状态寄存器                 |

   * - DIVIDEND
     - 0x10
     -
     - 0
     - 被除数寄存器               |

   * - DIVISOR
     - 0x14
     -
     - 0
     - 除数寄存器                 |

   * - QUO
     - 0x18
     -
     - 0
     - 商寄存器                   |

   * - REMAIN
     - 0x1C
     -
     - 0
     - 余数寄存器                 |

   * - RADICAND
     - 0x20
     -
     - 0
     - 开方数据寄存器             |

   * - ROOT
     - 0x24
     -
     - 0
     - 平方根数据寄存器           |


.. _寄存器描述-13:

寄存器描述
~~~~~~~~~~~~~~~

.. _控制寄存器cr-2:

控制寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x00
     -
     - 0
     - 控制寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - R MOD
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     - D IGN
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:10
     - -
     - -

   * - 9
     - ROOTMOD
     - 开方运算模式                                |

       0：开方运算结果只保留16位整数；             |

       1：开方运算结果保留16位整数+16位小数；      |

   * - 8
     - ROOTGO
     - 开方运算启动信号                            |

       1：启动                                     |

       0：停止                                     |

       运算完成后硬件会自动清零。                  |

   * - 7:2
     - -
     - -

   * - 1
     - DIVSIGN
     - 0：表示有符号数                             |

       1：表示无符号数                             |

       注：当为有符号数时，                        | 最高位（31bit）表示符号，有效数据为31位  |

       当为无符号数时，32bit数据都是有效数据       |

   * - 0
     - DIVGO
     - 除法运算启动信号                            |

       1：启动                                     |

       0：停止                                     |

       运算完成后硬件会自动清零。                  |


状态寄存器SR
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - SR
     - 0x04
     -
     - 0
     - 状态寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     - RO USY
     -
     - RO NDI

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     - DI SY
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:11
     - -
     - -

   * - 10
     - ROOTBUSY
     - 开方运算过程标志。                          |

       1：运算中                                   |

       0：运算完成                                 |

       RO

       运算完成后硬件自动清零。                    |

   * - 9
     - ROOTENDF
     - 开方小数运算完成标志。                      |

       1：运算完成                                 |

       0：运算未完成                               |

       写1清除。                                   |

   * - 8
     - ROOTENDI
     - 开方整数运算完成标志。                      |

       1：运算完成                                 |

       0：运算未完成                               |

       写1清除。                                   |

   * - 7:2
     - -
     - -

   * - 1
     - DIVBUSY
     - 除法运算过程标志。                          |

       1：运算中                                   |

       0：运算完成                                 |

       RO

       运算完成后硬件自动清零                      |

   * - 0
     - DIVEND
     - 除法运算完成标志。                          |

       1：运算完成                                 |

       0：运算未完成                               |

       写1清除。                                   |


被除数寄存器DIVIDEND
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DIVIDEND
     - 0x10
     -
     - 0
     - 被除数寄存器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DIVIDEND
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DIVIDEND
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DIVIDEND
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DIVIDEND
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DIVIDEND
     - 被除数                                      |


除数寄存器DIVISOR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DIVISOR
     - 0x14
     -
     - 0
     - 除数寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DIVISOR
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DIVISOR
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DIVISOR
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DIVISOR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DIVISOR
     - 除数                                        |


商寄存器QUO
^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - QUO
     - 0x18
     -
     - 0
     - 商寄存器                   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - QUO
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - QUO
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - QUO
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - QUO
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - QUO
     - 商数                                        |


余数寄存器REMAIN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - REMAIN
     - 0x1C
     -
     - 0
     - 余数寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - REMAIN
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - REMAIN
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - REMAIN
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - REMAIN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - REMAIN
     - 余数                                        |


平方数据寄存器RADICAND
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RADICAND
     - 0x20
     -
     - 0
     - 平方数据寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - RADICAND
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - RADICAND
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - RADICAND
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - RADICAND
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - RADICAND
     - 平方数据                                    |


平方根寄存器ROOT
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ROOT
     - 0x24
     -
     - 0
     - 平方根数据寄存器           |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ROOTI
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ROOTI
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ROOTF
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ROOTF
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:16
     - ROOTI
     - 平方根整数数据                              |

   * - 15:0
     - ROOTF
     - 平方根小数数据                              |


SLED控制模块（SLED）
-------------------------------

.. _概述-15:

概述
~~~~~~~~~~~~

SWM241系列所有型号SLED控制模块操作均相同，不同型号SEG个数可能不同。使用前需使能SLED控制模块时钟。

.. _特性-15:

特性
~~~~~~~~~~~~

-  支持1/4占空比或1/8占空比

-  最多8个COM输出引脚和20个SEG输出引脚

-  SLED刷新频率可灵活配置

-  间隔时间可灵活配置

-  灰度时间可灵活配置

.. _模块结构框图-11:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur064|

图 6‑64 SLED控制模块结构框图

功能
~~~~~~~~~~~~

本模块为SLED控制器模块，支持1/4占空比或1/8占空比驱动方式。具有最多8个COM输出引脚和20个SEG输出引脚。SLED刷新频率可灵活配置。

SLED每个刷新周期内相关时间配置关系如图 6‑65所示：

|Featur065|

图 6‑65 SLED刷新周期内相关时间配置关系图

.. _寄存器映射-14:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - SLEDBASE：0 |x400AA800
     - |
     -
     -
     -

   * - CR
     - 0x00
     -
     - 0x0 _0000
     - SLED控制寄存器             |

   * - CLKDIV
     - 0x04
     -
     - 0x0 _0008
     - SLED时钟分频寄存器         |

   * - TIM
     - 0x08
     -
     - 0x0 _00FF
     - SLED刷新时间配置寄存器     |

   * - DATA0
     - 0x10
     -
     - 0x0 _0000
     - SLED数据0寄存器            |

   * - DATA1
     - 0x14
     -
     - 0x0 _0000
     - SLED数据1寄存器            |

   * - DATA2
     - 0x18
     -
     - 0x0 _0000
     - SLED数据2寄存器            |

   * - DATA3
     - 0x1c
     -
     - 0x0 _0000
     - SLED数据3寄存器            |

   * - DATA4
     - 0x20
     -
     - 0x0 _0000
     - SLED数据4寄存器            |

   * - DATA5
     - 0x24
     -
     - 0x0 _0000
     - SLED数据5寄存器            |

   * - DATA6
     - 0x28
     -
     - 0x0 _0000
     - SLED数据6寄存器            |

   * - DATA7
     - 0x2c
     -
     - 0x0 _0000
     - SLED数据7寄存器            |


.. _寄存器描述-14:

寄存器描述
~~~~~~~~~~~~~~~

SLED控制寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x00
     -
     - 0x 0_0000
     - SLED控制寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - COMINV
     - -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     - EN


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31
     - COMINV
     - COM反向配置寄存器                           |

       0：COM波形正常                              |

       1：COM波形反向                              |

   * - 30:2
     - -
     - -

   * - 1
     - DUTY
     - SLED占空比选择                              |

       0：1/4占空比                                |

       1：1/8占空比                                |

   * - 0
     - EN
     - SLED使能控制位                              |

       0：禁止SLED驱动器                           |

       1：使能SLED驱动器                           |


SLED时钟分频寄存器CLKDIV
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CLKDIV
     - 0x04
     -
     - 0x 0_0008
     - SLED时钟分频寄存器         |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3:0
     - DIV
     - SLED时钟（led_clk）分频寄存器               |

       0000：无效                                  |

       0001：pclk2的2分频                          |

       0010：pclk2的4分频                          |

       0011：pclk2的8分频                          |

       0100：pclk2的16分频                         |

       0101：pclk2的32分频                         |

       0110：pclk2的64分频                         |

       0111：pclk2的128分频                        |

       1000：pclk2的256分频                        |

       1001：pclk2的512分频                        |

       1010：pclk2的1024分频                       |

       1011：pclk2的2048分频                       |

       1100：pclk2的4096分频                       |

       1101：pclk2的8192分频                       |

       1110：pclk2的16384分频                      |

       1111：pclk2的32768分频                      |


SLED刷新时间配置寄存器TIM
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TIM
     - 0x08
     -
     - 0x 0_00FF
     - SLED刷新时间配置寄存器     |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - HIGH
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     - P OD
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PERIOD
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:26
     - -
     - -

   * - 25:16
     - HIGH
     - SLED刷新周期内，COM高电平配置寄存器         |

       high_tim = Tled_clk \* （HIGH+1)            |

       注：LED_HIGH配置值必                        | PERIOD配置值，可用于实现灵活调节显示亮度 |

   * - 15:10
     - -
     - -

   * - 9:0
     - PERIOD
     - SLED刷新周期内，COM/SEG电平周期配置寄存器   |

       period_tim = Tled_clk \*（PERIOD +1）       |


SLED数据x寄存器DATAx（0~7）
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA0
     - 0x10
     -
     - 0x 0_0000
     - SLED数据0寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA1
     - 0x14
     -
     - 0x 0_0000
     - SLED数据1寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA2
     - 0x18
     -
     - 0x 0_0000
     - SLED数据2寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA3
     - 0x1c
     -
     - 0x 0_0000
     - SLED数据3寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA4
     - 0x20
     -
     - 0x 0_0000
     - SLED数据4寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA5
     - 0x24
     -
     - 0x 0_0000
     - SLED数据5寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA6
     - 0x28
     -
     - 0x 0_0000
     - SLED数据6寄存器            |


.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA7
     - 0x2c
     -
     - 0x 0_0000
     - SLED数据7寄存器            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - SEG15
     - SEG14
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SEG7
     - SEG6
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:20
     - -
     - -

   * - 19
     - SEG19
     - SEG19数据输出                               |

   * - 18
     - SEG18
     - SEG18数据输出                               |

   * - 17
     - SEG17
     - SEG17数据输出                               |

   * - 16
     - SEG16
     - SEG16数据输出                               |

   * - 15
     - SEG15
     - SEG15数据输出                               |

   * - 14
     - SEG14
     - SEG14数据输出                               |

   * - 13
     - SEG13
     - SEG13数据输出                               |

   * - 12
     - SEG12
     - SEG12数据输出                               |

   * - 11
     - SEG11
     - SEG11数据输出                               |

   * - 10
     - SEG10
     - SEG10数据输出                               |

   * - 9
     - SEG9
     - SEG9数据输出                                |

   * - 8
     - SEG8
     - SEG8数据输出                                |

   * - 7
     - SEG7
     - SEG7数据输出                                |

   * - 6
     - SEG6
     - SEG6数据输出                                |

   * - 5
     - SEG5
     - SEG5数据输出                                |

   * - 4
     - SEG4
     - SEG4数据输出                                |

   * - 3
     - SEG3
     - SEG3数据输出                                |

   * - 2
     - SEG2
     - SEG2数据输出                                |

   * - 1
     - SEG1
     - SEG1数据输出                                |

   * - 0
     - SEG0
     - SEG0数据输出                                |


SLCD控制模块（SLCD）
-------------------------------

.. _概述-16:

概述
~~~~~~~~~~~~

SWM241系列所有型号SLCD控制模块操作均相同，使用前需使能SLCD控制模块时钟, 并通过设置PA15输出高电平开启SLCD电源域。

.. _特性-16:

特性
~~~~~~~~~~~~

-  LCD帧频率设置

-  4 COM*32 SEG

-  BIAS和DUTY设置

-  根据图形显示数据，产生驱动电平控制时序

-  本模块仅支持TYPEB驱动波形

-  支持按键扫描功能

.. _模块结构框图-12:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur066|

图 6‑66 SLCD控制模块结构框图

.. _功能描述-16:

功能描述
~~~~~~~~~~~~~~

本模块为SLCD控制器模块。模块支持标准APB总线操作，只支持WORD读写。

LCD显示
^^^^^^^^^^^^^^^^^^^^^^^

-  配置LCDC_CR寄存器

   -  CLKDIV：指示系统高频频率分频

   -  KEYSCAN：LCD按键扫描

   -  DRIVSEL：LCD驱动电流

   -  SCANFRQ：LCD帧频率

   -  DUTY：LCD扫描模式

   -  BIAS：LCD偏压

   -  DISP：LCD显示模式

   -  DRIVEEN：LCD驱动使能

-  配置LCD显示数据寄存器

-  配置LCDC_CR寄存器

   -  SCANEN：LCD扫描使能

按键扫描
^^^^^^^^^^^^^^^^^^^^^^

LCD驱动端口如果和IO端口复用，可以通过按键扫描功能来配合GPIO端口实现组合按键，同时不影响LCD驱动显示。当按键扫描功能控制位使能后，所有复用端口的波形都会在每个COM开始的时候出现一个约30us宽度的低脉冲；此脉冲可以用作IO中断唤醒信号。

使用软件实现按键扫描功能的步骤如下：

-  把GPIO设置为输入端口，并使能上拉；

-  启动GPIO中断功能；

-  启动按键扫描功能；

-  等待按键；

-  当有按键按下时，系统进入GPIO中断处理子程序：

   -  设置LCD为显示空白状态，并取消按键扫描功能；

   -  设置IO为IO功能，并输出按键探测信号；

   -  读取GPIO端口，判断按键；

   -  设置IO为LCD驱动，并启动LCD显示；

驱动波形
^^^^^^^^^^^^^^^^^^^^^^

表格 6‑4 1/3 BIAS Driver Output Levels

.. list-table::
   :widths: 25 25 25 25
   :header-rows: 0


   * - Driver
     - Mode
     - Alternation
     - Output Level

   * - COMMON
     - Selected
     - H
     - VDD

   * -
     -
     - L
     - GND

   * -
     - Non-Selected
     - H
     - 2*VDD/3

   * -
     -
     - L
     - VDD/3

   * - SEGMENT
     - Selected
     - H
     - VDD

   * -
     -
     - L
     - GND

   * -
     - Non-Selected
     - H
     - 2*VDD/3

   * -
     -
     - L
     - VDD/3


|Featur067|

图 6‑67 1/4DUTY和1/3BIAS驱动模式波形

|Featur068|

图 6‑68 1/3DUTY和1/3BIAS驱动模式波形

表格 6‑5 1/2 BIAS Driver Output Levels

.. list-table::
   :widths: 25 25 25 25
   :header-rows: 0


   * - Driver
     - Mode
     - Alternation
     - Output Level

   * - COMMON
     - Selected
     - H
     - VDD

   * -
     -
     - L
     - GND

   * -
     - Non-Selected
     - H
     - VDD/2

   * -
     -
     - L
     - VDD/2

   * - SEGMENT
     - Selected
     - H
     - VDD

   * -
     -
     - L
     - GND

   * -
     - Non-Selected
     - H
     - VDD

   * -
     -
     - L
     - GND


|Featur069|

图 6‑69 1/3DUTY和1/2BIAS驱动模式波形

数据显示映射表
^^^^^^^^^^^^^^^^^^^^^^^^^

表格 6‑6 显示数据映射表

.. list-table::
   :widths: 16 16 16 16 16 16
   :header-rows: 0


   * -
     - SEG0
     - SEG1
     - ……
     -
     -

   * - COM0
     - LCDC _DATA0/B0
     - LC DATA0/B1
     - ……
     - LC DAT B30
     - LC DAT B31

   * - COM1
     - LCDC _DATA1/B0
     - LC DATA1/B1
     - ……
     - LC DAT B30
     - LC DAT B31

   * - COM2
     - LCDC _DATA2/B0
     - LC DATA2/B1
     - ……
     - LC DAT B30
     - LC DAT B31

   * - COM3
     - LCDC _DATA3/B0
     - LC DATA3/B1
     - ……
     - LC DAT B30
     - LC DAT B31


.. _寄存器映射-15:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - SLCDBASE：0 |x400A9800
     - |
     -
     -
     -

   * - CR
     - 0x00
     -
     - 0x0 _0000
     - SLCD配置寄存器             |

   * - DATA0
     - 0x10
     -
     - 0x0 _0000
     - SLCD数据寄存器0            |

   * - DATA1
     - 0x14
     -
     - 0x0 _0000
     - SLCD数据寄存器1            |

   * - DATA2
     - 0x18
     -
     - 0x0 _0000
     - SLCD数据寄存器2            |

   * - DATA3
     - 0x1c
     -
     - 0x0 _0000
     - SLCD数据寄存器3            |


.. _寄存器描述-15:

寄存器描述
~~~~~~~~~~~~~~~

SLCD控制寄存器CR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - CR
     - 0x00
     -
     - 0x F_0000
     - SLCD配置寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     - CL IV
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     - K CAN
     - -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - SCANFRQ
     -
     -
     -
     -
     -
     - S EN
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:22
     - -
     - -

   * - 21:16
     - CLKDIV
     - 系统分频控制                                |

       Flcd = PCLK2 / (CLKDIV*32)

       注：由                                      | CD模块挂载在APB2总线上，APB2总线时钟(PCLK  | 系统时钟(SYSCLK)的二分频，故PCLK2=SYSCLK/2 |

   * - 15:11
     - -
     - -

   * - 10
     - KEYSCAN
     - 按键扫描功能                                |

       1使能                                       |

   * - 9:8
     - -
     - -

   * - 7:6
     - SCANFRQ
     - LCD帧频率控制                               |

       00：Flcd/256 Hz                             |

       01：Flcd/128 Hz                             |

       10：Flcd/64 Hz                              |

       11：Flcd/32 Hz                              |

   * - 5
     - DUTY
     - LCD扫描模式选择                             |

       0：1/4 Duty                                 |

       1：1/3 Duty                                 |

   * - 4
     - BIAS
     - LCD偏压模式选择                             |

       0：1/3 Bias                                 |

       1：1/2 Bias                                 |

   * - 3:2
     - DISP
     - LCD显示模式                                 |

       00：正常显示                                |

       01：显示空白                                |

       10：显示全部                                |

       11：保留                                    |

   * - 1
     - SCANEN
     - LCD扫描电路使能                             |

       0：不使能                                   |

       1：使能                                     |

   * - 0
     - DRIVEN
     - LCD驱动电路使能                             |

       0：不使能                                   |

       1：使能                                     |


SLCD数据寄存器0 DATA0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA0
     - 0x10
     -
     - 0x 0_0000
     - SLCD数据寄存器0            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATA0
     - LCD数据寄存器0                              |


SLCD数据寄存器1 DATA1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA1
     - 0x14
     -
     - 0x 0_0000
     - SLCD数据寄存器1            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATA1
     - LCD数据寄存器1                              |


SLCD数据寄存器2 DATA2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA2
     - 0x18
     -
     - 0x 0_0000
     - SLCD数据寄存器2            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATA2
     - LCD数据寄存器2                              |


SLCD数据寄存器3 DATA3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA3
     - 0x1c
     -
     - 0x 0_0000
     - SLCD数据寄存器3            |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATA3
     - LCD数据寄存器3                              |


SAFETY模块（SAFETY）
---------------------------------

.. _概述-17:

概述
~~~~~~~~~~~~

SWM241系列所有型号SAFETY模块操作均相同。使用前需使能SAFETY模块时钟。

.. _特性-17:

特性
~~~~~~~~~~~~

-  支持通过APB总线进行配置

-  安全使能控制的模块包括：

   -  模拟电路配置写保护

   -  时钟配置写保护

   -  IO配置写保护

   -  各模块中断使能写保护

   -  非法地址访问检测

-  非法访问检测

   -  支持4个Region

   -  每个Region非法访问触发时可选择产生复位或中断

.. _模块结构框图-13:

模块结构框图
~~~~~~~~~~~~~~~~

|Featur070|

图 6‑70 SAFETY模块结构框图

.. _功能描述-17:

功能描述
~~~~~~~~~~~~~~

RAM写保护
^^^^^^^^^^^^^^^^^^^^^^^^

RAM写保护支持以256 Bytes为单位进行，最大RAM写保护范围为32K，不同封装RAM大小可能不同，请以具体芯片型号为准。

写保护空间大小支持256Bytes、512Bytes、1024Bytes。

模拟电路配置寄存器写保护
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

模拟电路配置寄存器写保护模块包括：HRCCR、LRCCR、BODCR、XTALCR。

当safety使能寄存器中模拟电路配置寄存器写保护控制位为1时，模拟电路配置寄存器不可写，只能读，防止程序运行过程中改写模拟电路配置。

时钟配置寄存器写保护
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

时钟配置寄存器写保护模块包括：CLKSEL、CLKDIV、CLKEN0、CLKEN1。

当safety使能寄存器中时钟配置寄存器写保护控制位为1时，时钟配置寄存器不可写，只能读，防止程序运行过程中改写配置。

IO配置寄存器写保护
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

IO配置寄存器写保护模块包括：PORTX_FUNCX、PULLU_X、PULLD_X、INEN_X、OPEND_X。

当safety使能寄存器中IO配置寄存器写保护控制位为1时，IO配置寄存器不可写，只能读，防止程序运行过程中改写配置。

中断使能寄存器写保护
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

中断使能寄存器写保护包括所有模块的中断使能寄存器。当safety使能寄存器中中断使能寄存器写保护控制位为1时，所有模块的中断使能寄存器不可写，只可读，防止程序运行过程中改写配置。

非法地址访问检测
^^^^^^^^^^^^^^^^^^^^^^^^^^

当safety使能寄存器中非法地址访问检测使能位为1时，safety模块启动对非法地址访问的检测，此时IW相关的寄存器生效。

.. _中断配置与清除-7:

中断配置与清除
^^^^^^^^^^^^^^^^^^^^^^^^^

Safety模块中，当通过非法访问复位中断选择寄存器配置为异常访问产生中断时，可通过配置中断使能寄存器IE相应使能位使能中断，此时，当产生非法访问，中断标志寄存器IF相应位中置1。如需清除此标志，需在相应标志位中写1清零（R/W1C），否则中断在开启状态下会一直进入。

.. _寄存器映射-16:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - SAFETYBASE：0 |x400AB000
     - |
     -
     -
     -

   * - PERWP
     - 0x0
     -
     - 0x0 _0000
     - 外设写保护使能寄存器       |

   * - RAMWP
     - 0x4
     -
     - 0x0 _0000
     - RAM写保护配置寄存器        |

   * - IAACR
     - 0x8
     -
     - 0x0 _0000
     - 非法访问复位中断选择寄存器 |

   * - IF
     - 0x0C
     -
     - 0x0 _0000
     - 中断标志寄存器             |

   * - IE
     - 0x10
     -
     - 0x0 _0000
     - 中断使能寄存器             |

   * - BADDR0
     - 0x20
     -
     - 0x0 _0000
     - CPU非法访问底地址寄存器0   |

   * - TADDR0
     - 0x24
     -
     - 0x0 _0000
     - CPU非法访问顶地址寄存器0   |

   * - BADDR1
     - 0x28
     -
     - 0x0 _0000
     - CPU非法访问底地址寄存器1   |

   * - TADDR1
     - 0x2C
     -
     - 0x2 _0000
     - CPU非法访问顶地址寄存器1   |

   * - BADDR2
     - 0x30
     -
     - 0x2 _4000
     - CPU非法访问底地址寄存器2   |

   * - TADDR2
     - 0x34
     -
     - 0x4 _0000
     - CPU非法访问顶地址寄存器2   |

   * - BADDR3
     - 0x38
     -
     - 0x4 _0000
     - CPU非法访问底地址寄存器3   |

   * - TADDR3
     - 0x3C
     -
     - 0x4 _0000
     - CPU非法访问顶地址寄存器3   |


.. _寄存器描述-16:

寄存器描述
~~~~~~~~~~~~~~~

外设写保护使能寄存器PERWP
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PERWP
     - 0x0
     -
     - 0x 0_0000
     - 外设写保护使能寄存器       |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - A FGR
     - CL GR
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:5
     - -
     - -

   * - 4
     - ANACFGR
     - 模拟电路配置寄存器写保护控制                |

       0：模拟电路配置寄存器可写                   |

       1：模拟电路配置寄存器不可写，只能读         |

       包括：HRCCR、LRCCR、BODCR、XTALCR           |

   * - 3
     - CLKCFGR
     - 时钟配置寄存器写保护控制                    |

       0：时钟配置寄存器可写                       |

       1：时钟配置寄存器不可写，只能读             |

       包括：CLKSEL、CLKDIV、CLKEN0、CLKEN1        |

   * - 2
     - IOCFGR
     - IO配置寄存器写保护控制                      |

       0：IO配置寄存器可写                         |

       1：IO配置寄存器不可写，只能读               |

       包括：                                      | TX_FUNCX、PULLU_X、PULLD_X、INEN_X、OPEND_X |

   * - 1
     - IER
     - 中断使能寄存器写保护控制                    |

       0：所有模块的中断使能寄存器可写。           |

       1：所有模块的中断使能寄存器不可写，只可读。 |

   * - 0
     - IAADEN
     - 非法地址访问检测使能                        |

       0：非法地址访问检测不使能                   |

       1：非法地址访问检测使能                     |


RAM写保护配置寄存器RAMWP
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - RAMWP
     - 0x4
     -
     - 0x 0_0000
     - RAM写保护配置寄存器        |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     - ADDR
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:15
     - -
     - -

   * - 14:8
     - ADDR
     - RAM写保护的起始地址设置寄存器               |

       该寄存器配置的地址是以256 Bytes为单位的。   |

       0：表示起始地址为RAM物理地址0x0000          |

       1：表示起始地址为RAM物理地址0x0100          |

       2：表示起始地址为RAM物理地址0x0200          |

       3：表示起始地址为RAM物理地址0x0300          |

       以此类推，最大起始地址可配置为32K Bytes-256 | Bytes。                                     |

       当RAM最大为32K时，可配                      | 始地址为RAM物理地址0x7F00(0x8000-0x100)  |

       在32K RAM的范围内，以256                    | Bytes为单位可进行写保护。                   |

   * - 7:2
     - -
     - -

   * - 1:0
     - SIZE
     - RAM写保护空间控制                           |

       00：无效，RAM的所有空间都可以写             |

       01：从设定的起始地址起始的256               | Bytes被保护，不能写                         |

       10：从设定的起始地址起始的512               | Bytes被保护，不能写                         |

       11：从设定的起始地址起始的1024              | Bytes被保护，不能写                         |


非法访问复位中断选择寄存器IAACR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IAACR
     - 0x8
     -
     - 0x 0_0000
     - 非法访问复位中断选择寄存器 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - R3INT
     - CPU访问Region3区异常，复位中断选择。        |

       0：异常访问产生复位                         |

       1：异常访问产生中断                         |

   * - 2
     - R2INT
     - CPU访问Region2区异常，复位中断选择。        |

       0：异常访问产生复位                         |

       1：异常访问产生中断                         |

   * - 1
     - R1INT
     - CPU访问Region1区异常，复位中断选择。        |

       0：异常访问产生复位                         |

       1：异常访问产生中断                         |

   * - 0
     - R0INT
     - CPU访问Region0区异常，复位中断选择。        |

       0：异常访问产生复位                         |

       1：异常访问产生中断                         |


.. _中断标志寄存器if-1:

中断标志寄存器IF
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IF
     - 0x0C
     -
     - 0x 0_0000
     - 中断标志寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - R3
     - R2
     - R1
     - R0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - R3
     - CPU访问Region3区异常中断标志                |

       0：无中断                                   |

       1：有中断                                   |

   * - 2
     - R2
     - CPU访问Region2区异常中断标志                |

       0：无中断                                   |

       1：有中断                                   |

   * - 1
     - R1
     - CPU访问Region1区异常中断标志                |

       0：无中断                                   |

       1：有中断                                   |

   * - 0
     - R0
     - CPU访问Region0区异常中断标志                |

       0：无中断                                   |

       1：有中断                                   |


.. _中断使能寄存器ie-2:

中断使能寄存器IE
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - IE
     - 0x10
     -
     - 0x 0_0000
     - 中断使能寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     -
     - R3
     - R2
     - R1
     - R0


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:4
     - -
     - -

   * - 3
     - R3
     - CPU访问                                     | ion3区异常中断使能。当R3INT选择中断时有效。 |

       0：中断不使能。                             |

       1：中断使能。                               |

   * - 2
     - R2
     - CPU访问                                     | ion2区异常中断使能。当R2INT选择中断时有效。 |

       0：中断不使能。                             |

       1：中断使能。                               |

   * - 1
     - R1
     - CPU访问                                     | ion1区异常中断使能。当R1INT选择中断时有效。 |

       0：中断不使能。                             |

       1：中断使能。                               |

   * - 0
     - R0
     - CPU访问                                     | ion0区异常中断使能。当R0INT选择中断时有效。 |

       0：中断不使能。                             |

       1：中断使能。                               |


CPU非法访问底地址寄存器0 BADDR0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BADDR0
     - 0x20
     -
     - 0x 1_0000
     - CPU非法访问底地址寄存器0   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - BADDR0
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - BADDR0
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BADDR0
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - BADDR0
     - CPU非法访问地址窗口1底地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


CPU非法访问顶地址寄存器0 TADDR0
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TADDR0
     - 0x24
     -
     - 0x 0_0000
     - CPU非法访问顶地址寄存器0   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - TADDR0
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - TADDR0
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - TADDR0
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - TADDR0
     - CPU非法访问地址窗口0顶地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


CPU非法访问底地址寄存器1 BADDR1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BADDR1
     - 0x28
     -
     - 0x 8_0000
     - CPU非法访问底地址寄存器1   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - BADDR1
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - BADDR1
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BADDR1
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - BADDR1
     - CPU非法访问地址窗口1底地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


CPU非法访问顶地址寄存器1 TADDR1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TADDR1
     - 0x2C
     -
     - 0x 0_0000
     - CPU非法访问顶地址寄存器1   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - TADDR1
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - TADDR1
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - TADDR1
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - TADDR1
     - CPU非法访问地址窗口1顶地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


CPU非法访问底地址寄存器2 BADDR2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BADDR2
     - 0x30
     -
     - 0x 0_4000
     - CPU非法访问底地址寄存器2   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - BADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - BADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - BADDR2
     - CPU非法访问地址窗口2底地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


CPU非法访问顶地址寄存器2 TADDR2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - TADDR2
     - 0x34
     -
     - 0x 0_0000
     - CPU非法访问顶地址寄存器2   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - TADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - TADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - TADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - TADDR2
     - CPU非法访问地址窗口2顶地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


CPU非法访问底地址寄存器3 BADDR3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BADDR3
     - 0x38
     -
     - 0x 0_0000
     - CPU非法访问底地址寄存器3   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - BADDR3
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - BADDR3
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BADDR3
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - BADDR3
     - CPU非法访问地址窗口3底地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


.. _cpu非法访问底地址寄存器3-baddr3-1:

CPU非法访问底地址寄存器3 BADDR3
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - BADDR3
     - 0x3C
     -
     - 0x 0_4000
     - CPU非法访问底地址寄存器2   |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - BADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - BADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - BADDR2
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - Ignore
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:8
     - BADDR3
     - CPU非法访问地址窗口3底地址[30:8]位。        |

   * - 7:0
     - Ignore
     - 向这些位的写操作会被忽略，这些位总是为0。   |


FLASH控制器与ISP操作
-------------------------------

.. _概述-18:

概述
~~~~~~~~~~~~

SWM241系列内置FLASH为串行SPI接口FLASH。通过调用IAP函数进行FLASH操作。

操作FLASH前，需要关闭中断，防止打断造成写入错误。

.. _特性-18:

特性
~~~~~~~~~~~~

-  支持ISP程序定制

-  支持FLASH编程

-  支持BOOT自定义

-  支持加密

.. _功能描述-18:

功能描述
~~~~~~~~~~~~~~

FLASH操作
^^^^^^^^^^^^^^^^^^^^^^^^^

FLASH操作可以通过寄存器进行操作，也可以通过IAP函数进行擦除及写入。

**寄存器操作**

-  ERASE操作：

   -  使能FLASH擦写使能位

   -  配置擦page的地址

   -  查询ERASE位等待擦完成，直至状态从1变为0，擦除完成。当Flash完成擦除操作后，方可进行其他操作

-  PROGRAM 操作：

-  使能FLASH擦写使能位

-  配置FLASH写地址，必须字对齐

-  配置FLASH要写的数据

-  查询FLASHIDLE位等待写完成

*注1：以上操作流程均可在FLASH或SRAM中执行*

*注2：每PAGE为1K，每次最少写1word*

**IAP操作**

IAP 函数作为片内驻留程序，其提供了针对flash 的相关操作IAP 函数为Thumb 代码，分为擦除函数（驻留地址为0x1000400）和写入函数（驻留地址为0x1000450），建议使用如下方式调用：

擦除函数：

定义函数类型：

typedef uint32_t (\*IAPFunc1)(uint32_t PageNum);

IAPFunc1 FLASH_PageErase = (IAPFunc1)0x1000401;

变量定义如下：

PageNum： flash 擦除目标页码，以页为单位，0 为首地址，N 为页*N 对应地址

返回值：

0：擦除成功

1：擦除失败，参数错误

调用：

Result = FLASH_PageErase(10)；

擦除第20KB 内容。Result 返回0 表示成功。

写入函数：

定义函数类型：

typedef void (\*IAPFunc2)(uint32_t faddr, uint32_t raddr, uint32_t cnt);

IAPFunc2 FLASH_PageWrite = (IAPFunc2)0x1000451;

变量定义如下：

faddr： flash 写入目标地址，字对齐

raddr： ram 写入目标地址，字对齐

cnt： 写入数量，字为单位，最大为512个字（2KB 长度）

返回值：

0：写入成功

1：写入失败，参数错误

调用：

Result = FLASH_PageWrite(0x400,0x20000400,8)；

将ram 地址0x20000400 开始的8*4 个字节写入flash 地址0x400 起始。Result 返回0 表示成功。

调用IAP 函数时，应保证栈空间剩余24 个字节（byte）以上。执行写操作前，需确认对应目标地址已经执行过擦除操作。

详细操作请参阅库函数。

ISP模式
^^^^^^^^^^^^^^^^^^^^^^^

ISP（在系统编程）操作说明：当芯片上电后检测到ISP引脚持续5ms 以上的高电平后，将会进入ISP（在应用编程）模式。配合上位机及串口可执行程序更新操作，默认使用B6（RX）/B5（TX）作为串口通讯使用。

详细操作请参阅应用文档及库函数。

BOOT自定义
^^^^^^^^^^^^^^^^^^^^^^^^^

FLASH地址空间支持将指定地址的2K数据映射至0x00空间，通过REMAP寄存器实现。将地址（2KB对齐）写入REMAP寄存器BASEADD，并将EN位置1，则指定地址内容将被映射至0x00空间，可通过此功能实现向量表的重映射。

例如

BOOT： 0x00 ~ 0x4000

USER： 0x4000 ~ 0x8000

在BOOT中配置REMAP寄存器地址为0x4000并使能，并跳转至USER执行，当读取0x00地址时，返回内容为0x4000地址内容。

加密方式
^^^^^^^^^^^^^^^^^^^^^^

加密支持三种级别

.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 级别 |
     - 说明                             | |
     - 关键字值           | |

   * - 级别1 |
     - 不加密，SWD可正常读写            |    0x00 |
     - |
              |

   * - 级别2 |
     - SW 读取加密，SWD无法读取FLASH，只能执 | 行擦除操作，连接SWD后，FLASH无法执  | 行读操作，读取FLASH会进入Hardfault  |
     - 0x43211234 | | |

   * - 级别3 |
     - SWD封锁，SWD无法                 | 行读取及擦除工作，只能通过ISP读取 |
     - xABCD1234         | |


通过在用户程序中将0x1C偏移地址初始化为指定关键字，即可实现指定级别的加密。程序下载后再次上电后，芯片将处于指定加密级别的状态。

.. _寄存器映射-17:

寄存器映射
~~~~~~~~~~~~~~~

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 名称   |
     - | 偏移 |
     - |
       |
        |
        |
     - |

        |
        |
     - 描述                       | | | |

   * - FLASHCTLBASE：0 |x4004A000
     - |
     -
     -
     -

   * - DATA
     - 0x00
     -
     - 0x0 _0000
     - 写数据寄存器               |

   * - ADDR
     - 0x04
     -
     - 0x0 _0000
     - 写地址寄存器               |

   * - ERASE
     - 0x08
     -
     - 0x0 _0000
     - 擦除寄存器                 |

   * - PROGEN
     - 0x0C
     -
     - 0x0 _0000
     - Program使能寄存器          |

   * - STAT
     - 0x18
     -
     - 0x0 _0000
     - 状态寄存器                 |

   * - REMAP
     - 0x28
     -
     - 0x0 _0000
     - 地址映射寄存器             |


.. _寄存器描述-17:

寄存器描述
~~~~~~~~~~~~~~~

写数据寄存器DATA
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - DATA
     - 0x00
     -
     - 0x 0_0000
     - 写数据寄存器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - DATA
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - DATA
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - DATA
     - 需要写的数据                                |

       为保证FIFO不会溢出，只要write               | FIFO非满就可以写入新的数据。                |


写地址寄存器ADDR
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ADDR
     - 0x04
     -
     - 0x 0_0000
     - 写地址寄存器               |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - ADDR
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - ADDR
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ADDR
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ADDR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:0
     - ADDR
     - Flash写入起始地址                           |


擦除寄存器ERASE
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - ERASE
     - 0x08
     -
     - 0x 0_0000
     - 擦除寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - REQ
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - ADDR
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - ADDR
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:24
     - REQ
     - 擦使能,8位全为1有效                         |

   * - 23:17
     - -
     - -

   * - 16:0
     - ADDR
     - 擦除地址，全1表示整个eFlash 擦除            |

       每次page擦可擦除1K空间                      |


PROGEN寄存器 PROGEN
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - PROGEN
     - 0x0C
     -
     - 0x 0_0000
     - Program使能寄存器          |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - PROGEN
     -
     -
     -
     -
     -
     -
     -


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:1
     - -
     - -

   * - 0
     - PROGEN
     - 1：eflash program en                        |


.. _状态寄存器stat-1:

状态寄存器STAT
^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - STAT
     - 0x18
     -
     - 0x 0_0000
     - 状态寄存器                 |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - FLASHIDLE
     - -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     -
     -
     - FI ULL
     - FIF PTY
     - RE USY
     - PR USY
     - ERA USY


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31
     - FLASHIDLE
     - 1：flash空闲                                |

       0：flash 忙                                 |

   * - 30:5
     - -
     - -

   * - 4
     - FIFOFULL
     - write FIFO满                                |

   * - 3
     - FIFOEMPTY
     - write fifo 空                               |

   * - 2
     - READBUSY
     - read操作进行中，RO                          |

   * - 1
     - PROGBUSY
     - program操作进行中，RO                       |

   * - 0
     - ERASEBUSY
     - erase操作进行中，RO                         |


地址映射寄存器REMAP
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. list-table::
   :widths: 20 20 20 20 20
   :header-rows: 0


   * - 寄存器
     - 偏移
     - 类型
     - 复位值
     - 描述

   * - REMAP
     - 0x28
     -
     - 0x 0_0000
     - 地址映射寄存器             |


.. list-table::
   :widths: 12 12 12 12 12 12 12 12
   :header-rows: 0


   * - 31
     - 30
     - 29
     - 28
     - 27
     - 26
     - 25
     - 24

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 23
     - 22
     - 21
     - 20
     - 19
     - 18
     - 17
     - 16

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 15
     - 14
     - 13
     - 12
     - 11
     - 10
     - 9
     - 8

   * - -
     -
     -
     -
     -
     -
     -
     -

   * - 7
     - 6
     - 5
     - 4
     - 3
     - 2
     - 1
     - 0

   * - -
     - OFFSET
     -
     -
     -
     -
     -
     - ON


.. list-table::
   :widths: 33 33 33
   :header-rows: 0


   * - 位域 |
     - 名称     | |
     - 描述                                        | |

   * - 31:7
     - -
     - -

   * - 6:1
     - OFFSET
     - BASEADD地址                                 |

       将0地址开头的                               | 地址的访问都映射到BASEADD基地址对应的2K地址 |

   * - 0
     - ON
     - REMAP

       1：打开                                     |

       0：关闭                                     |


.. |Featur002| image:: media\Featur002.emf
.. |Featur003| image:: media\Featur003.emf
.. |Featur004| image:: media\Featur004.emf
.. |Featur005| image:: media\Featur005.emf
.. |Featur006| image:: media\Featur006.emf
.. |Featur007| image:: media\Featur007.emf
.. |Featur008| image:: media\Featur008.emf
.. |Featur009| image:: media\Featur009.emf
.. |Featur010| image:: media\Featur010.emf
.. |Featur011| image:: media\Featur011.emf
.. |Featur012| image:: media\Featur012.emf
.. |Featur013| image:: media\Featur013.emf
.. |Featur014| image:: media\Featur014.emf
.. |Featur015| image:: media\Featur015.emf
.. |Featur016| image:: media\Featur016.emf
.. |Featur017| image:: media\Featur017.emf
.. |Featur018| image:: media\Featur018.emf
.. |Featur019| image:: media\Featur019.emf
.. |Featur020| image:: media\Featur020.emf
.. |Featur021| image:: media\Featur021.emf
.. |Featur022| image:: media\Featur022.emf
.. |Featur023| image:: media\Featur023.emf
.. |Featur024| image:: media\Featur024.emf
.. |Featur025| image:: media\Featur025.emf
.. |Featur026| image:: media\Featur026.emf
.. |Featur027| image:: media\Featur027.emf
.. |Featur028| image:: media\Featur028.emf
.. |Featur029| image:: media\Featur029.emf
.. |Featur030| image:: media\Featur030.emf
.. |Featur031| image:: media\Featur031.emf
.. |Featur032| image:: media\Featur032.emf
.. |Featur033| image:: media\Featur033.emf
.. |Featur034| image:: media\Featur034.emf
.. |Featur035| image:: media\Featur035.emf
.. |Featur036| image:: media\Featur036.emf
.. |Featur037| image:: media\Featur037.emf
.. |Featur038| image:: media\Featur038.emf
.. |Featur039| image:: media\Featur039.emf
.. |Featur040| image:: media\Featur040.emf
.. |Featur041| image:: media\Featur041.emf
.. |Featur042| image:: media\Featur042.emf
.. |Featur043| image:: media\Featur043.emf
.. |Featur044| image:: media\Featur044.emf
.. |Featur045| image:: media\Featur045.emf
.. |Featur046| image:: media\Featur046.emf
.. |Featur047| image:: media\Featur047.emf
.. |Featur048| image:: media\Featur048.emf
.. |Featur049| image:: media\Featur049.emf
.. |Featur050| image:: media\Featur050.emf
.. |Featur051| image:: media\Featur051.emf
.. |Featur052| image:: media\Featur052.emf
.. |Featur053| image:: media\Featur053.emf
.. |Featur054| image:: media\Featur054.emf
.. |Featur055| image:: media\Featur055.emf
.. |Featur056| image:: media\Featur056.emf
.. |Featur051| image:: media\Featur051.emf
.. |Featur057| image:: media\Featur057.jpeg
   :width: 5.68611in
   :height: 1.47708in
.. |Featur058| image:: media\Featur058.emf
.. |Featur059| image:: media\Featur059.emf
.. |Featur060| image:: media\Featur060.emf
.. |Featur061| image:: media\Featur061.emf
.. |Featur062| image:: media\Featur062.emf
.. |Featur063| image:: media\Featur063.emf
.. |Featur064| image:: media\Featur064.emf
.. |Featur065| image:: media\Featur065.emf
.. |Featur066| image:: media\Featur066.emf
.. |Featur067| image:: media\Featur067.emf
.. |Featur068| image:: media\Featur068.emf
.. |Featur069| image:: media\Featur069.emf
.. |Featur070| image:: media\Featur070.emf
